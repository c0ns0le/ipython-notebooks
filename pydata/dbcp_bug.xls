<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:x="urn:schemas-microsoft-com:office:excel"
xmlns="http://www.w3.org/TR/REC-html40">
<head>
<title>ASF JIRA</title>
<style type="text/css">
table {
    mso-displayed-decimal-separator:"\.";
    mso-displayed-thousand-separator:"\,";
}
body
{
    margin: 0px;
    font-size: 12px;
    font-family: Arial, sans-serif;
    color:black;
}

</style>
<META HTTP-EQUIV="Content-Type" Content="application/vnd.ms-excel; charset=utf-8">
<!-- JRA-7598 - ensure fields (e.g. description) occupy only one cell - even fields containing newlines. -->
<!--
Vertical align all cells to the top, in order to align all issue rows of issuetable to the top,
since Excel does not use or save the css files it is hardcoded here.
-->
<style>
@page
{
mso-page-orientation:landscape;
margin:.25in .25in .5in .25in;
mso-header-margin:.5in;
mso-footer-margin:.25in;
mso-footer-data:"&R&P of &N";
mso-horizontal-page-align:center;
mso-vertical-page-align:center;
}

td.issuekey,
td.issuetype,
td.status {
    mso-style-parent: "";
    mso-number-format: \@;
    text-align: left;
}
br
{
    mso-data-placement:same-cell;
}

td
{
    vertical-align: top;
}
</style>

<!--[if gte mso 9]><xml>
<x:ExcelWorkbook>
<x:ExcelWorksheets>
<x:ExcelWorksheet>
<x:Name>general_report</x:Name>
<x:WorksheetOptions>
<x:Print>
<x:ValidPrinterInfo/>
</x:Print>
</x:WorksheetOptions>
</x:ExcelWorksheet>
</x:ExcelWorksheets>
</x:ExcelWorkbook>
</xml><![endif]-->
</head>
<body>

<table border="1">
    <tr bgcolor="#ffffff" height="47">
        <td colspan="52">
            <img src="https://issues.apache.org/jira/jira-logo-scaled.png" width="505" height="47" border="0" alt="ASF JIRA">
        </td>
    </tr>
    <tr>
        <td colspan="52">
            <a href="https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&jqlQuery=project+%3D+DBCP+AND+status+in+%28Open%2C+%22In+Progress%22%2C+Reopened%2C+Resolved%2C+Closed%29+ORDER+BY+key+DESC">ASF JIRA</a>
        </td>
    </tr>
    <tr>
        <td colspan="52">
            Displaying <strong>100</strong> issues at <strong>20/Mar/15 15:40</strong>.
        </td>
    </tr>
</table>




                                        <table id="issuetable"  border="1" cellpadding="3" cellspacing="1" width="100%">
                        <thead>
        <tr class="rowHeader">
            
                                                            <th class="colHeaderLink headerrow-project" data-id="project">
                            Project
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-issuekey" data-id="issuekey">
                            Key
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-summary" data-id="summary">
                            Summary
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-issuetype" data-id="issuetype">
                            Issue Type
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-status" data-id="status">
                            Status
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-priority" data-id="priority">
                            Priority
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-resolution" data-id="resolution">
                            Resolution
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-assignee" data-id="assignee">
                            Assignee
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-reporter" data-id="reporter">
                            Reporter
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-creator" data-id="creator">
                            Creator
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-created" data-id="created">
                            Created
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-lastViewed" data-id="lastViewed">
                            Last Viewed
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-updated" data-id="updated">
                            Updated
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-resolutiondate" data-id="resolutiondate">
                            Resolved
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-versions" data-id="versions">
                            Affects Version/s
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-fixVersions" data-id="fixVersions">
                            Fix Version/s
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-components" data-id="components">
                            Component/s
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-duedate" data-id="duedate">
                            Due Date
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-votes" data-id="votes">
                            Votes
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-watches" data-id="watches">
                            Watchers
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-thumbnail" data-id="thumbnail">
                            Images
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-timeoriginalestimate" data-id="timeoriginalestimate">
                            Original Estimate
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-timeestimate" data-id="timeestimate">
                            Remaining Estimate
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-timespent" data-id="timespent">
                            Time Spent
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-workratio" data-id="workratio">
                            Work Ratio
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-subtasks" data-id="subtasks">
                            Sub-Tasks
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-issuelinks" data-id="issuelinks">
                            Linked Issues
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-environment" data-id="environment">
                            Environment
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-description" data-id="description">
                            Description
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-security" data-id="security">
                            Security Level
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-progress" data-id="progress">
                            Progress
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-aggregateprogress" data-id="aggregateprogress">
                            Σ Progress
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-aggregatetimespent" data-id="aggregatetimespent">
                            Σ Time Spent
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-aggregatetimeestimate" data-id="aggregatetimeestimate">
                            Σ Remaining Estimate
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-aggregatetimeoriginalestimate" data-id="aggregatetimeoriginalestimate">
                            Σ Original Estimate
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-labels" data-id="labels">
                            Labels
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12310294" data-id="customfield_12310294">
                            Business Value
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12311820" data-id="customfield_12311820">
                            Rank
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12310220" data-id="customfield_12310220">
                            Date of First Response
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12311122" data-id="customfield_12311122">
                            Epic Status
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12311121" data-id="customfield_12311121">
                            Epic Name
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12310920" data-id="customfield_12310920">
                            Rank (Obsolete)
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12310921" data-id="customfield_12310921">
                            Sprint
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12311123" data-id="customfield_12311123">
                            Epic Colour
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12311120" data-id="customfield_12311120">
                            Epic Link
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12310420" data-id="customfield_12310420">
                            Global Rank
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12311720" data-id="customfield_12311720">
                            Cloudstack-CVSS
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12310310" data-id="customfield_12310310">
                            Attachment count
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_10010" data-id="customfield_10010">
                            Bugzilla Id
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12310010" data-id="customfield_12310010">
                            Machine Readable Info
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12310291" data-id="customfield_12310291">
                            Epic/Theme
                                                    </th>
                                                
                                                            <th class="colHeaderLink headerrow-customfield_12310290" data-id="customfield_12310290">
                            Flagged
                                                    </th>
                                                                    </tr>
    </thead>
    <tbody>
                    

                <tr id="issuerow12774893" rel="12774893" data-issuekey="DBCP-435" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-435" href="https://issues.apache.org/jira/browse/DBCP-435">DBCP-435</a>
</td>
                                            <td class="summary"><p>
                [PATCH] Friendly BasicDataSourceFactory
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            denixx baykin
    </td>
                                            <td class="creator">            denixx baykin
    </td>
                                            <td class="created"> 13/Feb/15 13:40 </td>
                                            <td class="lastViewed"> 20/Mar/15 15:40 </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 16/Feb/15 20:21 </td>
                                            <td class="versions">                        Nightly Builds            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      commons-dbcp2, Tomcat 8
  </td>
                                            <td class="description">      I wish to make DBCP2 main component (BasicDataSourceFactory) more friendly.<br/>
This is a component which end user faces in Tomcat, when he tries to configure DataSource in Tomcat.<br/>
I think factory should help user (in our case it is administrators) to understand, that he make a mistake in configuration.<br/>
<br/>
Tested with Tomcat 8 from trunk.<br/>
Properly configured Resource in context.xml or server.xml will leave nothing in logs:<br/>
{code:xml}&lt;Resource name=&quot;jdbc/MySql&quot;<br/>
              type=&quot;javax.sql.DataSource&quot;<br/>
              validationQuery=&quot;SELECT 1&quot;<br/>
              timeBetweenEvictionRunsMillis=&quot;30000&quot;<br/>
              maxTotal=&quot;20&quot;<br/>
              maxIdle=&quot;10&quot;<br/>
              minIdle=&quot;1&quot;<br/>
              maxWaitMillis=&quot;2000&quot;<br/>
              initialSize=&quot;20&quot;<br/>
              removeAbandonedTimeout=&quot;60&quot;<br/>
	      removeAbandonedOnMaintenance=&quot;true&quot;<br/>
              logAbandoned=&quot;true&quot;<br/>
              minEvictableIdleTimeMillis=&quot;30000&quot;<br/>
              username=&quot;admin&quot;<br/>
              password=&quot;megapassword&quot;<br/>
              driverClassName=&quot;com.mysql.jdbc.Driver&quot;<br/>
              url=&quot;jdbc:mysql://localhost:3306/new_schema&quot;/&gt;{code}<br/>
<br/>
But filling something wrong will output warnings to logfiles (stderr and logger):<br/>
{code:xml}&lt;Resource name=&quot;jdbc/MySql&quot;<br/>
	      auth=&quot;Container&quot;<br/>
	      factory=&quot;org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory&quot;<br/>
              type=&quot;javax.sql.DataSource&quot;<br/>
              validationQuery=&quot;SELECT 1&quot;<br/>
              validationInterval=&quot;30000&quot;<br/>
              timeBetweenEvictionRunsMillis=&quot;30000&quot;<br/>
              maxActive=&quot;20&quot;<br/>
              maxIdle=&quot;10&quot;<br/>
              minIdle=&quot;1&quot;<br/>
              maxWait=&quot;20000&quot;<br/>
              initialSize=&quot;20&quot;<br/>
              removeAbandonedTimeout=&quot;60&quot;<br/>
	      removeAbandoned=&quot;true&quot;<br/>
              logAbandoned=&quot;true&quot;<br/>
              minEvictableIdleTimeMillis=&quot;30000&quot;<br/>
              jmxEnabled=&quot;true&quot;<br/>
              jdbcInterceptors=&quot;org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer&quot;<br/>
              username=&quot;admin&quot;<br/>
              password=&quot;megapassword&quot;<br/>
              driverClassName=&quot;com.mysql.jdbc.Driver&quot;<br/>
              url=&quot;jdbc:mysql://localhost:3306/new_schema&quot;/&gt;{code}<br/>
<br/>
logfile output:<br/>
{noformat}13-Feb-2015 15:30:44.178 WARNING [main] org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory.getObjectInstance WARNING! Property maxActive is not used since DBCP2, use maxTotal instead. maxTotal default value is 8. You have set value of &quot;20&quot; for &quot;maxActive&quot; property<br/>
WARNING! Property removeAbandoned is not used since DBCP2, use one or both of removeAbandonedOnBorrow or removeAbandonedOnMaintenance instead. Both have default value set to false. You have set value of &quot;true&quot; for &quot;removeAbandoned&quot; property<br/>
WARNING! Property maxWait is not used in DBCP (it&#39;s a Tomcat JDBC pool feature), use maxWaitMillis instead. maxWaitMillis default value is -1. You have set value of &quot;20000&quot; for &quot;maxWait&quot; property<br/>
WARNING! Property validationInterval is not used in DBCP, it&#39;s a Tomcat JDBC pool feature. Ignoring. You have set value of &quot;30000&quot; for &quot;validationInterval&quot; property<br/>
WARNING! Property jdbcInterceptors is not used in DBCP, it&#39;s a Tomcat JDBC pool feature. Ignoring. You have set value of &quot;org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer&quot; for &quot;jdbcInterceptors&quot; property<br/>
WARNING! Property jmxEnabled is not used in DBCP, it&#39;s a Tomcat JDBC pool feature. Ignoring. You have set value of &quot;true&quot; for &quot;jmxEnabled&quot; property<br/>
INFO. Ignoring unknown property: value of &quot;Container&quot; for &quot;auth&quot; property<br/>
INFO. Ignoring unknown property: value of &quot;org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory&quot; for &quot;factory&quot; property{noformat}
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    friendly, patch</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzzhdj:
  </td>
                                            <td class="customfield_12310220">            <span title="16/Feb/15 20:21"><time class="livestamp allow-future" datetime="2015-02-16T20:21:53+0000">16/Feb/15 8:21 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      9223372036854775807
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      9223372036854775807
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12773430" rel="12773430" data-issuekey="DBCP-434" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-434" href="https://issues.apache.org/jira/browse/DBCP-434">DBCP-434</a>
</td>
                                            <td class="summary"><p>
                Disable JMX for Statement Pool
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Thomas Thieringer
    </td>
                                            <td class="creator">            Thomas Thieringer
    </td>
                                            <td class="created"> 09/Feb/15 11:11 </td>
                                            <td class="lastViewed"> 20/Mar/15 15:40 </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 13/Feb/15 04:02 </td>
                                            <td class="versions">                        2.0.1            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      commons-dbcp2: 2.0.1<br/>
commons-pool2: 2.3
  </td>
                                            <td class="description">      I&#39;m using the PoolableConnectionFactory and don&#39;t care about JMX, so I don&#39;t set the dataSourceJmxName, but I want to use a pool for my PreparedStatements. The makeObject() method initializes this pool automatically (lines 224-243) but seems to forget to disable JMX completely if I don&#39;t want it, i.e. GenericKeyedObjectPoolConfig.setJmxEnabled(...) is never called and always has the default value (=true). Therefore the JMX registration happens, which can cause a problem for me because of security constraints.<br/>
<br/>
Because of the way the makeObject() method is written, I have no influence on this part, so my quick solution was to disable the poolStatement option for the PoolableConnectionFactory and provide a custom ConnectionFactory object instead that basically does the same thing with the statement pool and also disables the JMX option.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzz8r3:
  </td>
                                            <td class="customfield_12310220">            <span title="11/Feb/15 13:46"><time class="livestamp allow-future" datetime="2015-02-11T13:46:52+0000">11/Feb/15 1:46 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      9223372036854775807
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      9223372036854775807
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12772372" rel="12772372" data-issuekey="DBCP-433" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-433" href="https://issues.apache.org/jira/browse/DBCP-433">DBCP-433</a>
</td>
                                            <td class="summary"><p>
                Connection leak when SQLException is thrown while enlisting in XA transaction
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Vladimir Konkov
    </td>
                                            <td class="creator">            Vladimir Konkov
    </td>
                                            <td class="created"> 04/Feb/15 14:01 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 10/Feb/15 02:52 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      All
  </td>
                                            <td class="description">      In ManagedConnection when delegate connection is null new real (driver) connection is borroved from pool. If SQLExcetion is thrown in &#39;TransactionContext.enlistResource()&#39;  that borrowed connection is lost (leaked).<br/>
Short fail on network side may immediately exhaust the pool.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzz2av:
  </td>
                                            <td class="customfield_12310220">            <span title="09/Feb/15 09:14"><time class="livestamp allow-future" datetime="2015-02-09T09:14:20+0000">09/Feb/15 9:14 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      9223372036854775807
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      9223372036854775807
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    2
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12771547" rel="12771547" data-issuekey="DBCP-432" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-432" href="https://issues.apache.org/jira/browse/DBCP-432">DBCP-432</a>
</td>
                                            <td class="summary"><p>
                BasicDataSource createDataSource can return partially initialized DataSource
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Phil Steitz
    </td>
                                            <td class="creator">            Phil Steitz
    </td>
                                            <td class="created"> 31/Jan/15 19:40 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 04/Feb/15 13:44 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      The BasicDataSource instance variable, dataSource, is DCL-controlled in createDataSource; but within the sync block it is set directly and then subsequently initialized.  Threads that request connections, or access createDataSource directly while initialization is in progress will get partially initialized dataSources.  In particular, logWriters may be null and initial pool capacity may not be provisioned (if initialSize &gt; 0).
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzyxb3:
  </td>
                                            <td class="customfield_12310220">            <span title="31/Jan/15 20:23"><time class="livestamp allow-future" datetime="2015-01-31T20:23:45+0000">31/Jan/15 8:23 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      9223372036854775807
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      9223372036854775807
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    2
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12770298" rel="12770298" data-issuekey="DBCP-431" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-431" href="https://issues.apache.org/jira/browse/DBCP-431">DBCP-431</a>
</td>
                                            <td class="summary"><p>
                SQLException: Error preloading the connection pool after upgrade to commons-dbcp2
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Not a Problem
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Sergio Cuenca
    </td>
                                            <td class="creator">            Sergio Cuenca
    </td>
                                            <td class="created"> 27/Jan/15 08:56 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 30/Jan/15 13:27 </td>
                                            <td class="resolutiondate"> 30/Jan/15 11:47 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.0,                     2.0.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">3</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Windows XP<br/>
Junit 4.11<br/>
Java 1.7<br/>
Spring 4.0<br/>
maven-compiler-plugin 3.2<br/>
maven.surefire.plugin 2.17<br/>
maven-cobertura-plugin 2.6<br/>
Jenkins 1.549
  </td>
                                            <td class="description">      Hi all,<br/>
<br/>
We have a continuous integration environment (Jenkins) to launch our JUnits tests.<br/>
We had the version 1.4 of commons-dbcp to create the connection pools with Spring. The configuration was the following:<br/>
<br/>
{code:xml}<br/>
&lt;bean id=&quot;dataSourceTemplate&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;<br/>
	  &lt;property name=&quot;driverClassName&quot;&gt;&lt;value&gt;${aplicacion.datasource.driverClassName}&lt;/value&gt;&lt;/property&gt;<br/>
	  &lt;property name=&quot;url&quot;&gt;&lt;value&gt;${aplicacion.datasource.url}&lt;/value&gt;&lt;/property&gt;<br/>
	  &lt;property name=&quot;username&quot;&gt;&lt;value&gt;${aplicacion.datasource.user}&lt;/value&gt;&lt;/property&gt;<br/>
	  &lt;property name=&quot;password&quot;&gt;&lt;value&gt;${aplicacion.datasource.password}&lt;/value&gt;&lt;/property&gt;<br/>
	  &lt;property name=&quot;initialSize&quot;&gt;&lt;value&gt;1&lt;/value&gt;&lt;/property&gt;<br/>
	  &lt;property name=&quot;maxActive&quot;&gt;&lt;value&gt;15&lt;/value&gt;&lt;/property&gt;<br/>
	  &lt;property name=&quot;maxIdle&quot;&gt;&lt;value&gt;2&lt;/value&gt;&lt;/property&gt;<br/>
	  &lt;property name=&quot;accessToUnderlyingConnectionAllowed&quot;&gt;&lt;value&gt;${aplicacion.datasource.accessToUnderlyingConnectionAllowed}&lt;/value&gt;&lt;/property&gt;<br/>
	&lt;/bean&gt;<br/>
{code}<br/>
<br/>
We use JUnit 4.11 and maven cobertura plugin 1.6. to launch the tests.<br/>
This configuration was working CORRECTLY.<br/>
<br/>
After upgrade to commons-dbcp2, version 2.0.1. Some unit tests are reporting errors with the following message:<br/>
<br/>
java.sql.SQLException: Error preloading the connection pool.<br/>
<br/>
We launch one unit test each time, one by one. We create and destroy the connection pool every time.<br/>
<br/>
What can we do to solve this problem?? <br/>
Thank you very much.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    commons-dbcp2, connection-pooling</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzypnb:
  </td>
                                            <td class="customfield_12310220">            <span title="27/Jan/15 12:16"><time class="livestamp allow-future" datetime="2015-01-27T12:16:57+0000">27/Jan/15 12:16 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      9223372036854775807
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      9223372036854775807
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12751430" rel="12751430" data-issuekey="DBCP-429" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-429" href="https://issues.apache.org/jira/browse/DBCP-429">DBCP-429</a>
</td>
                                            <td class="summary"><p>
                socket randomly timeout while getting connection 
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            cissy zhang
    </td>
                                            <td class="creator">            cissy zhang
    </td>
                                            <td class="created"> 29/Oct/14 17:07 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 29/Oct/14 19:38 </td>
                                            <td class="resolutiondate"> 29/Oct/14 19:38 </td>
                                            <td class="versions">                        1.2.2            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      tomcat 7, dbcp1.2.2, oracle 11g
  </td>
                                            <td class="description">      Hi,<br/>
Our application is using DBCP1.2.2, recently our support noticed that the quartz scheduler will not execute job in a timely manner, it will get delayed about 15min or so, then run the job. From dynatrace, we noriced that the getconnection timed out at sock read.<br/>
<br/>
I googled online, saw similar issue reported in DBCP-244, in that case, the issue was in mysql, but we are using oracle11g, not sure if it is related.<br/>
<br/>
Your help is deeply appreciated!<br/>
<br/>
Cissy
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzvlfb:
  </td>
                                            <td class="customfield_12310220">            <span title="29/Oct/14 19:38"><time class="livestamp allow-future" datetime="2014-10-29T19:38:01+0000">29/Oct/14 7:38 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      9223372036854775807
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      9223372036854775807
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12746058" rel="12746058" data-issuekey="DBCP-428" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-428" href="https://issues.apache.org/jira/browse/DBCP-428">DBCP-428</a>
</td>
                                            <td class="summary"><p>
                Unsuccessful Connection enlistment in XA Transaction ignored by TransactionContext
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Critical
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Vladimir Konkov
    </td>
                                            <td class="creator">            Vladimir Konkov
    </td>
                                            <td class="created"> 06/Oct/14 09:18 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 31/Dec/14 16:04 </td>
                                            <td class="versions">                        1.4,                     2.0.1            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      All
  </td>
                                            <td class="description">      When TransactionContext call &#39;enlistResource()&#39; on Transaction it is ignored returned result. This hapens at least when XAResource throws XAException in enlistResource method. By contract XAException should not be propagated by &#39;enlistResource()&#39; , instead &#39;false&#39; is returned.<br/>
As result:<br/>
1. ManagedConnection returned by pool is not enlisted in transaction (application think it does)<br/>
2. Transaction itself marked for rollback (because of XaException).<br/>
3. ManagedConnection returned by pool used by application without any errors until commit on transaction is called. Changes made in not enlisted connection may be commited on other use of native connection or rolled back depending on pool config.<br/>
<br/>
Issue is very dangerous especialy if changed made by application will be commited later but XA transaction in witch it made has bin rolled back.<br/>
<br/>
We are hit by this bug in production using MS SQL Server and PostgreSQL JDBC drivers.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzuovb:
  </td>
                                            <td class="customfield_12310220">            <span title="31/Dec/14 16:04"><time class="livestamp allow-future" datetime="2014-12-31T16:04:17+0000">31/Dec/14 4:04 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      9223372036854775807
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      9223372036854775807
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12745907" rel="12745907" data-issuekey="DBCP-427" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-427" href="https://issues.apache.org/jira/browse/DBCP-427">DBCP-427</a>
</td>
                                            <td class="summary"><p>
                Examines &#39;SQLException&#39;s thrown by underlying connections or statements for fatal (disconnection) errors
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Vladimir Konkov
    </td>
                                            <td class="creator">            Vladimir Konkov
    </td>
                                            <td class="created"> 04/Oct/14 12:08 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 28/Jan/15 13:36 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Affected cases:<br/>
1. Ability to detect severed connection without need for validity check (it can be time demand).<br/>
2. Not all fatal errors detected with simple validation query or isValid() call. For example: <br/>
Broken XA connections of MS SQL Server and Oracle Database (and may be other) pass validation for both isValid() and simple validation query such as &#39;SELEC 1 FROM DUAL&#39; but throw fatal errors on data and/or transaction manipulation calls. Such errors gone only after reconnect. In case of use DBCP for polling application has no chance to cleanup broken connection.<br/>
<br/>
By providing infractructure for check thrown exceptions and mark PoolableConnection as poisoned we can cleanup pool on validation phase.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzunxz:
  </td>
                                            <td class="customfield_12310220">            <span title="27/Dec/14 22:37"><time class="livestamp allow-future" datetime="2014-12-27T22:37:27+0000">27/Dec/14 10:37 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      9223372036854775807
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      9223372036854775807
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12744772" rel="12744772" data-issuekey="DBCP-426" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-426" href="https://issues.apache.org/jira/browse/DBCP-426">DBCP-426</a>
</td>
                                            <td class="summary"><p>
                DBCP should allow clients to mark connections as invalid
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Phil Steitz
    </td>
                                            <td class="creator">            Phil Steitz
    </td>
                                            <td class="created"> 29/Sep/14 20:59 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 01/Oct/14 02:00 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Currently there is no way for a DBCP client to mark a connection as invalid, effectively requesting the pool to try to close it, remove it from the pool and reclaim pool capacity.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzugxb:
  </td>
                                            <td class="customfield_12310220">            <span title="29/Sep/14 22:01"><time class="livestamp allow-future" datetime="2014-09-29T22:01:28+0100">29/Sep/14 10:01 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      9223372036854775807
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      9223372036854775807
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12734374" rel="12734374" data-issuekey="DBCP-425" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-425" href="https://issues.apache.org/jira/browse/DBCP-425">DBCP-425</a>
</td>
                                            <td class="summary"><p>
                Example code for pooling driver should be fixed.
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Sebastian Hinckel
    </td>
                                            <td class="creator">            Sebastian Hinckel
    </td>
                                            <td class="created"> 15/Aug/14 10:28 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 15/Aug/14 16:22 </td>
                                            <td class="resolutiondate"> 15/Aug/14 16:22 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Referring to https://issues.apache.org/jira/browse/DBCP-412 the example code for pooling driver should also be fixed, since the same problem occurs here, too. As of now this has only been fixed in the pooling datasource example. <br/>
<br/>
Adding <br/>
<br/>
poolableConnectionFactory.setPool(connectionPool); <br/>
<br/>
is the solution.<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzsshj:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      412301
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      412314
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12731440" rel="12731440" data-issuekey="DBCP-424" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-424" href="https://issues.apache.org/jira/browse/DBCP-424">DBCP-424</a>
</td>
                                            <td class="summary"><p>
                validateLifetime causes needless warnings about swallowed exceptions to be logged
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Eric Fialkowski
    </td>
                                            <td class="creator">            Eric Fialkowski
    </td>
                                            <td class="created"> 01/Aug/14 23:24 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 13/Jan/15 04:33 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Java 1.7, jTDS 1.2.8, Ubuntu Linux 12.04
  </td>
                                            <td class="description">      the validateLifetime method in PoolableConnectionFactory is causing the following warning to be logged, even though it is not an exceptional case. While it is not impairing functionality, we have to work around the issue.<br/>
<br/>
2014-07-29 14:15:28.0573 WARN http-8084-52 org.apache.commons.dbcp2.BasicDataSource An internal object pool swallowed an Exception<br/>
java.lang.Exception: The lifetime of the connection [300,008] milliseconds exceeds the maximum permitted value of [300,000] milliseconds<br/>
        at org.apache.commons.dbcp2.PoolableConnectionFactory.validateLifetime(PoolableConnectionFactory.java:370)<br/>
        at org.apache.commons.dbcp2.PoolableConnectionFactory.passivateObject(PoolableConnectionFactory.java:310)<br/>
        at org.apache.commons.pool2.impl.GenericObjectPool.returnObject(GenericObjectPool.java:577)<br/>
        at org.apache.commons.dbcp2.PoolableConnection.close(PoolableConnection.java:171)<br/>
        at org.apache.commons.dbcp2.DelegatingConnection.closeInternal(DelegatingConnection.java:235)<br/>
        at org.apache.commons.dbcp2.DelegatingConnection.close(DelegatingConnection.java:218)<br/>
        at org.apache.commons.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper.close(PoolingDataSource.java:229)<br/>
        at org.springframework.jdbc.datasource.DataSourceUtils.doCloseConnection(DataSourceUtils.java:341)<br/>
        at org.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection(DataSourceUtils.java:328)<br/>
        at org.springframework.jdbc.datasource.DataSourceUtils.releaseConnection(DataSourceUtils.java:294)<br/>
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:417)<br/>
        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:468)<br/>
        at org.springframework.jdbc.core.JdbcTemplate.queryForRowSet(JdbcTemplate.java:523)<br/>
        at com.ca.vm.lib.dao.ModelDao.loadJobDetails(ModelDao.java:999)<br/>
        at com.ca.vm.lib.dao.ModelDao.extractJobs(ModelDao.java:910)<br/>
        at com.ca.vm.lib.dao.ModelDao.extractJob(ModelDao.java:921)<br/>
        at com.ca.vm.lib.dao.ModelDao.loadJob(ModelDao.java:744)<br/>
        at com.ca.vm.api.jobs.JobsApiLinksLoader$1.load(JobsApiLinksLoader.java:48)<br/>
        at com.ca.vm.api.json.ApiLinksExpander.makeApiRequest(ApiLinksExpander.java:130)<br/>
        at com.ca.vm.api.json.ApiLinksExpander.expand(ApiLinksExpander.java:114)<br/>
        at com.ca.vm.api.json.ApiLinksExpander.rootExpand(ApiLinksExpander.java:65)<br/>
        at com.ca.vm.api.json.ApiLinksExpander.toJson(ApiLinksExpander.java:60)<br/>
        at com.ca.vm.api.JobsResource.getJobById(JobsResource.java:283)<br/>
        at sun.reflect.GeneratedMethodAccessor317.invoke(Unknown Source)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br/>
        at java.lang.reflect.Method.invoke(Method.java:601)<br/>
        at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)<br/>
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)<br/>
        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)<br/>
        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)<br/>
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)<br/>
        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)<br/>
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)<br/>
        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)<br/>
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)<br/>
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)<br/>
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)<br/>
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)<br/>
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)<br/>
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)<br/>
        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:910)<br/>
        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:858)<br/>
        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:812)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
        at com.ca.graphite.ws.lib.AbstractGraphiteMetricFilter.doFilter(AbstractGraphiteMetricFilter.java:72)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)<br/>
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br/>
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)<br/>
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)<br/>
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)<br/>
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)<br/>
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)<br/>
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)<br/>
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)<br/>
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)<br/>
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)<br/>
        at java.lang.Thread.run(Thread.java:722)<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzsbh3:
  </td>
                                            <td class="customfield_12310220">            <span title="01/Aug/14 23:35"><time class="livestamp allow-future" datetime="2014-08-01T23:35:33+0100">01/Aug/14 11:35 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      409507
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      409512
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12728195" rel="12728195" data-issuekey="DBCP-423" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-423" href="https://issues.apache.org/jira/browse/DBCP-423">DBCP-423</a>
</td>
                                            <td class="summary"><p>
                PoolingDataSource should implement Closeable
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Christian Schneider
    </td>
                                            <td class="creator">            Christian Schneider
    </td>
                                            <td class="created"> 18/Jul/14 13:42 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 18/Jan/15 19:06 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Currently PoolingDataSource only implements DataSource. <br/>
<br/>
I have the following case in ops4j pax-jdbc. I offer a DataSourceFactory in one bundle that can create a pooling DataSource.<br/>
<br/>
Then in another bundle I create DataSources based on config in ConfigurationAdmin. So when the config appears I create the DataSource, when the config goes away I have to destroy it.<br/>
<br/>
It is important to correctly dispose the DataSource as the pool has to be closed. As I can not depend on dbcp in the bundle that destroys the DataSource I currently have no simple way to destroy the DataSource.<br/>
<br/>
This is where I create the DataSource:<br/>
https://github.com/ops4j/org.ops4j.pax.jdbc/blob/master/pax-jdbc-pool/src/main/java/org/ops4j/pax/jdbc/pool/impl/PooledDataSourceFactory.java<br/>
<br/>
I was able to solve it by a kind of hack. I extended the PoolingDataSource with a class that supports Closeable. So from the other bundle I could check if the object implements Closeable and call close.<br/>
<br/>
It would be a lot easier if PoolingDataSource would implement Closeable like I did. The same is true for GenericObjectPool and the other pools. If they would implement Closeable then handling them would be a lot easier.<br/>
They already support a close method so it would be a small change.<br/>
<br/>
----<br/>
public class CloseablePoolingDataSource&lt;C extends Connection&gt; extends PoolingDataSource&lt;C&gt; implements Closeable {<br/>
<br/>
    public CloseablePoolingDataSource(ObjectPool&lt;C&gt; pool) {<br/>
        super(pool);<br/>
    }<br/>
<br/>
    @Override<br/>
    public void close() throws IOException {<br/>
        getPool().close();<br/>
    }<br/>
<br/>
}
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzrrx3:
  </td>
                                            <td class="customfield_12310220">            <span title="31/Dec/14 19:28"><time class="livestamp allow-future" datetime="2014-12-31T19:28:29+0000">31/Dec/14 7:28 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      406321
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      406300
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12726977" rel="12726977" data-issuekey="DBCP-422" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-422" href="https://issues.apache.org/jira/browse/DBCP-422">DBCP-422</a>
</td>
                                            <td class="summary"><p>
                Update Apache Commons Logging to 1.2 from 1.1.3
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">            Gary Gregory
    </td>
                                            <td class="reporter">            Gary Gregory
    </td>
                                            <td class="creator">            Gary Gregory
    </td>
                                            <td class="created"> 13/Jul/14 02:54 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 13/Jul/14 03:41 </td>
                                            <td class="versions">                        2.0.1            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Apache Maven 3.2.2 (45f7c06d68e745d05611f7fd14efb6594181933e; 2014-06-17T09:51:42-04:00)<br/>
Maven home: C:\Java\apache-maven-3.2.2<br/>
Java version: 1.7.0_60, vendor: Oracle Corporation<br/>
Java home: C:\Program Files\Java\jdk1.7.0_60\jre<br/>
Default locale: en_US, platform encoding: Cp1252<br/>
OS name: &quot;windows 7&quot;, version: &quot;6.1&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;
  </td>
                                            <td class="description">      Update Apache Commons Logging to 1.2 from 1.1.3
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzrkkv:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      405120
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      405084
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12718352" rel="12718352" data-issuekey="DBCP-421" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-421" href="https://issues.apache.org/jira/browse/DBCP-421">DBCP-421</a>
</td>
                                            <td class="summary"><p>
                java.sql.SQLException: Closed Connection
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Open
    </td>
                                            <td class="priority">   Critical
</td>
                                            <td class="resolution">    <em>Unresolved</em>
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Nick Pavlov
    </td>
                                            <td class="creator">            Nick Pavlov
    </td>
                                            <td class="created"> 04/Jun/14 10:59 </td>
                                            <td class="lastViewed"> 20/Mar/15 15:38 </td>
                                            <td class="updated"> 27/Dec/14 22:33 </td>
                                            <td class="resolutiondate"> &nbsp; </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Oracle, Spring 3.1.2.
  </td>
                                            <td class="description">      We have problem similar writen in a bug https://issues.apache.org/jira/browse/DBCP-290, but for version 1.4.<br/>
<br/>
DBCP return not valid closed connection and this is floating bug.<br/>
Also after we can&#39;t rollback transaction in Spring, becouse connection is closed.<br/>
<br/>
 Closed Connection; nested exception is java.sql.SQLException: Closed Connection<br/>
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)<br/>
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)<br/>
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)<br/>
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:603)<br/>
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:615)<br/>
        at org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:884)<br/>
........some stacktrace of our code        at sun.reflect.GeneratedMethodAccessor113.invoke(Unknown Source)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br/>
        at java.lang.reflect.Method.invoke(Unknown Source)<br/>
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)<br/>
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)<br/>
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)<br/>
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)<br/>
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)<br/>
        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:80)<br/>
........some stacktrace of our code<br/>
        at sun.reflect.GeneratedMethodAccessor81.invoke(Unknown Source)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br/>
        at java.lang.reflect.Method.invoke(Unknown Source)<br/>
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)<br/>
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)<br/>
        at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:65)<br/>
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)<br/>
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)<br/>
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)<br/>
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)<br/>
........some stacktrace of our code<br/>
        at sun.reflect.GeneratedMethodAccessor111.invoke(Unknown Source)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br/>
        at java.lang.reflect.Method.invoke(Unknown Source)<br/>
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)<br/>
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)<br/>
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)<br/>
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)<br/>
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)<br/>
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)<br/>
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)<br/>
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)<br/>
........some stacktrace of our code<br/>
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)<br/>
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)<br/>
        at java.lang.Thread.run(Unknown Source)<br/>
Caused by: java.sql.SQLException: Closed Connection<br/>
        at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)<br/>
        at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133)<br/>
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:199)<br/>
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:263)<br/>
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:271)<br/>
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:445)<br/>
        at oracle.jdbc.driver.PhysicalConnection.prepareStatement(PhysicalConnection.java:3127)<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzq4m7:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      396672
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      396551
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12716054" rel="12716054" data-issuekey="DBCP-420" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-420" href="https://issues.apache.org/jira/browse/DBCP-420">DBCP-420</a>
</td>
                                            <td class="summary"><p>
                InstanceKeyDataSource discards native SQLException when given password does not match password used to create the connection
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Bjorn Vidar Remme
    </td>
                                            <td class="creator">            Bjorn Vidar Remme
    </td>
                                            <td class="created"> 22/May/14 13:08 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 23/May/14 16:10 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      The throw in InstanceKeyDataSource at line 936 does not pass on the native SQL exception from the connection test:<br/>
<br/>
{code}<br/>
} catch (SQLException ex) {<br/>
                // Password has not changed, so refuse client, but return connection to the pool<br/>
                closeDueToException(info);<br/>
                throw new SQLException(&quot;Given password did not match password used&quot;<br/>
                                       + &quot; to create the PooledConnection.&quot;);<br/>
            }<br/>
{code}<br/>
<br/>
It would be great if this throw could include the cause exception:<br/>
{code}<br/>
                throw new SQLException(&quot;Given password did not match password used&quot;<br/>
                                       + &quot; to create the PooledConnection.&quot;, ex);<br/>
{code} <br/>
<br/>
as we have code that detects login related SQLExceptions and takes actions on them. <br/>
<br/>
<br/>
<br/>
 <br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzpqnr:
  </td>
                                            <td class="customfield_12310220">            <span title="23/May/14 16:10"><time class="livestamp allow-future" datetime="2014-05-23T16:10:42+0100">23/May/14 4:10 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      394401
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      394263
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12713589" rel="12713589" data-issuekey="DBCP-419" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-419" href="https://issues.apache.org/jira/browse/DBCP-419">DBCP-419</a>
</td>
                                            <td class="summary"><p>
                Thread got locked while getting connection for MSSQLServer 2008DB
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Blocker
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Santhosh Daida
    </td>
                                            <td class="creator">            Santhosh Daida
    </td>
                                            <td class="created"> 12/May/14 10:54 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 12/May/14 19:45 </td>
                                            <td class="resolutiondate"> 12/May/14 19:45 </td>
                                            <td class="versions">                        1.2.2            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      AIX, JDK1.7
  </td>
                                            <td class="description">      Below exception was seen in getting connection for MSSQLServer 2008<br/>
pool-3-thread-17&quot; prio=10 tid=0x00002aaac0158000 nid=0x4cb7 in Object.wait() [0x0000000043d77000]<br/>
   java.lang.Thread.State: RUNNABLE<br/>
	at java.lang.Class.forName0(Native Method)<br/>
	at java.lang.Class.forName(Unknown Source)<br/>
	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1130)<br/>
	- locked &lt;0x000000078002b498&gt; (a org.apache.commons.dbcp.BasicDataSource)<br/>
	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:880)<br/>
--------------------<br/>
My application needs only one connection for every 60 seconds and I am using default properties of BasicDataSource.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzpcmf:
  </td>
                                            <td class="customfield_12310220">            <span title="12/May/14 19:45"><time class="livestamp allow-future" datetime="2014-05-12T19:45:04+0100">12/May/14 7:45 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      392108
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      391905
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12712383" rel="12712383" data-issuekey="DBCP-418" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-418" href="https://issues.apache.org/jira/browse/DBCP-418">DBCP-418</a>
</td>
                                            <td class="summary"><p>
                Cannot Disable JMX
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            William R. Speirs
    </td>
                                            <td class="creator">            William R. Speirs
    </td>
                                            <td class="created"> 05/May/14 19:52 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 03/Jan/15 19:30 </td>
                                            <td class="resolutiondate"> 12/May/14 20:33 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.0.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Google App Engine
  </td>
                                            <td class="description">      There is no way to disable the use of JMX when using PoolableConnections. Line 48 of PoolableConnection.java uses the ManagementFactory which is blacklisted in Google App Engine.<br/>
<br/>
    private static MBeanServer MBEAN_SERVER = ManagementFactory.getPlatformMBeanServer();<br/>
<br/>
There should be a way to disable all JMX bindings for environments like GAE.<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzp5g7:
  </td>
                                            <td class="customfield_12310220">            <span title="07/May/14 17:02"><time class="livestamp allow-future" datetime="2014-05-07T17:02:12+0100">07/May/14 5:02 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      390944
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      390699
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12708905" rel="12708905" data-issuekey="DBCP-417" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-417" href="https://issues.apache.org/jira/browse/DBCP-417">DBCP-417</a>
</td>
                                            <td class="summary"><p>
                BasicManagedDataSource does not free connection after transaction is commited
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Blocker
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Balazs Zsoldos
    </td>
                                            <td class="creator">            Balazs Zsoldos
    </td>
                                            <td class="created"> 16/Apr/14 21:41 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:00 </td>
                                            <td class="resolutiondate"> 03/May/14 01:13 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.0.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Geronimo TM and JOTM, H2Database JDBC Driver
  </td>
                                            <td class="description">      When a JTA Transaction is commited, the Managed connection is not available again. The pool is becomes exhausted.<br/>
<br/>
To reproduce:<br/>
<br/>
{code:java}<br/>
Jotm jotm = new Jotm(true, false);<br/>
JdbcDataSource h2DataSource = new JdbcDataSource();<br/>
h2DataSource.setUrl(&quot;jdbc:h2:mem:test_mem&quot;);<br/>
BasicManagedDataSource basicManagedDataSource = new BasicManagedDataSource();<br/>
basicManagedDataSource.setTransactionManager(jotm.getTransactionManager());<br/>
basicManagedDataSource.setXaDataSourceInstance(h2DataSource);<br/>
basicManagedDataSource.setMaxTotal(2);<br/>
basicManagedDataSource.setMaxIdle(2);<br/>
<br/>
UserTransaction userTransaction = jotm.getUserTransaction();<br/>
userTransaction.begin();<br/>
Connection connection = basicManagedDataSource.getConnection();<br/>
connection.close();<br/>
userTransaction.commit();<br/>
<br/>
userTransaction.begin();<br/>
connection = basicManagedDataSource.getConnection();<br/>
connection.close();<br/>
userTransaction.commit();<br/>
<br/>
// The managed datasource will block here as there is no available connection<br/>
userTransaction.begin();<br/>
connection = basicManagedDataSource.getConnection();<br/>
connection.close();<br/>
userTransaction.commit();<br/>
{code}<br/>
<br/>
Set the priority to Blocker as BasicManagedDataSource cannot be used at all with the bug.<br/>
<br/>
Tested with Geronimo Transaction Manager and JOTM.<br/>
<br/>
This worked well with version 1.4.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzok7b:
  </td>
                                            <td class="customfield_12310220">            <span title="20/Apr/14 00:22"><time class="livestamp allow-future" datetime="2014-04-20T00:22:46+0100">20/Apr/14 12:22 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      387491
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      387228
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    2
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12708163" rel="12708163" data-issuekey="DBCP-416" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-416" href="https://issues.apache.org/jira/browse/DBCP-416">DBCP-416</a>
</td>
                                            <td class="summary"><p>
                TestConnectionPool.testThreaded() sometimes fails
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Duplicate
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Sebb
    </td>
                                            <td class="creator">            Sebb
    </td>
                                            <td class="created"> 13/Apr/14 23:00 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 13/Apr/14 23:04 </td>
                                            <td class="resolutiondate"> 13/Apr/14 23:04 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-415                        </td>
                                            <td class="environment"></td>
                                            <td class="description">      TestConnectionPool.testThreaded() sometimes fails for me:<br/>
<br/>
{code}<br/>
java.sql.SQLException: org.apache.commons.dbcp2.PoolablePreparedStatement with address: &quot;select &#39;literal&#39;, SYSDATE from dual&quot; is closed.<br/>
	at org.apache.commons.dbcp2.DelegatingStatement.checkOpen(DelegatingStatement.java:120)<br/>
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:77)<br/>
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:82)<br/>
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:82)<br/>
	at org.apache.commons.dbcp2.TestConnectionPool$TestThread.run(TestConnectionPool.java:601)<br/>
	at java.lang.Thread.run(Thread.java:744)<br/>
{code}
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzofmn:
  </td>
                                            <td class="customfield_12310220">            <span title="13/Apr/14 23:04"><time class="livestamp allow-future" datetime="2014-04-13T23:04:56+0100">13/Apr/14 11:04 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      386750
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      386486
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12708122" rel="12708122" data-issuekey="DBCP-415" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-415" href="https://issues.apache.org/jira/browse/DBCP-415">DBCP-415</a>
</td>
                                            <td class="summary"><p>
                Pooled PreparedStatements may be closed when accessed
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Duplicate
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Phil Steitz
    </td>
                                            <td class="creator">            Phil Steitz
    </td>
                                            <td class="created"> 13/Apr/14 07:09 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 15/Apr/14 21:45 </td>
                                            <td class="resolutiondate"> 15/Apr/14 21:45 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">3</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-414,                                                DBCP-416                        </td>
                                            <td class="environment"></td>
                                            <td class="description">      Under high concurrency, connections using pooled PreparedStatements may encounter SQLExceptions with messages of the form &quot;org.apache.commons.dbcp2.PoolablePreparedStatement with address: &#39;quoted SQL&#39; is closed.&quot;<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzofdj:
  </td>
                                            <td class="customfield_12310220">            <span title="14/Apr/14 01:38"><time class="livestamp allow-future" datetime="2014-04-14T01:38:07+0100">14/Apr/14 1:38 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      386709
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      386445
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12707932" rel="12707932" data-issuekey="DBCP-414" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-414" href="https://issues.apache.org/jira/browse/DBCP-414">DBCP-414</a>
</td>
                                            <td class="summary"><p>
                PoolablePreparedStatement can get closed while it&#39;s being used
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Pasi Eronen
    </td>
                                            <td class="creator">            Pasi Eronen
    </td>
                                            <td class="created"> 11/Apr/14 13:54 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 03/Jan/15 19:30 </td>
                                            <td class="resolutiondate"> 23/Apr/14 12:25 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.0.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-415                        </td>
                                            <td class="environment">      DBCP 2.0
  </td>
                                            <td class="description">      I&#39;ve found a case where a PoolablePreparedStatement that&#39;s currently in active use can get closed (resulting in &quot;PoolablePreparedStatement with address: ... is closed&quot; SQLException to the application), from a finalizer of another DelegatingPreparedStatement (that&#39;s obviously not in use, since it&#39;s being garbage collected). <br/>
<br/>
Details:<br/>
<br/>
0. Starting point: application has a Connection (it&#39;s a PoolGuardConnectionWrapper wrapping PoolableConnection wrapping PoolingConnection wrapping com.mysql.jdbc.JDBC4Connection), statement pooling is enabled, and prepareStatement has never been called<br/>
<br/>
1. Application calls conn.prepareStatement. The statement pool is empty, so this ends up in PoolingConnection.makeObject, which then calls MySQL to get a PreparedStatement (stmt1), and wraps it in PoolablePreparedStatement (stmt2). PoolableConnection.prepareStatement wraps it in new DelegatingPreparedStatement (stmt3), and PoolGuardConnectionWrapper wraps it again (stmt4).<br/>
<br/>
2. Application does something with stmt4, and eventually calls stmt4.close(). The call ends up in stmt2.close (in PoolablePreparedStatement) which returns stmt2 to the statement pool. Stmt2.passivate() gets called, setting the _closed flag to true.<br/>
<br/>
3. Application forgets all about stmt4<br/>
<br/>
4. Later, application calls conn.prepareStatement (with same SQL) again. The result is the old MySQL PreparedStatement (stmt1) wrapped in the old PoolablePreparedStatement (stmt2) wrapped in new DelegatingPreparedStatement stmt5 wrapped in new DelegatingPreparedStatement stmt6.  Stmt2.activate() gets called, setting the _closed flag to false.<br/>
<br/>
5. Now, garbage collection gets run, and stmt4 gets gc&#39;d. stmt4.finalize() calls stmt4.close() which calls stmt3.close() which calls stmt2.close(). Since stmt2 is not closed any more (_closed was just set to false above), it gets closed and returned to the pool.<br/>
<br/>
6. Applications calls something in stmt6, which ends up in stmt2, and stmt2.checkOpen() throws exception java.sql.SQLException: org.apache.commons.dbcp2.PoolablePreparedStatement with address: &quot;com.mysql.jdbc.ServerPreparedStatement[12] - select 1&quot; is closed.<br/>
<br/>
PoolGuardConnectionWrapper prevents the application from accidentally calling stmt4.close() later again, but this doesn&#39;t prevent the finalizer.... DBCP 1.4 did not have any finalizers, so it doesn&#39;t have this bug. <br/>
<br/>
I guess DelegatingStatement.close() should check isClosed(), and in the finally block, also do setDelegate(null) (like PoolGuardConnectionWrapper does), to make sure the delegate (which might be in active use by someone else) can never get called via this DelegatingStatement again (although most methods in DelegatingStatement start with checkOpen(), not all of them do!).<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzoe7j:
  </td>
                                            <td class="customfield_12310220">            <span title="15/Apr/14 21:46"><time class="livestamp allow-future" datetime="2014-04-15T21:46:19+0100">15/Apr/14 9:46 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      386520
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      386255
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12707541" rel="12707541" data-issuekey="DBCP-413" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-413" href="https://issues.apache.org/jira/browse/DBCP-413">DBCP-413</a>
</td>
                                            <td class="summary"><p>
                Closing a Connection does not close Statement objects created on that connection, by way of the close() method.
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Mark W
    </td>
                                            <td class="creator">            Mark W
    </td>
                                            <td class="created"> 09/Apr/14 21:06 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 12/May/14 22:16 </td>
                                            <td class="resolutiondate"> 12/May/14 22:16 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">4</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      While using the MS SQL 2012 jdbc drivers with dbcp, I noticed that if you create a connection, then create a preparedStatement from that connection, and close the connection object, PreparedStatement.isClosed() will return false, but you will get a SQLException stating the statement has been closed if you attempt to call any of the set or execute methods.<br/>
<br/>
From the JDBC spec:<br/>
<br/>
Connection.close<br/>
<br/>
An application calls the method Connection.close() to indicate that it has finished using a connection. All Statement objects created from a given Connection object will be closed when the close method for the Connection object is called.<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzobsn:
  </td>
                                            <td class="customfield_12310220">            <span title="09/Apr/14 21:36"><time class="livestamp allow-future" datetime="2014-04-09T21:36:54+0100">09/Apr/14 9:36 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      386128
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      385864
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12706393" rel="12706393" data-issuekey="DBCP-412" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-412" href="https://issues.apache.org/jira/browse/DBCP-412">DBCP-412</a>
</td>
                                            <td class="summary"><p>
                dbcp2.PoolableConnection.close raises NullPointerException
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Davide Caroselli
    </td>
                                            <td class="creator">            Davide Caroselli
    </td>
                                            <td class="created"> 03/Apr/14 11:10 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 14/Feb/15 00:04 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">3</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Mac OSX, Java 7, SQLAzure
  </td>
                                            <td class="description">      I found a critical error while closing a PoolableConnection.<br/>
Here&#39;s the code to reproduce the bug (largely copied from the example shown in the Apache DBCP site):<br/>
<br/>
{code:title=PoolingDataSourceExample2.java|borderStyle=solid}<br/>
public static void main(String[] args) throws Throwable {<br/>
    Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);<br/>
    DataSource dataSource = setupDataSource(jdbcUrl);<br/>
<br/>
    Connection connection = null;<br/>
    PreparedStatement statement = null;<br/>
    ResultSet result = null;<br/>
<br/>
    try {<br/>
        connection = dataSource.getConnection();<br/>
        statement = connection.prepareStatement(&quot;SELECT 1&quot;);<br/>
        result = statement.executeQuery();<br/>
    } finally {<br/>
        result.close();<br/>
        statement.close();<br/>
        connection.close();<br/>
    }<br/>
}<br/>
<br/>
public static DataSource setupDataSource(String connectURI) {<br/>
    ConnectionFactory connectionFactory = new DriverManagerConnectionFactory(connectURI, null);<br/>
    PoolableConnectionFactory poolableConnectionFactory = new PoolableConnectionFactory(connectionFactory, null);<br/>
    ObjectPool&lt;PoolableConnection&gt; connectionPool = new GenericObjectPool&lt;&gt;(poolableConnectionFactory);<br/>
    PoolingDataSource&lt;PoolableConnection&gt; dataSource = new PoolingDataSource&lt;&gt;(connectionPool);<br/>
<br/>
    return dataSource;<br/>
}<br/>
{code}<br/>
<br/>
When the code tries to close the connection (in the final block), an exception is raised:<br/>
{code:title=PoolingDataSourceExample2.java|borderStyle=solid}<br/>
Exception in thread &quot;main&quot; java.lang.NullPointerException<br/>
	at org.apache.commons.dbcp2.PoolableConnection.close(PoolableConnection.java:151)<br/>
	at org.apache.commons.dbcp2.DelegatingConnection.closeInternal(DelegatingConnection.java:235)<br/>
	at org.apache.commons.dbcp2.DelegatingConnection.close(DelegatingConnection.java:218)<br/>
	at org.apache.commons.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper.close(PoolingDataSource.java:212)<br/>
	at dbcp.PoolingDataSourceExample2.closeQuietly(PoolingDataSourceExample2.java:64)<br/>
	at dbcp.PoolingDataSourceExample2.main(PoolingDataSourceExample2.java:43){code}<br/>
<br/>
As I can see, the problem is the &quot;_pool&quot; variable inside PoolableConnection but I could not find any solution.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    NullPointerException, PoolableConnection</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzo4qn:
  </td>
                                            <td class="customfield_12310220">            <span title="03/Apr/14 19:01"><time class="livestamp allow-future" datetime="2014-04-03T19:01:03+0100">03/Apr/14 7:01 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      384983
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      384716
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12697251" rel="12697251" data-issuekey="DBCP-411" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-411" href="https://issues.apache.org/jira/browse/DBCP-411">DBCP-411</a>
</td>
                                            <td class="summary"><p>
                BasicManagedDataSource - unregister from JMX on close()
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Sebb
    </td>
                                            <td class="creator">            Sebb
    </td>
                                            <td class="created"> 25/Feb/14 23:25 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 03/Jan/15 19:31 </td>
                                            <td class="resolutiondate"> 26/Feb/14 16:04 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      There is a JMX registration issue in TestBasicManagedDataSource.<br/>
<br/>
If the test is run with logging:<br/>
<br/>
mvn test -Dtest=TestBasicManagedDataSource -Dorg.apache.commons.logging.Log=org.apache.commons.logging.impl.SimpleLog<br/>
<br/>
then lots of stack traces are shown as below.<br/>
<br/>
This appears to be because each name can only be registered once.<br/>
<br/>
Perhaps the test is flawed, and it should deregister the name in tearDown() ?<br/>
However there does not seem to be a way to deregister the name.<br/>
<br/>
{noformat}<br/>
[WARN] BasicDataSource - Failed to complete JMX registration &lt;javax.management.InstanceAlreadyExistsException: org.apache.commons.dbcp2:name=test&gt;javax.management.InstanceAlreadyExistsException: org.apache.commons.dbcp2:name=test<br/>
        at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)<br/>
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)<br/>
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)<br/>
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)<br/>
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)<br/>
        at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)<br/>
        at org.apache.commons.dbcp2.BasicDataSource.jmxRegister(BasicDataSource.java:2224)<br/>
        at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:1909)<br/>
        at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:1433)<br/>
        at org.apache.commons.dbcp2.TestBasicDataSource.getConnection(TestBasicDataSource.java:48)<br/>
        at org.apache.commons.dbcp2.TestConnectionPool.testHashing(TestConnectionPool.java:530)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br/>
        at java.lang.reflect.Method.invoke(Method.java:606)<br/>
        at junit.framework.TestCase.runTest(TestCase.java:176)<br/>
        at junit.framework.TestCase.runBare(TestCase.java:141)<br/>
        at junit.framework.TestResult$1.protect(TestResult.java:122)<br/>
        at junit.framework.TestResult.runProtected(TestResult.java:142)<br/>
        at junit.framework.TestResult.run(TestResult.java:125)<br/>
        at junit.framework.TestCase.run(TestCase.java:129)<br/>
        at junit.framework.TestSuite.runTest(TestSuite.java:255)<br/>
        at junit.framework.TestSuite.run(TestSuite.java:250)<br/>
        at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:84)<br/>
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)<br/>
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)<br/>
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)<br/>
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)<br/>
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)<br/>
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)<br/>
{noformat}<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzmlk7:
  </td>
                                            <td class="customfield_12310220">            <span title="26/Feb/14 10:33"><time class="livestamp allow-future" datetime="2014-02-26T10:33:01+0000">26/Feb/14 10:33 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      376021
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      375725
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12694152" rel="12694152" data-issuekey="DBCP-410" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-410" href="https://issues.apache.org/jira/browse/DBCP-410">DBCP-410</a>
</td>
                                            <td class="summary"><p>
                build.xml: wrong path for javadoc.overview
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Trivial
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Andreas Sturmlechner
    </td>
                                            <td class="creator">            Andreas Sturmlechner
    </td>
                                            <td class="created"> 09/Feb/14 13:00 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 10/Feb/14 09:28 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Path needs to be updated for dbcp2 to solve javadoc error.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    patch</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzm2pz:
  </td>
                                            <td class="customfield_12310220">            <span title="10/Feb/14 09:28"><time class="livestamp allow-future" datetime="2014-02-10T09:28:19+0000">10/Feb/14 9:28 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      372965
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      372661
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12686270" rel="12686270" data-issuekey="DBCP-409" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-409" href="https://issues.apache.org/jira/browse/DBCP-409">DBCP-409</a>
</td>
                                            <td class="summary"><p>
                How to create DBCP Connection Pooling for memcache server?
    </p>
</td>
                                            <td class="issuetype"> New Feature</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            sekhar m
    </td>
                                            <td class="creator">            sekhar m
    </td>
                                            <td class="created"> 24/Dec/13 10:04 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 03/Jan/15 19:31 </td>
                                            <td class="resolutiondate"> 24/Dec/13 10:33 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      HI,<br/>
How to create DBCP Connection pooling for Spymemcached server.<br/>
<br/>
Ps: Spymemcached server is not a database.<br/>
<br/>
please reply..<br/>
Thanks in advance, Sekhar<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzksuv:
  </td>
                                            <td class="customfield_12310220">            <span title="24/Dec/13 10:33"><time class="livestamp allow-future" datetime="2013-12-24T10:33:44+0000">24/Dec/13 10:33 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      365553
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      365248
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12682885" rel="12682885" data-issuekey="DBCP-408" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-408" href="https://issues.apache.org/jira/browse/DBCP-408">DBCP-408</a>
</td>
                                            <td class="summary"><p>
                dbcp samples need revising
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            john eipe
    </td>
                                            <td class="creator">            john eipe
    </td>
                                            <td class="created"> 05/Dec/13 12:12 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 03/Jan/15 19:32 </td>
                                            <td class="resolutiondate"> 05/Dec/13 12:22 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        1.4            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate">86400</td>
                                            <td class="timeestimate">86400</td>
                                            <td class="timespent"></td>
                                            <td class="workratio">            0%
    </td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      OS: Windows 7, Web server/container: apache tomcat 7
  </td>
                                            <td class="description">      This is regarding the examples given under commons-dbcp project. <br/>
Recently, I tried PoolingDriverExample.java but it came up with few issues.<br/>
<br/>
Please let me know if it&#39;s because I used the latest set of jars.<br/>
<br/>
commons-collections4-4.0<br/>
commons-dbcp-1.4<br/>
commons-pool2-2.0<br/>
<br/>
The package import statements do need to change but there seems to be more changes needed in the code.<br/>
<br/>
I didn&#39;t try the other 2 samples. It would be great if those are revised too.<br/>
<br/>
<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     0%
</td>
                                            <td class="aggregateprogress">     0%
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate">86400</td>
                                            <td class="aggregatetimeoriginalestimate">86400</td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzk9pz:
  </td>
                                            <td class="customfield_12310220">            <span title="05/Dec/13 12:22"><time class="livestamp allow-future" datetime="2013-12-05T12:22:50+0000">05/Dec/13 12:22 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      362437
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      362142
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12682395" rel="12682395" data-issuekey="DBCP-407" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-407" href="https://issues.apache.org/jira/browse/DBCP-407">DBCP-407</a>
</td>
                                            <td class="summary"><p>
                PoolablePreparedStatement invalidated because of non cleared batch
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Duplicate
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Steeve Beroard
    </td>
                                            <td class="creator">            Steeve Beroard
    </td>
                                            <td class="created"> 03/Dec/13 14:29 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 03/Feb/14 23:37 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-372                        </td>
                                            <td class="environment"></td>
                                            <td class="description">      In PoolablePreparedStatement, passivate() method:<br/>
The first thing in this method is to consider the statement as closed. But then, if a batch has been added, the clearBatch() method is called.<br/>
That call is delegated to DelegatingStatement that send an SQLException because Statement is already considered as closed.<br/>
Then the statement is removed from the pool cache because of this so the cache is useless.<br/>
Maybe it should be better to get the innermost delegate in passivate() and then call clearBatch() on the underlying statement?
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzk6qf:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      361950
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      361652
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12682383" rel="12682383" data-issuekey="DBCP-406" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-406" href="https://issues.apache.org/jira/browse/DBCP-406">DBCP-406</a>
</td>
                                            <td class="summary"><p>
                Support for caching statements with autogenerated keys
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Steeve Beroard
    </td>
                                            <td class="creator">            Steeve Beroard
    </td>
                                            <td class="created"> 03/Dec/13 13:29 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 05/Feb/14 09:31 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      I would like to submit a patch to enable caching for statement with autogenerated keys. My original version was on version 1.3 but i did the change for the current version in the trunk
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzk6nr:
  </td>
                                            <td class="customfield_12310220">            <span title="05/Feb/14 09:31"><time class="livestamp allow-future" datetime="2014-02-05T09:31:34+0000">05/Feb/14 9:31 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      361938
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      361640
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12677563" rel="12677563" data-issuekey="DBCP-405" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-405" href="https://issues.apache.org/jira/browse/DBCP-405">DBCP-405</a>
</td>
                                            <td class="summary"><p>
                getAutoCommit in PoolableConnectionFactory
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Trivial
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Steeve Beroard
    </td>
                                            <td class="creator">            Steeve Beroard
    </td>
                                            <td class="created"> 05/Nov/13 12:53 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 02/Dec/13 22:44 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1,                     1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      In passivateObject() method of PoolableConnectionFactory, getAutoCommit() is called twice. I am working with Sybase JDBC driver, in their implementation, getAutoCommit() makes a call to database so there are two roundtrips to database. I would like to understand if there is anything that prevent you to call getAutoCommit() once and store the result in a local variable to use it again?
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzjdm7:
  </td>
                                            <td class="customfield_12310220">            <span title="02/Dec/13 22:44"><time class="livestamp allow-future" datetime="2013-12-02T22:44:36+0000">02/Dec/13 10:44 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      357228
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      356938
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12676950" rel="12676950" data-issuekey="DBCP-404" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-404" href="https://issues.apache.org/jira/browse/DBCP-404">DBCP-404</a>
</td>
                                            <td class="summary"><p>
                Mutable fields should be private
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Sebb
    </td>
                                            <td class="creator">            Sebb
    </td>
                                            <td class="created"> 31/Oct/13 20:11 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:07 </td>
                                            <td class="resolutiondate"> 02/Feb/14 20:38 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Non-private mutable fields make thread-safety harder.<br/>
<br/>
Make all mutable fields private (or at worst package-protected), and use getters/setters for access if necessary.<br/>
<br/>
This allows synchronisation to be easily added later if necessary, as well as potentially allowing validation of values.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzj9tz:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      356614
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      356326
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12676925" rel="12676925" data-issuekey="DBCP-403" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-403" href="https://issues.apache.org/jira/browse/DBCP-403">DBCP-403</a>
</td>
                                            <td class="summary"><p>
                DelegatingStatement.close() fails with NPE if statement is null
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Sebb
    </td>
                                            <td class="creator">            Sebb
    </td>
                                            <td class="created"> 31/Oct/13 18:28 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 03/Jan/15 19:32 </td>
                                            <td class="resolutiondate"> 31/Oct/13 18:35 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      DelegatingStatement.close() fails with NPE if the _stmt field is null.<br/>
<br/>
The code should check whether the field is null before trying to close the statement.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzj9of:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      356589
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      356301
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12674312" rel="12674312" data-issuekey="DBCP-402" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-402" href="https://issues.apache.org/jira/browse/DBCP-402">DBCP-402</a>
</td>
                                            <td class="summary"><p>
                Add a way to set an instance of java.sql.Driver directly on org.apache.commons.dbcp2.BasicDataSource
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Ben Hale
    </td>
                                            <td class="creator">            Ben Hale
    </td>
                                            <td class="created"> 17/Oct/13 14:34 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:07 </td>
                                            <td class="resolutiondate"> 30/Oct/13 14:47 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Currently when org.apache.commons.dbcp2.BasicDataSource is directly instantiated (e.g. in an IoC environment), the only way to set the type of java.sql.Driver that is should use is by passing in a String classname which is then passed to DriverManager.  The downside to this is that it requires the DataSource and the Driver to be in the same classloader.  In practice many times the Driver is in the application classloader while the DataSource is in the container classloader meaning that other than packaging a Tomcat JAR in your application you cannot use the DataSource directly.<br/>
<br/>
It&#39;d be great to have a way to pass the actual instance of Driver to the DataSource and have it use that instead of going to DriverManager to find it.  This would enable standard classloader inheritance to work properly and allow the non-adjacent packaging of the Driver and DataSource.<br/>
<br/>
An example of this style of configuration can be found in Spring&#39;s SimpleDriverDataSource[1].<br/>
<br/>
[1]: http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/jdbc/datasource/SimpleDriverDataSource.html#setDriver(java.sql.Driver)
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hziv4v:
  </td>
                                            <td class="customfield_12310220">            <span title="30/Oct/13 14:19"><time class="livestamp allow-future" datetime="2013-10-30T14:19:03+0000">30/Oct/13 2:19 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      354226
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      353934
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12674054" rel="12674054" data-issuekey="DBCP-401" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-401" href="https://issues.apache.org/jira/browse/DBCP-401">DBCP-401</a>
</td>
                                            <td class="summary"><p>
                PoolableConnectionFactory.validateConnection() doesn&#39;t test connection.isValid()
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Duplicate
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Paulo Costa
    </td>
                                            <td class="creator">            Paulo Costa
    </td>
                                            <td class="created"> 16/Oct/13 04:33 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 05/Feb/14 22:40 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate">86400</td>
                                            <td class="timeestimate">86400</td>
                                            <td class="timespent"></td>
                                            <td class="workratio">            0%
    </td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-357                        </td>
                                            <td class="environment"></td>
                                            <td class="description">      On my environment, we sometimes get notified that something was changed on the DB servers (servers added/removed from the pool, master/slave promotion, etc).<br/>
<br/>
In these cases, we want to discard all existing connections in the pool and let it create new ones with the updated configuration.<br/>
<br/>
My initial idea is to have existing Connections returning isValid() == false after these events.<br/>
But, after lots of debugging, it turns out that having the connection.isValid() returning false doesn&#39;t make it go away from the connection pool, since it is never checked.<br/>
<br/>
Fixing it would be very simple, and I can send you the patch, but I don&#39;t know if there is any reason it was left out in the first place, or if it would cause compatibility issues (Probably not).
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     0%
</td>
                                            <td class="aggregateprogress">     0%
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate">86400</td>
                                            <td class="aggregatetimeoriginalestimate">86400</td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzitkv:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      353969
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      353677
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12660059" rel="12660059" data-issuekey="DBCP-400" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-400" href="https://issues.apache.org/jira/browse/DBCP-400">DBCP-400</a>
</td>
                                            <td class="summary"><p>
                The documentation of maxOpenPreparedStatements parameter seems to be wrong
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Gábor Lipták
    </td>
                                            <td class="creator">            Gábor Lipták
    </td>
                                            <td class="created"> 26/Jul/13 14:50 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:06 </td>
                                            <td class="resolutiondate"> 11/Jan/14 20:05 </td>
                                            <td class="versions">                        1.4,                     1.4.1            </td>
                                            <td class="fixVersions">                        1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      We had earlier a datasource, which had no maxOpenPreparedStatements property defined. Something like this:<br/>
<br/>
{code:xml}<br/>
&lt;bean id=&quot;basicDataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; init-method=&quot;createDataSource&quot; destroy-method=&quot;close&quot;&gt;<br/>
		&lt;property name=&quot;poolPreparedStatements&quot; value=&quot;true&quot; /&gt;<br/>
		&lt;property name=&quot;url&quot; value=&quot;${datasource.url}&quot; /&gt;<br/>
		&lt;property name=&quot;driverClassName&quot; value=&quot;${datasource.driverClassName}&quot; /&gt;<br/>
		&lt;property name=&quot;username&quot; value=&quot;${datasource.username}&quot; /&gt;<br/>
		&lt;property name=&quot;password&quot; value=&quot;${datasource.password}&quot; /&gt;<br/>
<br/>
		&lt;property name=&quot;initialSize&quot; value=&quot;${datasource.initialSize}&quot; /&gt;<br/>
		&lt;property name=&quot;maxActive&quot; value=&quot;${datasource.maxActive}&quot; /&gt;<br/>
		&lt;property name=&quot;maxIdle&quot; value=&quot;${datasource.maxIdle}&quot; /&gt;<br/>
		&lt;property name=&quot;minIdle&quot; value=&quot;${datasource.minIdle}&quot; /&gt;<br/>
<br/>
		&lt;property name=&quot;timeBetweenEvictionRunsMillis&quot; value=&quot;${datasource.timeBetweenEvictionRunsMillis}&quot; /&gt;<br/>
		&lt;property name=&quot;minEvictableIdleTimeMillis&quot; value=&quot;${datasource.minEvictableIdleTimeMillis}&quot; /&gt;<br/>
		&lt;property name=&quot;maxWait&quot; value=&quot;${datasource.maxWait}&quot; /&gt;<br/>
	&lt;/bean&gt;<br/>
{code}<br/>
<br/>
Then we wanted to have a parameter to limit the prepared statement pool, so we added a new line for the maxOpenPreparedStatements (for compatibility reasons we added the line with a config file having &#39;0&#39; value which should mean unlimited according to the documentation at http://commons.apache.org/proper/commons-dbcp/configuration.html):<br/>
<br/>
{code:xml}<br/>
&lt;bean id=&quot;basicDataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; init-method=&quot;createDataSource&quot; destroy-method=&quot;close&quot;&gt;<br/>
		&lt;property name=&quot;poolPreparedStatements&quot; value=&quot;true&quot; /&gt;<br/>
		&lt;property name=&quot;maxOpenPreparedStatements&quot; value=&quot;${datasource.maxOpenPreparedStatements}&quot; /&gt;		<br/>
		&lt;property name=&quot;url&quot; value=&quot;${datasource.url}&quot; /&gt;<br/>
		&lt;property name=&quot;driverClassName&quot; value=&quot;${datasource.driverClassName}&quot; /&gt;<br/>
		&lt;property name=&quot;username&quot; value=&quot;${datasource.username}&quot; /&gt;<br/>
		&lt;property name=&quot;password&quot; value=&quot;${datasource.password}&quot; /&gt;<br/>
<br/>
		&lt;property name=&quot;initialSize&quot; value=&quot;${datasource.initialSize}&quot; /&gt;<br/>
		&lt;property name=&quot;maxActive&quot; value=&quot;${datasource.maxActive}&quot; /&gt;<br/>
		&lt;property name=&quot;maxIdle&quot; value=&quot;${datasource.maxIdle}&quot; /&gt;<br/>
		&lt;property name=&quot;minIdle&quot; value=&quot;${datasource.minIdle}&quot; /&gt;<br/>
<br/>
		&lt;property name=&quot;timeBetweenEvictionRunsMillis&quot; value=&quot;${datasource.timeBetweenEvictionRunsMillis}&quot; /&gt;<br/>
		&lt;property name=&quot;minEvictableIdleTimeMillis&quot; value=&quot;${datasource.minEvictableIdleTimeMillis}&quot; /&gt;<br/>
		&lt;property name=&quot;maxWait&quot; value=&quot;${datasource.maxWait}&quot; /&gt;<br/>
	&lt;/bean&gt;<br/>
{code}<br/>
<br/>
We ended up in having the following exception:<br/>
{noformat}<br/>
Caused by: java.sql.SQLException: MaxOpenPreparedStatements limit reached<br/>
	at org.apache.commons.dbcp.PoolingConnection.prepareStatement(PoolingConnection.java:109)<br/>
	at org.apache.commons.dbcp.DelegatingConnection.prepareStatement(DelegatingConnection.java:281)<br/>
	at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.prepareStatement(PoolingDataSource.java:313)<br/>
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
...<br/>
...<br/>
[:1.7.0_07]<br/>
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)[:1.7.0_07]<br/>
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.7.0_07]<br/>
	at java.lang.reflect.Method.invoke(Method.java:601)[:1.7.0_07]<br/>
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)<br/>
	at org.springframework.osgi.service.importer.support.internal.aop.ServiceInvoker.doInvoke(ServiceInvoker.java:58)<br/>
	at org.springframework.osgi.service.importer.support.internal.aop.ServiceInvoker.invoke(ServiceInvoker.java:62)<br/>
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)<br/>
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)<br/>
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)<br/>
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)<br/>
	at org.springframework.osgi.service.util.internal.aop.ServiceTCCLInterceptor$1.run(ServiceTCCLInterceptor.java:47)<br/>
	at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:124)[80:org.springframework.osgi.core:1.2.1]<br/>
	at org.springframework.osgi.service.util.internal.aop.ServiceTCCLInterceptor.invokePrivileged(ServiceTCCLInterceptor.java:44)<br/>
	at org.springframework.osgi.service.util.internal.aop.ServiceTCCLInterceptor.invoke(ServiceTCCLInterceptor.java:36)<br/>
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)<br/>
	at org.springframework.osgi.service.importer.support.LocalBundleContextAdvice.invoke(LocalBundleContextAdvice.java:59)<br/>
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)<br/>
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)<br/>
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)<br/>
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)<br/>
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)<br/>
	at $Proxy69.getSpecializedSequenceProvider(Unknown Source)<br/>
	at ...)<br/>
	... 36 more<br/>
Caused by: java.util.NoSuchElementException: Pool exhausted<br/>
	at org.apache.commons.pool.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:1143)<br/>
	at org.apache.commons.dbcp.PoolingConnection.prepareStatement(PoolingConnection.java:107)<br/>
	... 67 more<br/>
{noformat}<br/>
<br/>
So it turned out, that the documentation is wrong. Only negative numbers like -1 mean unlimited. 0 seems to mean limited to one item. Please correct the documentation to avoid problems of others.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    limit, pool</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzgj0n:
  </td>
                                            <td class="customfield_12310220">            <span title="26/Jul/13 20:17"><time class="livestamp allow-future" datetime="2013-07-26T20:17:15+0100">26/Jul/13 8:17 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      340569
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      340251
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12657991" rel="12657991" data-issuekey="DBCP-399" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-399" href="https://issues.apache.org/jira/browse/DBCP-399">DBCP-399</a>
</td>
                                            <td class="summary"><p>
                Rollback on PoolableConnectionFactory.passivateObject() has to be configuration controlled.
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Girish Adat
    </td>
                                            <td class="creator">            Girish Adat
    </td>
                                            <td class="created"> 16/Jul/13 13:52 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:07 </td>
                                            <td class="resolutiondate"> 14/Feb/14 11:47 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Any databases, especially on those, where the rollback calls are costly.
  </td>
                                            <td class="description">      In certain databases like IBM DB2, the rollback calls are costly. Also, on any database, this avoids an unnecessary call to DB upon returning a connection back to pool, and thus enhances the application performance.<br/>
<br/>
So it would be good, if there is an optional configuration parameter that controls the &quot;rollbackAsCleanUpAction&quot; behaviour. This can be made &quot;false&quot; (can be true by default, aiming current users) if the application can guarantee itself that, no connection is returned to the pool without an explicit call to commit() or rollback(), even in the case of a non-readonly and non-autocommit connection.<br/>
<br/>
A few more bits: This caused a 1/11, i.e. approx 10% performance loss in our application. Hence making this a bug (a performance issue), and not a Feature Request / Improvement!
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    easyfix, performance</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzg6an:
  </td>
                                            <td class="customfield_12310220">            <span title="19/Dec/13 16:02"><time class="livestamp allow-future" datetime="2013-12-19T16:02:50+0000">19/Dec/13 4:02 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      338506
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      338185
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12648699" rel="12648699" data-issuekey="DBCP-398" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-398" href="https://issues.apache.org/jira/browse/DBCP-398">DBCP-398</a>
</td>
                                            <td class="summary"><p>
                DBCP hangs on common pool borrowObject when PoolableConnection is used and the underlying connection closed unexpectedly (connection resets/timouts)
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Sarvesh Sakalanaga
    </td>
                                            <td class="creator">            Sarvesh Sakalanaga
    </td>
                                            <td class="created"> 21/May/13 20:59 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 03/Feb/14 21:27 </td>
                                            <td class="versions">                        1.2,                     1.3,                     1.4,                     2.0            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">6</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      The bug is in org.apache.commons.dbcp.PoolableConnection as isClosed method on this calls super.isClosed which returns true (as DelegatingConnection::isClosed { _closed || _conn.isClosed() }). Since PoolableConnection needs to release objects to pool even if the underlying connection is closed the isClosed method should be overridden in this class and should return _closed. This _closed is the delegating connection close which will be set to false even if the underlying connection is closed (_conn.isClosed). The fix should also not throw on PoolableConnection::Close method if underlying connection is closed as this state is a valid state and is expected.<br/>
<br/>
Also currently the way it stands the clients of PoolableConnection will/may not call Close() as isClosed always returns true in this case.<br/>
<br/>
Below is the stack that the thread hangs on:<br/>
<br/>
◾waiting on &lt;0x00000007b5a50e48&gt; (a org.apache.commons.pool.impl.GenericObjectPool$Latch)<br/>
 at java.lang.Object.wait(Object.java:503)<br/>
 at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1104)<br/>
◾locked &lt;0x00000007b5a50e48&gt; (a org.apache.commons.pool.impl.GenericObjectPool$Latch)<br/>
 at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)<br/>
 at org.datanucleus.store.rdbms.ConnectionProviderPriorityList.getConnection(ConnectionProviderPriorityList.java:57)<br/>
 at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:354)<br/>
 at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getXAResource(ConnectionFactoryImpl.java:314)<br/>
 at org.datanucleus.store.connection.ConnectionManagerImpl.enlistResource(ConnectionManagerImpl.java:386)<br/>
 at org.datanucleus.store.connection.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:252)<br/>
 at org.datanucleus.store.connection.AbstractConnectionFactory.getConnection(AbstractConnectionFactory.java:60)<br/>
 at org.datanucleus.store.AbstractStoreManager.getConnection(AbstractStoreManager.java:449)<br/>
 at org.datanucleus.store.AbstractStoreManager.getConnection(AbstractStoreManager.java:418)<br/>
 at org.datanucleus.store.rdbms.query.JDOQLQuery.performExecute(JDOQLQuery.java:595)<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzem5z:
  </td>
                                            <td class="customfield_12310220">            <span title="22/May/13 15:27"><time class="livestamp allow-future" datetime="2013-05-22T15:27:24+0100">22/May/13 3:27 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      329396
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      329054
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12638779" rel="12638779" data-issuekey="DBCP-397" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-397" href="https://issues.apache.org/jira/browse/DBCP-397">DBCP-397</a>
</td>
                                            <td class="summary"><p>
                Exception ORA-01000 [Number of open cursors exceeds the limit] is faced when prepared statement pooling is enabled in DBCP 1.3
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Duplicate
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Peeyush Joshi
    </td>
                                            <td class="creator">            Peeyush Joshi
    </td>
                                            <td class="created"> 25/Mar/13 05:25 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 03/Feb/14 23:39 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-372                        </td>
                                            <td class="environment">      jdk 1.6_u25<br/>
dbcp 1.3/1.4<br/>
SunOS<br/>
Spring 2.0.6<br/>
Oracle 10.0.2<br/>

  </td>
                                            <td class="description">      Previously our application was using following setting with DBCP 1.2.1<br/>
<br/>
&lt;property name=&quot;poolPreparedStatements&quot;&gt;<br/>
&lt;value&gt;true&lt;/value&gt;<br/>
&lt;property name=&quot;maxOpenPreparedStatements&quot;&gt;<br/>
&lt;value&gt;40&lt;/value&gt; <br/>
<br/>
And in the oracle DB around 30 open cursors were found during high load. <br/>
<br/>
But when we upgrade DBCP version to 1.3 even during normal load conditions the number of open cursors keeps on increasing and reaches up to the maximum allowed limit (i.e. 1000 cursors per connection). It results an exception &quot;nested exception is java.sql.SQLException: ORA-01000: maximum open cursors exceeded&quot;. After this exception no DB query is processed.  <br/>
<br/>
Same problematic behavior is noticed with DBCP 1.4.<br/>
<br/>
When poolPreparedStatements is set to false the number of maximum open cursors never goes beyond 6 (in all DBCP versions 1.2.1/1.3/1.4)<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzcxpj:
  </td>
                                            <td class="customfield_12310220">            <span title="25/Mar/13 21:22"><time class="livestamp allow-future" datetime="2013-03-25T21:22:17+0000">25/Mar/13 9:22 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      319595
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      319254
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12636320" rel="12636320" data-issuekey="DBCP-396" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-396" href="https://issues.apache.org/jira/browse/DBCP-396">DBCP-396</a>
</td>
                                            <td class="summary"><p>
                AbandonedConfig.setLogWriter() never used
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Seweryn Hejnowicz
    </td>
                                            <td class="creator">            Seweryn Hejnowicz
    </td>
                                            <td class="created"> 11/Mar/13 09:08 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 03/Dec/13 10:37 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1,                     1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      In my scenario I need to set custom PrintWriter to the AbandonedConfig, but I can&#39;t see possibility to do that. All AbandonedConfig properties can be set through a BasicDataSource except logWriter.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hzcinb:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      317154
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      316812
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12628671" rel="12628671" data-issuekey="DBCP-395" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-395" href="https://issues.apache.org/jira/browse/DBCP-395">DBCP-395</a>
</td>
                                            <td class="summary"><p>
                Please help.. Oracle connection problems.. Is it over connected or stucked?
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Jungryong Lee
    </td>
                                            <td class="creator">            Jungryong Lee
    </td>
                                            <td class="created"> 22/Jan/13 07:49 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 22/Jan/13 09:05 </td>
                                            <td class="versions">                        1.2.1            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      OS : Ubuntu 11.10<br/>
JDK : 1.6<br/>
Database : Oracle 10g<br/>
JDBC Driver : oracle jdbc driver type 4<br/>
DB Commits per secs : 600
  </td>
                                            <td class="description">      We had ran email sendding system over 10 years. Recently we had oracle connection problem. We have 8 servers and all servers had same problem.<br/>
My system&#39;s thread dump is following. I appreciate any helps. Thanks.<br/>
<br/>
...<br/>
&quot;Thread-6293&quot; daemon prio=10 tid=0x00007f65cc35e800 nid=0x637c waiting for monitor entry [0x00007f65c6e3b000]<br/>
   java.lang.Thread.State: BLOCKED (on object monitor)<br/>
        at ep.server.epmailer.util.EPPoolingDataSource.getConnection(EPPoolingDataSource.java:72)<br/>
        - waiting to lock &lt;0x00000000fb430c20&gt; (a java.lang.Class for ep.server.epmailer.util.EPPoolingDataSource)<br/>
        at ep.server.epmailer.EPMailSenderThread.checkOtherMailerStatus(EPMailSenderThread.java:2799)<br/>
        at ep.server.epmailer.EPMailSenderThread.run(EPMailSenderThread.java:438)<br/>
        at java.lang.Thread.run(Thread.java:662)<br/>
<br/>
&quot;Thread-6292&quot; daemon prio=10 tid=0x00007f65cc35d800 nid=0x637b waiting for monitor entry [0x00007f65beab4000]<br/>
   java.lang.Thread.State: BLOCKED (on object monitor)<br/>
        at ep.server.epmailer.util.EPPoolingDataSource.getConnection(EPPoolingDataSource.java:72)<br/>
        - waiting to lock &lt;0x00000000fb430c20&gt; (a java.lang.Class for ep.server.epmailer.util.EPPoolingDataSource)<br/>
        at ep.server.epmailer.EPMailSenderThread.updateSuccessMail(EPMailSenderThread.java:2597)<br/>
        at ep.server.epmailer.EPMailSenderThread.run(EPMailSenderThread.java:330)<br/>
        at java.lang.Thread.run(Thread.java:662)<br/>
&quot;Thread-6291&quot; daemon prio=10 tid=0x00007f65cc80c000 nid=0x6377 runnable [0x00007f65beaf4000]<br/>
   java.lang.Thread.State: RUNNABLE<br/>
        at java.net.SocketInputStream.socketRead0(Native Method)<br/>
        at java.net.SocketInputStream.read(SocketInputStream.java:129)<br/>
        at oracle.net.ns.Packet.receive(Unknown Source)<br/>
        at oracle.net.ns.NSProtocol.connect(Unknown Source)<br/>
        at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:844)<br/>
        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:268)<br/>
        at oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:414)<br/>
        at oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:165)<br/>
        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)<br/>
        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)<br/>
        at java.sql.DriverManager.getConnection(DriverManager.java:582)<br/>
        at java.sql.DriverManager.getConnection(DriverManager.java:185)<br/>
        at org.apache.commons.dbcp.DriverManagerConnectionFactory.createConnection(DriverManagerConnectionFactory.java:48)<br/>
        at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:290)<br/>
        - locked &lt;0x00000000c231e9a8&gt; (a org.apache.commons.dbcp.PoolableConnectionFactory)<br/>
        at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:771)<br/>
        at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:95)<br/>
        at ep.server.epmailer.util.EPPoolingDataSource.getConnection(EPPoolingDataSource.java:75)<br/>
        - locked &lt;0x00000000fb430c20&gt; (a java.lang.Class for ep.server.epmailer.util.EPPoolingDataSource)<br/>
        at ep.server.epmailer.EPMailSenderThread.checkOtherMailerStatus(EPMailSenderThread.java:2799)<br/>
        at ep.server.epmailer.EPMailSenderThread.run(EPMailSenderThread.java:438)<br/>
        at java.lang.Thread.run(Thread.java:662)<br/>
<br/>
&quot;Thread-6290&quot; daemon prio=10 tid=0x00007f65cc1b8800 nid=0x6376 waiting for monitor entry [0x00007f65c68e6000]<br/>
   java.lang.Thread.State: BLOCKED (on object monitor)<br/>
        at ep.server.epmailer.util.EPPoolingDataSource.getConnection(EPPoolingDataSource.java:72)<br/>
        - waiting to lock &lt;0x00000000fb430c20&gt; (a java.lang.Class for ep.server.epmailer.util.EPPoolingDataSource)<br/>
        at ep.server.epmailer.EPMailSenderThread.checkOtherMailerStatus(EPMailSenderThread.java:2799)<br/>
        at ep.server.epmailer.EPMailSenderThread.run(EPMailSenderThread.java:438)<br/>
        at java.lang.Thread.run(Thread.java:662)<br/>
<br/>
&quot;Thread-6289&quot; daemon prio=10 tid=0x00007f65cc318800 nid=0x6375 waiting for monitor entry [0x00007f65bebb8000]<br/>
   java.lang.Thread.State: BLOCKED (on object monitor)<br/>
        at ep.server.epmailer.util.EPPoolingDataSource.getConnection(EPPoolingDataSource.java:72)<br/>
        - waiting to lock &lt;0x00000000fb430c20&gt; (a java.lang.Class for ep.server.epmailer.util.EPPoolingDataSource)<br/>
        at ep.server.epmailer.EPMailSenderThread.updateRecvTable(EPMailSenderThread.java:2943)<br/>
        at ep.server.epmailer.EPMailSenderThread.run(EPMailSenderThread.java:463)<br/>
        at java.lang.Thread.run(Thread.java:662)<br/>
<br/>
...
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hz4cg7:
  </td>
                                            <td class="customfield_12310220">            <span title="22/Jan/13 09:05"><time class="livestamp allow-future" datetime="2013-01-22T09:05:00+0000">22/Jan/13 9:05 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      269357
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      307196
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12618514" rel="12618514" data-issuekey="DBCP-394" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-394" href="https://issues.apache.org/jira/browse/DBCP-394">DBCP-394</a>
</td>
                                            <td class="summary"><p>
                BasicDataSource doesn&#39;t work correct when using two objects with different connection URLs
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Mladen Adamovic
    </td>
                                            <td class="creator">            Mladen Adamovic
    </td>
                                            <td class="created"> 02/Dec/12 22:11 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 02/Dec/12 23:47 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate">302400</td>
                                            <td class="timeestimate">302400</td>
                                            <td class="timespent"></td>
                                            <td class="workratio">            0%
    </td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      N/A, but using Mysql and Linux
  </td>
                                            <td class="description">      It looks like that if I create one BasicDataSource for one DB and second BasicDataSource for another DB that they connections got messed up so the app brakes. <br/>
<br/>
I moved not to use BasicDataSource but plain connections and the problem looks like being resolved.<br/>
<br/>
I put this as a major issue since I don&#39;t find it documented and of course two objects shall be supported unless it&#39;s singleton. Also this could brake app in production which happened to me.<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     0%
</td>
                                            <td class="aggregateprogress">     0%
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate">302400</td>
                                            <td class="aggregatetimeoriginalestimate">302400</td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hymrd3:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      166788
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      293332
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12610060" rel="12610060" data-issuekey="DBCP-393" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-393" href="https://issues.apache.org/jira/browse/DBCP-393">DBCP-393</a>
</td>
                                            <td class="summary"><p>
                DBCP to support database connection failover
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Critical
</td>
                                            <td class="resolution">    Won&#39;t Fix
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Campbell
    </td>
                                            <td class="creator">            Campbell
    </td>
                                            <td class="created"> 03/Oct/12 11:29 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 05/Mar/14 11:47 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">2</td>
                                            <td class="watches">3</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Hello. Would it be possible for the DriverManagerConnectionFactory to accept a list or alternative database connection URL. With a possible maxRetry parameter, the suggestion is this improvement would allow for automatic fail over to a secondary database when a connection exception occurs.<br/>
<br/>
Let me know if this is a good candidate or if you have made thought of this already as it is standard behaviour in other managed datasources. Many thanks.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ob3:
  </td>
                                            <td class="customfield_12310220">            <span title="03/Jun/13 23:06"><time class="livestamp allow-future" datetime="2013-06-03T23:06:52+0100">03/Jun/13 11:06 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90417
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      255701
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12607510" rel="12607510" data-issuekey="DBCP-392" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-392" href="https://issues.apache.org/jira/browse/DBCP-392">DBCP-392</a>
</td>
                                            <td class="summary"><p>
                Remove Occurrences of Multiple Statements on One Line
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            James Carman
    </td>
                                            <td class="creator">            James Carman
    </td>
                                            <td class="created"> 13/Sep/12 21:03 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 03/Dec/13 10:20 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1,                     1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      The DelegatingConnection class has many methods that are one-liners, but it&#39;s actually multiple statements.  When debugging, it can make it appear as if the code is being executed twice (it did to me) at first glance.  If it&#39;s multiple statements, we should use multiple lines of code.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9obb:
  </td>
                                            <td class="customfield_12310220">            <span title="11/Mar/13 13:54"><time class="livestamp allow-future" datetime="2013-03-11T13:54:37+0000">11/Mar/13 1:54 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90418
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      255702
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12606261" rel="12606261" data-issuekey="DBCP-391" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-391" href="https://issues.apache.org/jira/browse/DBCP-391">DBCP-391</a>
</td>
                                            <td class="summary"><p>
                Close on invalid connections throws unexpected exception
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Markus Stier
    </td>
                                            <td class="creator">            Markus Stier
    </td>
                                            <td class="created"> 05/Sep/12 16:48 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 31/Jan/14 21:09 </td>
                                            <td class="versions">                        1.2.2,                     1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">4</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      If the underlying connection of a PoolableConnection becomes invalid due to network errors etc., it is not possible to remove it from the pool by using the close-strategy. In case of an exception I&#39;d check if the connection is already closed (=returned to pool). If not I&#39;d close it to return it to the pool. <br/>
<br/>
Two problems:<br/>
* The method isClosed() returns true, even if the PoolableConnection has not the _closed state because of _conn.isClosed() returns true. The defective connection remains active, consuming connections. <br/>
* The method close throws an SQLException (&quot;already closed&quot;) if (and only if) the underlying connection is closed. If the PoolableConnection is in _closed state, close() returns silently (as expected)<br/>
<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9obj:
  </td>
                                            <td class="customfield_12310220">            <span title="31/Jan/14 21:09"><time class="livestamp allow-future" datetime="2014-01-31T21:09:03+0000">31/Jan/14 9:09 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90419
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      255703
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12601592" rel="12601592" data-issuekey="DBCP-390" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-390" href="https://issues.apache.org/jira/browse/DBCP-390">DBCP-390</a>
</td>
                                            <td class="summary"><p>
                calling invalidObject(badConnection) damage the counting of the objects in the pool. 
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Cannot Reproduce
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            neng xu
    </td>
                                            <td class="creator">            neng xu
    </td>
                                            <td class="created"> 06/Aug/12 19:01 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:10 </td>
                                            <td class="resolutiondate"> 31/Jan/14 19:42 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        POOL-213                        </td>
                                            <td class="environment">      All env
  </td>
                                            <td class="description">      We are using DBCP pool.  The pattern of using DBCP pool is same as Apache DBCP pool example PoolingDataSourceDataSourceExample.java. When cleaning bad connections, I noticed that it called pool.invalidObject(object)  method to clean the bad connection object from the pool.  Recently we found that calling invalidObject(object) could damage the number of active connections of  the pool because this method always silently reduce the number  regardless the objects was removed from pool or not.  For example, when the connection object is null (creating database connection timeout happens),  calling invalidObject(badConnection) would cause the number of Active connections to be reduce one even the method did not remove any object from pool. This damage the counting of the object in the pool.  <br/>
This method should only reduce the number of the objects in the pool when it successfully removed an object from the pool.  <br/>
Note: I understand that we may resolve the problem by checking object is null (or object is in pool) before calling invalidObject() method. But I think it is just a first-aid solution.  <br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9obr:
  </td>
                                            <td class="customfield_12310220">            <span title="31/Jan/14 19:42"><time class="livestamp allow-future" datetime="2014-01-31T19:42:54+0000">31/Jan/14 7:42 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90420
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      255704
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12601313" rel="12601313" data-issuekey="DBCP-389" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-389" href="https://issues.apache.org/jira/browse/DBCP-389">DBCP-389</a>
</td>
                                            <td class="summary"><p>
                Provide a configurable implementation of OSGi 4.2 DataSourceFactory
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Won&#39;t Fix
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Matt Bishop
    </td>
                                            <td class="creator">            Matt Bishop
    </td>
                                            <td class="created"> 03/Aug/12 08:05 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:10 </td>
                                            <td class="resolutiondate"> 05/Mar/14 11:47 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Any OSGi 4.2 environment like Felix.
  </td>
                                            <td class="description">      Using JDBC Drivers in OSGi has been made more understandable in R4.2 with the addition of the DataSourceFactory service interface. It makes it pretty easy to consume JDBC datasources in OSGi.<br/>
<br/>
However, no one implements this interface in a driver-agnostic manner. DBCP is well-positioned to provide a configurable DataSourceFactory that could provide the DataSource variants to services.<br/>
<br/>
More information can be found here: http://www.osgi.org/javadoc/r4v42/org/osgi/service/jdbc/DataSourceFactory.html
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9obz:
  </td>
                                            <td class="customfield_12310220">            <span title="14/Feb/14 15:34"><time class="livestamp allow-future" datetime="2014-02-14T15:34:10+0000">14/Feb/14 3:34 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90421
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      255705
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12595974" rel="12595974" data-issuekey="DBCP-388" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-388" href="https://issues.apache.org/jira/browse/DBCP-388">DBCP-388</a>
</td>
                                            <td class="summary"><p>
                Support AbandonedConfig in SharedPoolDataSource
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Open
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    <em>Unresolved</em>
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Michael Kerr
    </td>
                                            <td class="creator">            Michael Kerr
    </td>
                                            <td class="created"> 26/Jun/12 20:46 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 29/Dec/14 03:01 </td>
                                            <td class="resolutiondate"> &nbsp; </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        2.2            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        POOL-282                        </td>
                                            <td class="environment">      Linux and Java 1.6
  </td>
                                            <td class="description">      BasicDataSource has support for AbandonedConfig<br/>
SharedPoolDataSource does not currently support reclaiming abandoned connections.<br/>
<br/>
It would be helpful if the user can extend the underlying connection pool to add features like abandoned connection management.  This is possible with BasicDataSource.<br/>
<br/>
Currently the only solution is to extend classes or replace classes in the Apache package namespace.<br/>
<br/>
Thanks for looking,<br/>
Michael
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    features</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy3yuf:
  </td>
                                            <td class="customfield_12310220">            <span title="05/Feb/14 20:32"><time class="livestamp allow-future" datetime="2014-02-05T20:32:25+0000">05/Feb/14 8:32 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      56969
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      249053
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12595951" rel="12595951" data-issuekey="DBCP-387" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-387" href="https://issues.apache.org/jira/browse/DBCP-387">DBCP-387</a>
</td>
                                            <td class="summary"><p>
                Have abandoned connection call cancel and rollback so it doesn&#39;t have to wait before closing
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Won&#39;t Fix
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Michael Kerr
    </td>
                                            <td class="creator">            Michael Kerr
    </td>
                                            <td class="created"> 26/Jun/12 19:21 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 13/Feb/14 11:31 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Linux, Java 1.6
  </td>
                                            <td class="description">      When using BasicDataSource and enabling Abandoned the destroyObject will be called when a connection has been out of the pool longer than a set period of time.<br/>
In testing I found that when a connection is reclaimed &quot;destroyObject&quot; is called.  This call uses close to free up the connection.  The problem is any activity on the connection will prevent the close from occuring.<br/>
<br/>
A suggestion is to cancel active statements and then close them.  Then rollback the connection and close the connection.<br/>
<br/>
PoolableConnectionFactory<br/>
<br/>
    public void destroyObject(Object obj) throws Exception {<br/>
        if(obj instanceof PoolableConnection) {<br/>
            ((PoolableConnection)obj).reallyClose();<br/>
        }<br/>
    }<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    features</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy3yun:
  </td>
                                            <td class="customfield_12310220">            <span title="13/Feb/14 11:31"><time class="livestamp allow-future" datetime="2014-02-13T11:31:03+0000">13/Feb/14 11:31 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      56970
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      249054
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12594954" rel="12594954" data-issuekey="DBCP-386" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-386" href="https://issues.apache.org/jira/browse/DBCP-386">DBCP-386</a>
</td>
                                            <td class="summary"><p>
                Osgi imports and classpath for Class.forName
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Duplicate
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Edstrom Johan
    </td>
                                            <td class="creator">            Edstrom Johan
    </td>
                                            <td class="created"> 18/Jun/12 16:53 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 11/Jan/14 18:59 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-363                        </td>
                                            <td class="environment">      OSGi, felix, equinox, karaf
  </td>
                                            <td class="description">      The bundle MANIFEST does not provide a Dynamic import, this forces you to either attach data sources as a fragment or load them via exposed system classes.<br/>
A dynamic import * would simplify this.<br/>
<br/>
&lt;commons.osgi.dynamicImport&gt;*&lt;/commons.osgi.dynamicImport&gt;
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oc7:
  </td>
                                            <td class="customfield_12310220">            <span title="18/Jun/12 17:02"><time class="livestamp allow-future" datetime="2012-06-18T17:02:48+0100">18/Jun/12 5:02 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90422
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      255706
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12559544" rel="12559544" data-issuekey="DBCP-385" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-385" href="https://issues.apache.org/jira/browse/DBCP-385">DBCP-385</a>
</td>
                                            <td class="summary"><p>
                Please update to support Java 7 and JDBC 4.1
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            James Page
    </td>
                                            <td class="creator">            James Page
    </td>
                                            <td class="created"> 06/Jun/12 15:49 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 30/Oct/13 14:48 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">4</td>
                                            <td class="watches">5</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Ubuntu 12.10/openjdk-7
  </td>
                                            <td class="description">      I&#39;m currently working on the transition of all Java packages in Ubuntu from Java 6 to Java 7.<br/>
<br/>
This means we have to be able to build packages from source using openjdk-7.<br/>
<br/>
At the moment we carry a pretty heavy patch for commons-dbcp to no-op all of the new features in the JDBC 4.1 API.  I know the Fedora Java team have done the same (they are the source of the patch).<br/>
<br/>
It would be great if commons-dbcp could be updated to meet these new API requirements.<br/>
<br/>
Thanks
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ocf:
  </td>
                                            <td class="customfield_12310220">            <span title="28/May/13 12:07"><time class="livestamp allow-future" datetime="2013-05-28T12:07:20+0100">28/May/13 12:07 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90423
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      255707
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12553059" rel="12553059" data-issuekey="DBCP-384" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-384" href="https://issues.apache.org/jira/browse/DBCP-384">DBCP-384</a>
</td>
                                            <td class="summary"><p>
                PoolingDriver.accessToUnderlyingConnectionAllowed is thread-hostile
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Sebb
    </td>
                                            <td class="creator">            Sebb
    </td>
                                            <td class="created"> 26/Apr/12 23:58 </td>
                                            <td class="lastViewed"> 20/Mar/15 15:39 </td>
                                            <td class="updated"> 31/May/14 05:04 </td>
                                            <td class="resolutiondate"> 03/Dec/13 09:36 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      The field PoolingDriver.accessToUnderlyingConnectionAllowed is static but mutable; this is inherently thread-hostile.<br/>
<br/>
It seems completely unnecessary for the field to be static; surely it could be an instance variable?<br/>
Better yet, drop the setter/getter and make the field final, set by the ctor.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ocn:
  </td>
                                            <td class="customfield_12310220">            <span title="03/Dec/13 09:36"><time class="livestamp allow-future" datetime="2013-12-03T09:36:37+0000">03/Dec/13 9:36 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90424
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      236997
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12552812" rel="12552812" data-issuekey="DBCP-383" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-383" href="https://issues.apache.org/jira/browse/DBCP-383">DBCP-383</a>
</td>
                                            <td class="summary"><p>
                NPE during XA commit (possibly doing startup recovery)
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Martin Lichtin
    </td>
                                            <td class="creator">            Martin Lichtin
    </td>
                                            <td class="created"> 26/Apr/12 09:44 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:06 </td>
                                            <td class="resolutiondate"> 03/Feb/14 21:57 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Encountering nullpointer exception at <br/>
<br/>
java.lang.NullPointerException<br/>
	at org.apache.commons.dbcp.managed.LocalXAConnectionFactory$LocalXAResource.commit(LocalXAConnectionFactory.java:201)<br/>
	at com.atomikos.datasource.xa.XAResourceTransaction.commit(XAResourceTransaction.java:784)<br/>
	at com.atomikos.icatch.imp.CommitMessage.send(CommitMessage.java:73)<br/>
	at com.atomikos.icatch.imp.PropagationMessage.submit(PropagationMessage.java:111)<br/>
	at com.atomikos.icatch.imp.Propagator$PropagatorThread.run(Propagator.java:87)<br/>
	at com.atomikos.icatch.imp.Propagator.submitPropagationMessage(Propagator.java:66)<br/>
	at com.atomikos.icatch.imp.HeurHazardStateHandler.onTimeout(HeurHazardStateHandler.java:120)<br/>
	at com.atomikos.icatch.imp.CoordinatorImp.alarm(CoordinatorImp.java:1105)<br/>
	at com.atomikos.timing.PooledAlarmTimer.notifyListeners(PooledAlarmTimer.java:112)<br/>
	at com.atomikos.timing.PooledAlarmTimer.run(PooledAlarmTimer.java:99)<br/>
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)<br/>
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)<br/>
	at java.lang.Thread.run(Thread.java:662)
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ocv:
  </td>
                                            <td class="customfield_12310220">            <span title="26/Apr/12 16:17"><time class="livestamp allow-future" datetime="2012-04-26T16:17:23+0100">26/Apr/12 4:17 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90425
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      237034
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12551439" rel="12551439" data-issuekey="DBCP-382" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-382" href="https://issues.apache.org/jira/browse/DBCP-382">DBCP-382</a>
</td>
                                            <td class="summary"><p>
                Could not set flag &quot;accessToUnderlyingConnectionAllowed&quot; in &quot;context.xml&quot; for DriverAdapterCPDS/PerUserPoolDataSource
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Stefan Rempfer
    </td>
                                            <td class="creator">            Stefan Rempfer
    </td>
                                            <td class="created"> 18/Apr/12 11:41 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:08 </td>
                                            <td class="resolutiondate"> 30/Jan/14 20:21 </td>
                                            <td class="versions">                        1.3            </td>
                                            <td class="fixVersions">                        1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Apache Tomcat 6.0.32 / DBCP 1.3
  </td>
                                            <td class="description">      Could not set flag &quot;accessToUnderlyingConnectionAllowed&quot; in context.xml for DriverAdapterCPDS/PerUserPoolDataSource because the property is not considered from the factory.<br/>
A possible solution is to add following lines to class &quot;DriverAdapterCPDS&quot; on the end of method &quot;getObjectInstance&quot;<br/>
<br/>
{code}<br/>
ra = ref.get(&quot;accessToUnderlyingConnectionAllowed&quot;);<br/>
if (ra != null &amp;&amp; ra.getContent() != null) {<br/>
	setAccessToUnderlyingConnectionAllowed(Boolean.valueOf(ra.getContent().toString()).booleanValue());<br/>
}<br/>
{code}
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9od3:
  </td>
                                            <td class="customfield_12310220">            <span title="30/Jan/14 20:21"><time class="livestamp allow-future" datetime="2014-01-30T20:21:41+0000">30/Jan/14 8:21 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90426
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      236247
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12550788" rel="12550788" data-issuekey="DBCP-381" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-381" href="https://issues.apache.org/jira/browse/DBCP-381">DBCP-381</a>
</td>
                                            <td class="summary"><p>
                Threads BLOCKED on stress tests
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Carlos Martinez
    </td>
                                            <td class="creator">            Carlos Martinez
    </td>
                                            <td class="created"> 13/Apr/12 08:39 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:08 </td>
                                            <td class="resolutiondate"> 30/Jan/14 12:55 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Hi,<br/>
<br/>
We are performing stress tests of OpenCMS. The database used is Oracle one. The pool of connections that OpenCMS is using is the DBCP pool.<br/>
<br/>
While performing performance tests we see that with minimal load already generated, almost all of the threads in java get &quot;BLOCKED&quot; trying to release back connections to the pool, and the performance of the application is really poor. We also see that the CPU consumption on the application server machine goes up to 100%. We are not generating enough load to cause this consumption. I believe that the CPU is all spent trying to handle those BLOCK threads.<br/>
<br/>
We did perform a thread dump of the Java on many occasions and the pattern is always similar. Plenty of connections blocked releasing the connection:<br/>
<br/>
-------------------<br/>
&quot;TP-Processor8&quot; daemon prio=10 tid=0x00007fa2848b4000 nid=0x4713 waiting for monitor entry [0x00007fa2833f8000]<br/>
   java.lang.Thread.State: BLOCKED (on object monitor)<br/>
        at org.apache.commons.pool.impl.GenericObjectPool.returnObject(GenericObjectPool.java:916)<br/>
        - waiting to lock &lt;0x0000000780ba7cc8&gt; (a org.apache.commons.pool.impl.GenericObjectPool)<br/>
        at org.apache.commons.dbcp.PoolableConnection.close(PoolableConnection.java:87)<br/>
        - locked &lt;0x00000007811a6f78&gt; (a org.apache.commons.dbcp.PoolableConnection)<br/>
        at org.apache.commons.dbcp.PoolingDriver$PoolGuardConnectionWrapper.close(PoolingDriver.java:269)<br/>
        at org.opencms.ocee.db.transaction.CmsTransactionConnection.close(CmsTransactionConnection.java:79)<br/>
        at org.opencms.ocee.db.transaction.CmsTransaction.close(CmsTransaction.java:121)<br/>
        at org.opencms.ocee.db.transaction.CmsTransactionDbContext.clear(CmsTransactionDbContext.java:99)<br/>
        at org.opencms.db.CmsSecurityManager.readFile(CmsSecurityManager.java:3351)<br/>
        at org.opencms.file.CmsObject.readFile(CmsObject.java:2725)<br/>
        at org.opencms.file.CmsObject.readFile(CmsObject.java:2777)<br/>
        at org.opencms.file.CmsObject.readFile(CmsObject.java:2747)<br/>
        at org.apache.jsp.WEB_002dINF.jsp.online.system.modules.org_opentrends_upf_template.templates.mainUPF_jsp._jspService(mainUPF_jsp.java:654)<br/>
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)<br/>
-------------<br/>
<br/>
And one thread active releasing the connection:<br/>
<br/>
-------------<br/>
&quot;TP-Processor10&quot; daemon prio=10 tid=0x00007fa284b34800 nid=0x4715 runnable [0x00007fa2831f4000]<br/>
   java.lang.Thread.State: RUNNABLE<br/>
        at java.net.SocketInputStream.socketRead0(Native Method)<br/>
        at java.net.SocketInputStream.read(SocketInputStream.java:129)<br/>
        at oracle.net.ns.Packet.receive(Unknown Source)<br/>
        at oracle.net.ns.DataPacket.receive(Unknown Source)<br/>
        at oracle.net.ns.NetInputStream.getNextPacket(Unknown Source)<br/>
        at oracle.net.ns.NetInputStream.read(Unknown Source)<br/>
        at oracle.net.ns.NetInputStream.read(Unknown Source)<br/>
        at oracle.net.ns.NetInputStream.read(Unknown Source)<br/>
        at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1104)<br/>
        at oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:1075)<br/>
        at oracle.jdbc.driver.T4C7Ocommoncall.receive(T4C7Ocommoncall.java:106)<br/>
        at oracle.jdbc.driver.T4CConnection.doRollback(T4CConnection.java:568)<br/>
        - locked &lt;0x00000007810e2ac0&gt; (a oracle.jdbc.driver.T4CConnection)<br/>
        at oracle.jdbc.driver.PhysicalConnection.rollback(PhysicalConnection.java:1164)<br/>
        - locked &lt;0x00000007810e2ac0&gt; (a oracle.jdbc.driver.T4CConnection)<br/>
        at org.apache.commons.dbcp.DelegatingConnection.rollback(DelegatingConnection.java:328)<br/>
        at org.apache.commons.dbcp.DelegatingConnection.rollback(DelegatingConnection.java:328)<br/>
        at org.apache.commons.dbcp.PoolableConnectionFactory.passivateObject(PoolableConnectionFactory.java:359)<br/>
        at org.apache.commons.pool.impl.GenericObjectPool.addObjectToPool(GenericObjectPool.java:926)<br/>
        at org.apache.commons.pool.impl.GenericObjectPool.returnObject(GenericObjectPool.java:917)<br/>
        - locked &lt;0x0000000780ba7cc8&gt; (a org.apache.commons.pool.impl.GenericObjectPool)<br/>
        at org.apache.commons.dbcp.PoolableConnection.close(PoolableConnection.java:87)<br/>
        - locked &lt;0x00000007810e29b0&gt; (a org.apache.commons.dbcp.PoolableConnection)<br/>
        at org.apache.commons.dbcp.PoolingDriver$PoolGuardConnectionWrapper.close(PoolingDriver.java:269)<br/>
        at org.opencms.ocee.db.transaction.CmsTransactionConnection.close(CmsTransactionConnection.java:79)<br/>
        at org.opencms.ocee.db.transaction.CmsTransaction.close(CmsTransaction.java:121)<br/>
        at org.opencms.ocee.db.transaction.CmsTransactionDbContext.clear(CmsTransactionDbContext.java:99)<br/>
        at org.opencms.db.CmsSecurityManager.readFile(CmsSecurityManager.java:3351)<br/>
        at org.opencms.file.CmsObject.readFile(CmsObject.java:2725)<br/>
------------<br/>
<br/>
As we can see the thread releasing the connection is performing a rollback, probably so that the connection gets back clean to the pool.<br/>
<br/>
In this case the application is not performing Updates/Deletes or Inserts. In the future it will, but not in the stress tests. <br/>
<br/>
This is a big issue, as a Rollback is not a light operation, even when it has not to rollback many actions.<br/>
<br/>
This is affecting the pool, as while the connection is performing rollback nobody can use the pool as it is locked.<br/>
<br/>
This does not make any sense.<br/>
<br/>
I believe that what is happening is:<br/>
<br/>
1) I lock the pool<br/>
2) I perform a rollback of the connection<br/>
3) I return the connection to the pool<br/>
4) I unlock the pool<br/>
<br/>
Why is the rollback holding the pool??? The rollback should be done before locking the pool. It would be better if:<br/>
<br/>
1) I perform a rollback of the connection<br/>
2) I lock the pool<br/>
3) I return the connection to the pool<br/>
4) I unlock the pool<br/>
<br/>
I have seen many threads on internet of people having this kind of locking under stress tests, and I believe this could be the cause. The lock should be hold really the shortest time possible.<br/>
<br/>
Thanks,<br/>
Carlos<br/>
<br/>
<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    BLOCKED, PERFORMANCE, ROLLBACK</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9odb:
  </td>
                                            <td class="customfield_12310220">            <span title="30/Jan/14 12:55"><time class="livestamp allow-future" datetime="2014-01-30T12:55:48+0000">30/Jan/14 12:55 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90427
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      235652
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12550662" rel="12550662" data-issuekey="DBCP-380" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-380" href="https://issues.apache.org/jira/browse/DBCP-380">DBCP-380</a>
</td>
                                            <td class="summary"><p>
                DelegatingConnection isWrapperFor dies on older JDBC drivers
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Balazs Zsoldos
    </td>
                                            <td class="creator">            Balazs Zsoldos
    </td>
                                            <td class="created"> 12/Apr/12 12:14 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:09 </td>
                                            <td class="resolutiondate"> 09/Dec/13 20:55 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1,                     1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate">3600</td>
                                            <td class="timeestimate">3600</td>
                                            <td class="timespent"></td>
                                            <td class="workratio">            0%
    </td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      The isWrapperFor function simply calls towards to the delegated connection iswrappedfor function instead of checking the result first by hand like in the unwrap function.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     0%
</td>
                                            <td class="aggregateprogress">     0%
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate">3600</td>
                                            <td class="aggregatetimeoriginalestimate">3600</td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9odj:
  </td>
                                            <td class="customfield_12310220">            <span title="09/Dec/13 20:55"><time class="livestamp allow-future" datetime="2013-12-09T20:55:26+0000">09/Dec/13 8:55 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90428
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      235526
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12380526" rel="12380526" data-issuekey="DBCP-379" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-379" href="https://issues.apache.org/jira/browse/DBCP-379">DBCP-379</a>
</td>
                                            <td class="summary"><p>
                number of connections created has crossed more than maxActive 
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Duplicate
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Bhaskar NA
    </td>
                                            <td class="creator">            Bhaskar NA
    </td>
                                            <td class="created"> 16/Oct/07 13:06 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:13 </td>
                                            <td class="resolutiondate"> 30/Jan/14 15:38 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">                        1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">3</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-342                        </td>
                                            <td class="environment">      OS:Red Hat Enterprise Linux AS release 4 (Nahant Update 2)<br/>
uname:Linux 2.6.9-22.ELsmp #1 SMP Mon Sep 19 18:32:14 EDT 2005 i686<br/>
vm_info: Java HotSpot(TM) Server VM (1.4.2_13-b06) for<br/>
linux-x86, built<br/>
on Oct 18 2006 09:55:11 by unknown with unknown compiler
  </td>
                                            <td class="description">      I found that when the minIdle is configured then during loads, common pool creates more number of connections  it will be greater than maxActive.<br/>
<br/>
When I had following settings:<br/>
<br/>
maxActive = 50<br/>
maxIdle = 30<br/>
minIdle=30<br/>
factory=org.apache.commons.dbcp.BasicDataSourceFactory<br/>
maxWait=10000<br/>
timeBetweenEvictionRunsMillis=900000<br/>
numTestsPerEvictionRun=50<br/>
minEvictableIdleTimeMillis=1800000<br/>
testWhileIdle=true<br/>
testOnBorrow = true<br/>
validationQuery=&#39;select 1 from dual&#39;<br/>
<br/>
<br/>
Number of connections in the pool went upto 121. (found thru netstat)<br/>
<br/>
When I changed minIdle to 15 and did my load test connecitons in the pool went upto 66<br/>
<br/>
Looks like maxActive is getting bypassed with minIdle.<br/>
<br/>
When I changed minIdle to 10 and maxActive to 30 and maxIdle to 30 then number of connections went upto 40.<br/>
<br/>
Can someone please throw light on what is going on here? I am using DBCP 1.2.1 and common pool 1.3.<br/>
<br/>
Bhaskar
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9odr:
  </td>
                                            <td class="customfield_12310220">            <span title="04/Nov/07 18:02"><time class="livestamp allow-future" datetime="2007-11-04T18:02:47+0000">04/Nov/07 6:02 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90429
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      166695
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12548504" rel="12548504" data-issuekey="DBCP-378" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-378" href="https://issues.apache.org/jira/browse/DBCP-378">DBCP-378</a>
</td>
                                            <td class="summary"><p>
                ManagedDataSource returns uses the same underlying DB connection across JTA tx
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Critical
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Ortwin Glück
    </td>
                                            <td class="creator">            Ortwin Glück
    </td>
                                            <td class="created"> 28/Mar/12 15:54 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:02 </td>
                                            <td class="resolutiondate"> 28/Mar/12 18:05 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      It seems that when more than one JTA transaction is used within the same thread (suspend/resume transaction), the ManagedDataSource always uses the same underlying DB connection. This scenario is common in EJB containers! If the same DB connection is used the JTA suspend/resume actions have no effect. The JTA semantics is violated this behaviour.<br/>
<br/>
Use the following code to setup a unit test that works in your environment<br/>
<br/>
// DS setup<br/>
            XADataSource ods = new oracle.jdbc.xa.client.OracleXADataSource();<br/>
            ...<br/>
            TransactionManager tm = ...<br/>
<br/>
            DataSourceXAConnectionFactory cf = new DataSourceXAConnectionFactory(tm, ods);<br/>
            <br/>
            AbandonedConfig ab = new AbandonedConfig();<br/>
            ab.setLogAbandoned(false);<br/>
            ab.setRemoveAbandoned(true);<br/>
            ab.setRemoveAbandonedTimeout(15*60);<br/>
            <br/>
            connPool = new GenericObjectPool(null);<br/>
            <br/>
            // registers itself on the pool<br/>
            KeyedObjectPoolFactory stmtPool = = new StackKeyedObjectPoolFactory(5);<br/>
<br/>
            new PoolableManagedConnectionFactory(cf, connPool, stmtPool, <br/>
                                          null, 5, <br/>
                                          (Collection&lt;String&gt;) null, // init sql <br/>
                                          false, // read-only <br/>
                                          false, // auto-commit<br/>
                                          Connection.TRANSACTION_READ_COMMITTED,<br/>
                                          (String) null, // catalog<br/>
                                          ab);<br/>
            ds = new ManagedDataSource(connPool, cf.getTransactionRegistry());<br/>
<br/>
<br/>
// Unit test<br/>
        tm.begin();<br/>
        Connection c1 = source.getConnection();<br/>
        Connection ic1 = ((ManagedConnection) c1).getInnermostDelegate(); <br/>
        c1.close();<br/>
        <br/>
        Transaction tx = tm.suspend();<br/>
        tm.begin();<br/>
        c2 = source.getConnection();<br/>
        ic2 = ((ManagedConnection) c2).getInnermostDelegate();<br/>
        c2.close();<br/>
        <br/>
        assertNotSame(&quot;Pool must NOT use identical connection across tx&quot;, ic1, ic2);<br/>
        tm.commit();<br/>
        tm.resume(tx);<br/>
        tm.commit();
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyndz3:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170451
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      233601
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12545180" rel="12545180" data-issuekey="DBCP-377" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-377" href="https://issues.apache.org/jira/browse/DBCP-377">DBCP-377</a>
</td>
                                            <td class="summary"><p>
                Dbcp Idle Check Mechanism Doesn&#39;t Work
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Critical
</td>
                                            <td class="resolution">    Cannot Reproduce
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            yixin he
    </td>
                                            <td class="creator">            yixin he
    </td>
                                            <td class="created"> 05/Mar/12 14:02 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:02 </td>
                                            <td class="resolutiondate"> 11/Jan/14 20:08 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Linux mysql 5.1.4
  </td>
                                            <td class="description">      Using :commons-dbcp-1.4.jar version<br/>
<br/>
we use a distributed data access layer for Database Sharding with mysql<br/>
our web servers use mysql jdbc driver 1.5.4 to connect to this middleware layer with F5 between them for load balance.<br/>
the middleware layer will discard db links that idle for longger than 1 hour,and our dbcp configures to close links that idle for <br/>
longger than 30 minutes.<br/>
<br/>
here we occurred exceptions as follows:<br/>
<br/>
{code}<br/>
    java.net.SocketException<br/>
MESSAGE: Broken pipe<br/>
<br/>
STACKTRACE:<br/>
<br/>
java.net.SocketException: Broken pipe<br/>
        at java.net.SocketOutputStream.socketWrite0(Native Method)<br/>
        at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)<br/>
        at java.net.SocketOutputStream.write(SocketOutputStream.java:136)<br/>
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)<br/>
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)<br/>
        at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:2637)<br/>
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1554)<br/>
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1665)<br/>
        at com.mysql.jdbc.Connection.execSQL(Connection.java:3176)<br/>
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1153)<br/>
        at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java:794)<br/>
        ....<br/>
        at org.apache.commons.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)<br/>
        at org.apache.commons.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)<br/>
{code}<br/>
<br/>
it seems that there are times when the links get from pool they have already been broken,we know that they are forcely closed by the middleware layer、but as dbcp idle check more frequently than the middleware layer(30m to 60m). How can this happen as the idle links<br/>
should have been closed by dbcp first. Are there any problems for the dbcp idle check Mechanism？<br/>
<br/>
our dbcp configurations are as follows<br/>
<br/>
{code}<br/>
    &lt;property name=&quot;maxActive&quot;&gt;&lt;value&gt;20&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;initialSize&quot;&gt;&lt;value&gt;1&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;maxWait&quot;&gt;&lt;value&gt;60000&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;maxIdle&quot;&gt;&lt;value&gt;20&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;minIdle&quot;&gt;&lt;value&gt;5&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;removeAbandoned&quot;&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;removeAbandonedTimeout&quot;&gt;&lt;value&gt;180&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;connectionProperties&quot;&gt;&lt;value&gt;clientEncoding=GBK&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;timeBetweenEvictionRunsMillis&quot;&gt;&lt;value&gt;60000&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;minEvictableIdleTimeMillis&quot;&gt;&lt;value&gt;1800000&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;testWhileIdle&quot;&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;testOnBorrow&quot;&gt;&lt;value&gt;false&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;testOnReturn&quot;&gt;&lt;value&gt;false&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;validationQuery&quot;&gt;&lt;value&gt;SELECT @@SQL_MODE&lt;/value&gt;&lt;/property&gt;<br/>
    &lt;property name=&quot;numTestsPerEvictionRun&quot;&gt;&lt;value&gt;32&lt;/value&gt;&lt;/property&gt;<br/>
{code}
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9odz:
  </td>
                                            <td class="customfield_12310220">            <span title="05/Mar/12 22:00"><time class="livestamp allow-future" datetime="2012-03-05T22:00:34+0000">05/Mar/12 10:00 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90430
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      230366
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12539371" rel="12539371" data-issuekey="DBCP-376" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-376" href="https://issues.apache.org/jira/browse/DBCP-376">DBCP-376</a>
</td>
                                            <td class="summary"><p>
                Thread safety issue
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Resolved
    </td>
                                            <td class="priority">   Critical
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Dave Oxley
    </td>
                                            <td class="creator">            Dave Oxley
    </td>
                                            <td class="created"> 23/Jan/12 01:04 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 25/Feb/15 00:27 </td>
                                            <td class="resolutiondate"> 25/Feb/15 00:27 </td>
                                            <td class="versions">                        1.3            </td>
                                            <td class="fixVersions">                        1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Under high load commons-dbcp (or commons-pool) exhibits thread safety issues and begins throwing various exceptions. I don&#39;t yet know the cause of the issue but it looks like a connection maybe handed out to multiple threads concurrently. Here&#39;s a few examples of the exceptions we are getting:<br/>
<br/>
{noformat}<br/>
jvm 1    | Caused by: java.sql.SQLException: Attempted to use PooledConnection after closed() was called.<br/>
jvm 1    |      at org.apache.commons.dbcp.cpdsadapter.PooledConnectionImpl.assertOpen(PooledConnectionImpl.java:163)<br/>
jvm 1    |      at org.apache.commons.dbcp.cpdsadapter.PooledConnectionImpl.getConnection(PooledConnectionImpl.java:174)<br/>
jvm 1    |      at org.apache.commons.dbcp.datasources.InstanceKeyDataSource.getConnection(InstanceKeyDataSource.java:768)<br/>
jvm 1    |      at org.apache.commons.dbcp.datasources.InstanceKeyDataSource.getConnection(InstanceKeyDataSource.java:676)<br/>
jvm 1    |      at uk.co.webessence.kernel.database.DriverAdapterConnectionPool.acquireConnection(DriverAdapterConnectionPool.java:101)<br/>
jvm 1    |      ... 94 more<br/>
{noformat}<br/>
<br/>
{noformat}<br/>
jvm 1    | Caused by: java.sql.SQLException: PooledConnection was reused, withoutits previous Connection being closed.<br/>
jvm 1    |      at org.apache.commons.dbcp.cpdsadapter.PooledConnectionImpl.getConnection(PooledConnectionImpl.java:179)<br/>
jvm 1    |      at org.apache.commons.dbcp.datasources.InstanceKeyDataSource.getConnection(InstanceKeyDataSource.java:768)<br/>
jvm 1    |      at org.apache.commons.dbcp.datasources.InstanceKeyDataSource.getConnection(InstanceKeyDataSource.java:676)<br/>
jvm 1    |      at uk.co.webessence.kernel.database.DriverAdapterConnectionPool.acquireConnection(DriverAdapterConnectionPool.java:101)<br/>
jvm 1    |      ... 77 more<br/>
{noformat}<br/>
<br/>
{noformat}<br/>
jvm 1    | Caused by: java.sql.SQLException: Invalid state, the ResultSet object is closed.<br/>
jvm 1    |      at net.sourceforge.jtds.jdbc.JtdsResultSet.checkOpen(JtdsResultSet.java:299)<br/>
jvm 1    |      at net.sourceforge.jtds.jdbc.JtdsResultSet.getColumn(JtdsResultSet.java:273)<br/>
jvm 1    |      at net.sourceforge.jtds.jdbc.JtdsResultSet.getObject(JtdsResultSet.java:840)<br/>
jvm 1    |      at org.apache.commons.dbcp.DelegatingResultSet.getObject(DelegatingResultSet.java:325)<br/>
jvm 1    |      at uk.co.webessence.kernel.persistence.Preloader.getDataArray(Preloader.java:428)<br/>
jvm 1    |      at uk.co.webessence.kernel.persistence.Preloader.processSingleRow(Preloader.java:175)<br/>
jvm 1    |      at uk.co.webessence.kernel.persistence.PersistenceHandler.processRecordReload(PersistenceHandler.java:471)<br/>
jvm 1    |      at uk.co.webessence.kernel.persistence.PersistenceHandler$1.doLoad(PersistenceHandler.java:447)<br/>
jvm 1    |      ... 71 more<br/>
{noformat}<br/>
<br/>
{noformat}<br/>
Message:   TDS Protocol error: Invalid packet type 0x4<br/>
jvm 1    | Caused by: java.sql.SQLException: TDS Protocol error: Invalid packet type 0x4<br/>
jvm 1    |      at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2314)<br/>
jvm 1    |      at net.sourceforge.jtds.jdbc.TdsCore.getNextRow(TdsCore.java:764)<br/>
jvm 1    |      at net.sourceforge.jtds.jdbc.JtdsResultSet.next(JtdsResultSet.java:593)<br/>
jvm 1    |      at org.apache.commons.dbcp.DelegatingResultSet.next(DelegatingResultSet.java:207)<br/>
jvm 1    |      at uk.co.webessence.kernel.persistence.Preloader.loadData(Preloader.java:142)<br/>
jvm 1    |      at uk.co.webessence.kernel.persistence.PersistenceHandler$3.doLoad(PersistenceHandler.java:592)<br/>
jvm 1    |      ... 111 more<br/>
jvm 1    | Caused by: net.sourceforge.jtds.jdbc.ProtocolException: Invalid packet type 0x4<br/>
jvm 1    |      at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2301)<br/>
jvm 1    |      ... 116 more<br/>
{noformat}
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oe7:
  </td>
                                            <td class="customfield_12310220">            <span title="25/Jan/12 13:36"><time class="livestamp allow-future" datetime="2012-01-25T13:36:58+0000">25/Jan/12 1:36 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90431
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      224873
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    2
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12538125" rel="12538125" data-issuekey="DBCP-375" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-375" href="https://issues.apache.org/jira/browse/DBCP-375">DBCP-375</a>
</td>
                                            <td class="summary"><p>
                initialSize &lt; minIdle =&gt; non-performing query plans are chosen
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Won&#39;t Fix
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Patrick Hammer
    </td>
                                            <td class="creator">            Patrick Hammer
    </td>
                                            <td class="created"> 11/Jan/12 22:49 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:09 </td>
                                            <td class="resolutiondate"> 30/Jan/14 22:00 </td>
                                            <td class="versions">                        1.2.1,                     1.2.2,                     1.3,                     1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      * dhcp 1.2.1, pool 1.2 (issue also tested with latests library version =&gt; still there)<br/>
* java 6<br/>
* oracle 10.2 and 11 (ojdbc 4 - 6)<br/>
* hibernate 2.1.8
  </td>
                                            <td class="description">      We found a strange behaviour when setting initialSize=0 and minIdle=10:<br/>
<br/>
* non-performing query plans are used on the DB<br/>
* correct query plans are used by &quot;small&quot; java app without dhcp and pool (or by sqldeveloper)<br/>
<br/>
Analysis:<br/>
<br/>
* DB tracing showed no difference between the inputs of performing/non-performing queries<br/>
* ojdbc tracing showed no difference neither<br/>
<br/>
Work-around:<br/>
<br/>
* set initialSize = minIdle, e.g., both to 10.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oef:
  </td>
                                            <td class="customfield_12310220">            <span title="30/Jan/14 22:00"><time class="livestamp allow-future" datetime="2014-01-30T22:00:15+0000">30/Jan/14 10:00 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90432
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      223631
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12536015" rel="12536015" data-issuekey="DBCP-374" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-374" href="https://issues.apache.org/jira/browse/DBCP-374">DBCP-374</a>
</td>
                                            <td class="summary"><p>
                commons-dbcp-1.4-src compile fail with apache-ant-1.8.2 and jdk1.7.0_02 and jdk1.6.0_29
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Stephen Owens
    </td>
                                            <td class="creator">            Stephen Owens
    </td>
                                            <td class="created"> 21/Dec/11 14:02 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 29/Dec/11 17:00 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Red Hat Enterprise Linux Server release 5.7 (Tikanga)<br/>
Linux 2.6.18-274.7.1.el5 #1 SMP Mon Oct 17 11:57:14 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux
  </td>
                                            <td class="description">      I downloaded commons-dbcp-1.4-src.tar.gz, untarred it to ~/commons-dbcp-1.4-src,<br/>
With ANT_HOME set to commons-dbcp-1.4-src and JAVA_HOME set to jdk1.7.0_02 <br/>
I ran ant dist and got the following errors:<br/>
$ ant dist<br/>
Buildfile: /home/sai/commons-dbcp-1.4-src/build.xml<br/>
<br/>
init:<br/>
<br/>
clean:<br/>
<br/>
check_depends:<br/>
     [echo] Checking dependencies<br/>
<br/>
check_jar:<br/>
<br/>
check_message:<br/>
     [echo] Could not find /home/sai/commons-dbcp-1.4-src/../pool/dist/commons-pool.jar<br/>
<br/>
check_jar:<br/>
<br/>
check_message:<br/>
     [echo] Could not find ${junit.jar}<br/>
<br/>
check_jar:<br/>
<br/>
check_message:<br/>
     [echo] Could not find ${naming-common.jar}<br/>
<br/>
check_jar:<br/>
<br/>
check_message:<br/>
     [echo] Could not find ${naming-java.jar}<br/>
<br/>
check_jar:<br/>
<br/>
check_message:<br/>
     [echo] Could not find ${commons-logging.jar}<br/>
<br/>
check_jar:<br/>
<br/>
check_message:<br/>
     [echo] Could not find ${xerces.jar}<br/>
<br/>
check_jar:<br/>
<br/>
check_message:<br/>
     [echo] Could not find ${jta-spec.jar}<br/>
<br/>
check_jar:<br/>
<br/>
check_message:<br/>
     [echo] Could not find ${jta-impl.jar}<br/>
<br/>
check_jar:<br/>
<br/>
check_message:<br/>
     [echo] Could not find ${backport-util-concurrent.jar}<br/>
<br/>
check_jar:<br/>
<br/>
check_message:<br/>
     [echo] Could not find ${ejb-spec.jar}<br/>
<br/>
prepare-nojdbc4:<br/>
<br/>
prepare-jdbc4:<br/>
     [echo] JDBC 4 was detected.<br/>
<br/>
prepare:<br/>
<br/>
compile:<br/>
    [mkdir] Created dir: /home/sai/commons-dbcp-1.4-src/build/classes<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/build.xml:197: warning: &#39;includeantruntime&#39; was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds<br/>
    [javac] Compiling 53 source files to /home/sai/commons-dbcp-1.4-src/build/classes<br/>
    [javac] warning: [options] bootstrap class path not set in conjunction with -source 1.5<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/AbandonedObjectPool.java:24: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.PoolableObjectFactory;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/AbandonedObjectPool.java:25: error: package org.apache.commons.pool.impl does not exist<br/>
    [javac] import org.apache.commons.pool.impl.GenericObjectPool;<br/>
    [javac]                                    ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/AbandonedObjectPool.java:36: error: cannot find symbol<br/>
    [javac] public class AbandonedObjectPool extends GenericObjectPool {<br/>
    [javac]                                          ^<br/>
    [javac]   symbol: class GenericObjectPool<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/AbandonedObjectPool.java:54: error: cannot find symbol<br/>
    [javac]     public AbandonedObjectPool(PoolableObjectFactory factory,<br/>
    [javac]                                ^<br/>
    [javac]   symbol:   class PoolableObjectFactory<br/>
    [javac]   location: class AbandonedObjectPool<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/BasicDataSource.java:33: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedObjectPoolFactory;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/BasicDataSource.java:34: error: package org.apache.commons.pool.impl does not exist<br/>
    [javac] import org.apache.commons.pool.impl.GenericKeyedObjectPool;<br/>
    [javac]                                    ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/BasicDataSource.java:35: error: package org.apache.commons.pool.impl does not exist<br/>
    [javac] import org.apache.commons.pool.impl.GenericKeyedObjectPoolFactory;<br/>
    [javac]                                    ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/BasicDataSource.java:36: error: package org.apache.commons.pool.impl does not exist<br/>
    [javac] import org.apache.commons.pool.impl.GenericObjectPool;<br/>
    [javac]                                    ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/BasicDataSource.java:1011: error: cannot find symbol<br/>
    [javac]     protected volatile GenericObjectPool connectionPool = null;<br/>
    [javac]                        ^<br/>
    [javac]   symbol:   class GenericObjectPool<br/>
    [javac]   location: class BasicDataSource<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/BasicDataSource.java:1530: error: cannot find symbol<br/>
    [javac]             KeyedObjectPoolFactory statementPoolFactory, AbandonedConfig configuration) throws SQLException {<br/>
    [javac]             ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class BasicDataSource<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:26: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:27: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedObjectPoolFactory;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:28: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.PoolableObjectFactory;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:29: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.ObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:41: error: cannot find symbol<br/>
    [javac] public class PoolableConnectionFactory implements PoolableObjectFactory {<br/>
    [javac]                                                   ^<br/>
    [javac]   symbol: class PoolableObjectFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:51: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, boolean defaultReadOnly, boolean defaultAutoCommit) {<br/>
    [javac]                                                                     ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:51: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, boolean defaultReadOnly, boolean defaultAutoCommit) {<br/>
    [javac]                                                                                      ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:72: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, Collection connectionInitSqls, boolean defaultReadOnly, boolean defaultAutoCommit) {<br/>
    [javac]                                                                     ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:72: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, Collection connectionInitSqls, boolean defaultReadOnly, boolean defaultAutoCommit) {<br/>
    [javac]                                                                                      ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:94: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, int validationQueryTimeout, boolean defaultReadOnly, boolean defaultAutoCommit) {<br/>
    [javac]                                                                     ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:94: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, int validationQueryTimeout, boolean defaultReadOnly, boolean defaultAutoCommit) {<br/>
    [javac]                                                                                      ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:117: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, int validationQueryTimeout, Collection connectionInitSqls, boolean defaultReadOnly, boolean defaultAutoCommit) {<br/>
    [javac]                                                                     ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:117: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, int validationQueryTimeout, Collection connectionInitSqls, boolean defaultReadOnly, boolean defaultAutoCommit) {<br/>
    [javac]                                                                                      ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:139: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, boolean defaultReadOnly, boolean defaultAutoCommit, int defaultTransactionIsolation) {<br/>
    [javac]                                                                     ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:139: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, boolean defaultReadOnly, boolean defaultAutoCommit, int defaultTransactionIsolation) {<br/>
    [javac]                                                                                      ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:162: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, Collection connectionInitSqls, boolean defaultReadOnly, boolean defaultAutoCommit, int defaultTransactionIsolation) {<br/>
    [javac]                                                                     ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:162: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, Collection connectionInitSqls, boolean defaultReadOnly, boolean defaultAutoCommit, int defaultTransactionIsolation) {<br/>
    [javac]                                                                                      ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:186: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, int validationQueryTimeout, boolean defaultReadOnly, boolean defaultAutoCommit, int defaultTransactionIsolation) {<br/>
    [javac]                                                                     ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:186: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, int validationQueryTimeout, boolean defaultReadOnly, boolean defaultAutoCommit, int defaultTransactionIsolation) {<br/>
    [javac]                                                                                      ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:211: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, int validationQueryTimeout, Collection connectionInitSqls, boolean defaultReadOnly, boolean defaultAutoCommit, int defaultTransactionIsolation) {<br/>
    [javac]                                                                     ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:211: error: cannot find symbol<br/>
    [javac]     public PoolableConnectionFactory(ConnectionFactory connFactory, ObjectPool pool, KeyedObjectPoolFactory stmtPoolFactory, String validationQuery, int validationQueryTimeout, Collection connectionInitSqls, boolean defaultReadOnly, boolean defaultAutoCommit, int defaultTransactionIsolation) {<br/>
    [javac]                                                                                      ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:236: error: cannot find symbol<br/>
    [javac]         ObjectPool pool,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:237: error: cannot find symbol<br/>
    [javac]         KeyedObjectPoolFactory stmtPoolFactory,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:266: error: cannot find symbol<br/>
    [javac]         ObjectPool pool,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:267: error: cannot find symbol<br/>
    [javac]         KeyedObjectPoolFactory stmtPoolFactory,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:299: error: cannot find symbol<br/>
    [javac]         ObjectPool pool,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:300: error: cannot find symbol<br/>
    [javac]         KeyedObjectPoolFactory stmtPoolFactory,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:334: error: cannot find symbol<br/>
    [javac]         ObjectPool pool,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:335: error: cannot find symbol<br/>
    [javac]         KeyedObjectPoolFactory stmtPoolFactory,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:371: error: cannot find symbol<br/>
    [javac]         ObjectPool pool,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:372: error: cannot find symbol<br/>
    [javac]         KeyedObjectPoolFactory stmtPoolFactory,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:410: error: cannot find symbol<br/>
    [javac]         ObjectPool pool,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:411: error: cannot find symbol<br/>
    [javac]         KeyedObjectPoolFactory stmtPoolFactory,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:450: error: cannot find symbol<br/>
    [javac]         ObjectPool pool,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:451: error: cannot find symbol<br/>
    [javac]         KeyedObjectPoolFactory stmtPoolFactory,<br/>
    [javac]         ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:520: error: cannot find symbol<br/>
    [javac]     synchronized public void setPool(ObjectPool pool) {<br/>
    [javac]                                      ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:535: error: cannot find symbol<br/>
    [javac]     public synchronized ObjectPool getPool() {<br/>
    [javac]                         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:545: error: cannot find symbol<br/>
    [javac]     public void setStatementPoolFactory(KeyedObjectPoolFactory stmtPoolFactory) {<br/>
    [javac]                                         ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:726: error: cannot find symbol<br/>
    [javac]     protected volatile ObjectPool _pool = null;<br/>
    [javac]                        ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnectionFactory.java:727: error: cannot find symbol<br/>
    [javac]     protected volatile KeyedObjectPoolFactory _stmtPoolFactory = null;<br/>
    [javac]                        ^<br/>
    [javac]   symbol:   class KeyedObjectPoolFactory<br/>
    [javac]   location: class PoolableConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableCallableStatement.java:26: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableCallableStatement.java:43: error: cannot find symbol<br/>
    [javac]     private final KeyedObjectPool _pool;<br/>
    [javac]                   ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class PoolableCallableStatement<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableCallableStatement.java:58: error: cannot find symbol<br/>
    [javac]     public PoolableCallableStatement(CallableStatement stmt, Object key, KeyedObjectPool pool, Connection conn) {<br/>
    [javac]                                                                          ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class PoolableCallableStatement<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnection.java:22: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.ObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnection.java:37: error: cannot find symbol<br/>
    [javac]     protected ObjectPool _pool = null;<br/>
    [javac]               ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnection<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnection.java:44: error: cannot find symbol<br/>
    [javac]     public PoolableConnection(Connection conn, ObjectPool pool) {<br/>
    [javac]                                                ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnection<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolableConnection.java:55: error: cannot find symbol<br/>
    [javac]     public PoolableConnection(Connection conn, ObjectPool pool, AbandonedConfig config) {<br/>
    [javac]                                                ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolableConnection<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolablePreparedStatement.java:26: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolablePreparedStatement.java:45: error: cannot find symbol<br/>
    [javac]     protected KeyedObjectPool _pool = null;<br/>
    [javac]               ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class PoolablePreparedStatement<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolablePreparedStatement.java:61: error: cannot find symbol<br/>
    [javac]     public PoolablePreparedStatement(PreparedStatement stmt, Object key, KeyedObjectPool pool, Connection conn) {<br/>
    [javac]                                                                          ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class PoolablePreparedStatement<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingConnection.java:27: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingConnection.java:28: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedPoolableObjectFactory;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingConnection.java:45: error: cannot find symbol<br/>
    [javac] public class PoolingConnection extends DelegatingConnection implements Connection, KeyedPoolableObjectFactory {<br/>
    [javac]                                                                                    ^<br/>
    [javac]   symbol: class KeyedPoolableObjectFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingConnection.java:47: error: cannot find symbol<br/>
    [javac]     protected KeyedObjectPool _pstmtPool = null;<br/>
    [javac]               ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class PoolingConnection<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingConnection.java:69: error: cannot find symbol<br/>
    [javac]     public PoolingConnection(Connection c, KeyedObjectPool pool) {<br/>
    [javac]                                            ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class PoolingConnection<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingDataSource.java:33: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.ObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingDataSource.java:54: error: cannot find symbol<br/>
    [javac]     public PoolingDataSource(ObjectPool pool) {<br/>
    [javac]                              ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolingDataSource<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingDataSource.java:58: error: cannot find symbol<br/>
    [javac]     public void setPool(ObjectPool pool) throws IllegalStateException, NullPointerException {<br/>
    [javac]                         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolingDataSource<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingDataSource.java:168: error: cannot find symbol<br/>
    [javac]     protected ObjectPool _pool = null;<br/>
    [javac]               ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolingDataSource<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingDriver.java:39: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.ObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingDriver.java:96: error: cannot find symbol<br/>
    [javac]     public synchronized ObjectPool getPool(String name) {<br/>
    [javac]                         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolingDriver<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingDriver.java:105: error: cannot find symbol<br/>
    [javac]     public synchronized ObjectPool getConnectionPool(String name) throws SQLException {<br/>
    [javac]                         ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolingDriver<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingDriver.java:143: error: cannot find symbol<br/>
    [javac]     public synchronized void registerPool(String name, ObjectPool pool) {<br/>
    [javac]                                                        ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolingDriver<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingDriver.java:256: error: cannot find symbol<br/>
    [javac]         private final ObjectPool pool;<br/>
    [javac]                       ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolGuardConnectionWrapper<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/PoolingDriver.java:259: error: cannot find symbol<br/>
    [javac]         PoolGuardConnectionWrapper(ObjectPool pool, Connection delegate) {<br/>
    [javac]                                    ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class PoolGuardConnectionWrapper<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/cpdsadapter/PooledConnectionImpl.java:36: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/cpdsadapter/PooledConnectionImpl.java:37: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedPoolableObjectFactory;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/cpdsadapter/PooledConnectionImpl.java:47: error: cannot find symbol<br/>
    [javac]         implements PooledConnection, KeyedPoolableObjectFactory {<br/>
    [javac]                                      ^<br/>
    [javac]   symbol: class KeyedPoolableObjectFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/cpdsadapter/PooledConnectionImpl.java:83: error: cannot find symbol<br/>
    [javac]     protected KeyedObjectPool pstmtPool = null;<br/>
    [javac]               ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class PooledConnectionImpl<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/cpdsadapter/PooledConnectionImpl.java:95: error: cannot find symbol<br/>
    [javac]     PooledConnectionImpl(Connection connection, KeyedObjectPool pool) {<br/>
    [javac]                                                 ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class PooledConnectionImpl<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/cpdsadapter/DriverAdapterCPDS.java:37: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/cpdsadapter/DriverAdapterCPDS.java:38: error: package org.apache.commons.pool.impl does not exist<br/>
    [javac] import org.apache.commons.pool.impl.GenericKeyedObjectPool;<br/>
    [javac]                                    ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/cpdsadapter/PoolablePreparedStatementStub.java:23: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/cpdsadapter/PoolablePreparedStatementStub.java:44: error: cannot find symbol<br/>
    [javac]             KeyedObjectPool pool, Connection conn) {<br/>
    [javac]             ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class PoolablePreparedStatementStub<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/CPDSConnectionFactory.java:33: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.ObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/CPDSConnectionFactory.java:34: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.PoolableObjectFactory;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/CPDSConnectionFactory.java:44: error: cannot find symbol<br/>
    [javac]         implements PoolableObjectFactory, ConnectionEventListener, PooledConnectionManager {<br/>
    [javac]                    ^<br/>
    [javac]   symbol: class PoolableObjectFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/CPDSConnectionFactory.java:53: error: cannot find symbol<br/>
    [javac]     private final ObjectPool _pool;<br/>
    [javac]                   ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class CPDSConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/CPDSConnectionFactory.java:82: error: cannot find symbol<br/>
    [javac]                                  ObjectPool pool,<br/>
    [javac]                                  ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class CPDSConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/CPDSConnectionFactory.java:105: error: cannot find symbol<br/>
    [javac]                                   ObjectPool pool,<br/>
    [javac]                                   ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class CPDSConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/CPDSConnectionFactory.java:124: error: cannot find symbol<br/>
    [javac]      public ObjectPool getPool() {<br/>
    [javac]             ^<br/>
    [javac]   symbol:   class ObjectPool<br/>
    [javac]   location: class CPDSConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/InstanceKeyDataSource.java:38: error: package org.apache.commons.pool.impl does not exist<br/>
    [javac] import org.apache.commons.pool.impl.GenericObjectPool;<br/>
    [javac]                                    ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/KeyedCPDSConnectionFactory.java:33: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/KeyedCPDSConnectionFactory.java:34: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.KeyedPoolableObjectFactory;<br/>
    [javac]                               ^<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/KeyedCPDSConnectionFactory.java:44: error: cannot find symbol<br/>
    [javac]     implements KeyedPoolableObjectFactory, ConnectionEventListener, PooledConnectionManager {<br/>
    [javac]                ^<br/>
    [javac]   symbol: class KeyedPoolableObjectFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/KeyedCPDSConnectionFactory.java:53: error: cannot find symbol<br/>
    [javac]     private final KeyedObjectPool _pool;<br/>
    [javac]                   ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class KeyedCPDSConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/KeyedCPDSConnectionFactory.java:74: error: cannot find symbol<br/>
    [javac]                                       KeyedObjectPool pool,<br/>
    [javac]                                       ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class KeyedCPDSConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/KeyedCPDSConnectionFactory.java:91: error: cannot find symbol<br/>
    [javac]                                       KeyedObjectPool pool,<br/>
    [javac]                                       ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class KeyedCPDSConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/KeyedCPDSConnectionFactory.java:106: error: cannot find symbol<br/>
    [javac]     public KeyedObjectPool getPool() {<br/>
    [javac]            ^<br/>
    [javac]   symbol:   class KeyedObjectPool<br/>
    [javac]   location: class KeyedCPDSConnectionFactory<br/>
    [javac] /home/sai/commons-dbcp-1.4-src/src/java/org/apache/commons/dbcp/datasources/PerUserPoolDataSource.java:36: error: package org.apache.commons.pool does not exist<br/>
    [javac] import org.apache.commons.pool.ObjectPool;<br/>
    [javac]                               ^<br/>
    [javac] Note: Some input files use or override a deprecated API.<br/>
    [javac] Note: Recompile with -Xlint:deprecation for details.<br/>
    [javac] Note: Some input files use unchecked or unsafe operations.<br/>
    [javac] Note: Recompile with -Xlint:unchecked for details.<br/>
    [javac] 100 errors<br/>
    [javac] 1 warning<br/>
<br/>
BUILD FAILED<br/>
/home/sai/commons-dbcp-1.4-src/build.xml:197: Compile failed; see the compiler error output for details.<br/>
<br/>
Total time: 4 seconds<br/>
<br/>
I tried compiling dbcp with java jdk1.6.0_29 and got the same errors
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    compile</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyne0n:
  </td>
                                            <td class="customfield_12310220">            <span title="29/Dec/11 17:00"><time class="livestamp allow-future" datetime="2011-12-29T17:00:10+0000">29/Dec/11 5:00 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170458
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      221698
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12534644" rel="12534644" data-issuekey="DBCP-373" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-373" href="https://issues.apache.org/jira/browse/DBCP-373">DBCP-373</a>
</td>
                                            <td class="summary"><p>
                Ability to configure upper bound on total number of connections managed by pooled data sources across all keys (user/password).
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Scott Cameron
    </td>
                                            <td class="creator">            Scott Cameron
    </td>
                                            <td class="created"> 11/Dec/11 07:20 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:08 </td>
                                            <td class="resolutiondate"> 13/Feb/14 21:55 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      For a discussion about this request, please refer to: http://www.mail-archive.com/user@commons.apache.org/msg07215.html.<br/>
<br/>
In general, it feels like SharedPoolDataSource and PerUserPoolDataSource could be made much more powerful and flexible by exposing as much of the configurability of the underlying ObjectPool as possible.  It seems to me that if consumers are going to want to customize behavior it is very likely that it is the ObjectPool that they will want to tweak.  Exposing the power of the inner pool would be really useful.<br/>
<br/>
But if that doesn&#39;t make sense, at least allowing a global cap on the total number of connections across all keys in the pool data source would solve at least the problem I describe in the mailing list post.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oen:
  </td>
                                            <td class="customfield_12310220">            <span title="13/Feb/14 21:55"><time class="livestamp allow-future" datetime="2014-02-13T21:55:28+0000">13/Feb/14 9:55 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90433
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      220365
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12533878" rel="12533878" data-issuekey="DBCP-372" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-372" href="https://issues.apache.org/jira/browse/DBCP-372">DBCP-372</a>
</td>
                                            <td class="summary"><p>
                Statement Leak occurs when batch update is used.
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Critical
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Naozumi Taromaru
    </td>
                                            <td class="creator">            Naozumi Taromaru
    </td>
                                            <td class="created"> 05/Dec/11 13:10 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 03/Feb/14 23:20 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-397,                                                DBCP-407                        </td>
                                            <td class="environment">      Oracle 11g
  </td>
                                            <td class="description">      org.apache.commons.dbcp.PoolablePreparedStatement#passivate()<br/>
execute clearBatch().<br/>
(DBCP-264)<br/>
<br/>
But this clearBatch() throw SQLException.<br/>
(DelegatingStatement#checkOpen() throw SQLException, because _closed is true.)<br/>
<br/>
The result,<br/>
the PoolablePreparedStatement doesn&#39;t return to pool, and<br/>
the PoolablePreparedStatement doesn&#39;t execute PreparedStatement#close().<br/>
<br/>
When a lot of data is processed, <br/>
in the case of Oracle<br/>
 * ORA-00604<br/>
 * ORA-01000<br/>
<br/>
occurs.<br/>
<br/>
<br/>
Proposal:<br/>
&quot;clearBatch();&quot; in passivate() method<br/>
changes as follows.<br/>
<br/>
batchAdded = false;<br/>
getInnermostDelegate().clearBatch();<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oev:
  </td>
                                            <td class="customfield_12310220">            <span title="07/Nov/12 16:06"><time class="livestamp allow-future" datetime="2012-11-07T16:06:08+0000">07/Nov/12 4:06 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90434
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      219604
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12533406" rel="12533406" data-issuekey="DBCP-371" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-371" href="https://issues.apache.org/jira/browse/DBCP-371">DBCP-371</a>
</td>
                                            <td class="summary"><p>
                DelegatingDatabaseMetaData
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Critical
</td>
                                            <td class="resolution">    Duplicate
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Fredrik Bertilsson
    </td>
                                            <td class="creator">            Fredrik Bertilsson
    </td>
                                            <td class="created"> 01/Dec/11 06:37 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 01/Dec/11 09:57 </td>
                                            <td class="resolutiondate"> 01/Dec/11 06:59 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Informix database
  </td>
                                            <td class="description">      When calling Connection.getMetaData() new objects of DelegationDatabaseMetaData and corresponding vendor specific objects (like IfxDatabaseMetaData) are created and never released for garabage collection. This bug seem to have been introduced in version 1.3. Version 1.2 does not have this problem.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyougn:
  </td>
                                            <td class="customfield_12310220">            <span title="01/Dec/11 06:59"><time class="livestamp allow-future" datetime="2011-12-01T06:59:48+0000">01/Dec/11 6:59 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      178954
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      219134
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12531223" rel="12531223" data-issuekey="DBCP-370" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-370" href="https://issues.apache.org/jira/browse/DBCP-370">DBCP-370</a>
</td>
                                            <td class="summary"><p>
                Please Release Commons Dbcp 1.4.1
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Yudhi Widyatama
    </td>
                                            <td class="creator">            Yudhi Widyatama
    </td>
                                            <td class="created"> 12/Nov/11 08:47 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 13/Nov/11 16:53 </td>
                                            <td class="resolutiondate"> 13/Nov/11 16:53 </td>
                                            <td class="versions">                        1.4.1            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Bugs like DBCP-333 causes problem when creating a project using Maven. Without a commons-dbcp 1.4.1 release, artifacts that could be downloaded from Maven repository is limited to 1.4, which still have the bug.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    maven</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyouvb:
  </td>
                                            <td class="customfield_12310220">            <span title="13/Nov/11 16:53"><time class="livestamp allow-future" datetime="2011-11-13T16:53:46+0000">13/Nov/11 4:53 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      179020
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      216960
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12526807" rel="12526807" data-issuekey="DBCP-369" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-369" href="https://issues.apache.org/jira/browse/DBCP-369">DBCP-369</a>
</td>
                                            <td class="summary"><p>
                Exception when using SharedPoolDataSource concurrently
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Michael Pradel
    </td>
                                            <td class="creator">            Michael Pradel
    </td>
                                            <td class="created"> 12/Oct/11 08:34 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:09 </td>
                                            <td class="resolutiondate"> 30/Jan/14 21:56 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Java Hotspot Server VM 1.6.0_07, Linux
  </td>
                                            <td class="description">      Hi,<br/>
<br/>
I get a ConcurrentModificationException when using instances of SharedPoolDataSource concurrently. The problem occurs when one thread calls setDataSourceName() while another thread calls close(), either on the same instance of SharedPoolDataSource or on different instances. I&#39;ll attach a short example program that leads to an exception for almost every run on my machine.<br/>
<br/>
The cause of the exception seems to be in InstanceKeyObjectFactory. registerNewInstance() is synchronized, but removeInstance() isn&#39;t. This allows concurrent accesses to the non-thread-safe &#39;instanceMap&#39;.<br/>
<br/>
Is this a bug? Or are SharedPoolDataSource and InstanceKeyObjectFactory not supposed to be thread-safe?<br/>
<br/>
Thanks!<br/>
<br/>
<br/>
import java.util.ArrayList;<br/>
import org.apache.commons.dbcp.datasources.SharedPoolDataSource;<br/>
<br/>
public class SharedPoolDataSourceTest {<br/>
<br/>
	public static void main(String[] args) {<br/>
		new SharedPoolDataSourceTest().run();<br/>
	}<br/>
	<br/>
	private void run() {<br/>
		final ArrayList&lt;SharedPoolDataSource&gt; dataSources = new ArrayList&lt;SharedPoolDataSource&gt;();<br/>
		for (int j = 0; j &lt; 10000; j++) {<br/>
			SharedPoolDataSource dataSource = new SharedPoolDataSource();<br/>
			dataSources.add(dataSource);<br/>
		}<br/>
	<br/>
		Thread t1 = new Thread(new Runnable() {<br/>
			public void run() {<br/>
				for (SharedPoolDataSource dataSource : dataSources) {<br/>
					dataSource.setDataSourceName(&quot;a&quot;);	<br/>
				}					<br/>
			}<br/>
		});<br/>
		Thread t2 = new Thread(new Runnable() {<br/>
			public void run() {<br/>
				for (SharedPoolDataSource dataSource : dataSources) {<br/>
					try { dataSource.close(); } catch (Exception e) {}	<br/>
				}<br/>
				<br/>
			}<br/>
		});<br/>
		t1.start();<br/>
		t2.start();<br/>
		try {<br/>
			t1.join();<br/>
			t2.join();<br/>
		} catch (InterruptedException ie) {}<br/>
	}	<br/>
}<br/>
<br/>
<br/>
<br/>
Exception in thread &quot;Thread-0&quot; java.util.ConcurrentModificationException<br/>
	at java.util.HashMap$HashIterator.nextEntry(HashMap.java:793)<br/>
	at java.util.HashMap$KeyIterator.next(HashMap.java:828)<br/>
	at org.apache.commons.dbcp.datasources.InstanceKeyObjectFactory.registerNewInstance(InstanceKeyObjectFactory.java:51)<br/>
	at org.apache.commons.dbcp.datasources.InstanceKeyDataSource.setDataSourceName(InstanceKeyDataSource.java:246)<br/>
	at potentialBugs.SharedPoolDataSourceTest$1.run(SharedPoolDataSourceTest.java:23)<br/>
	at java.lang.Thread.run(Thread.java:619)
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9of3:
  </td>
                                            <td class="customfield_12310220">            <span title="07/Nov/12 15:29"><time class="livestamp allow-future" datetime="2012-11-07T15:29:29+0000">07/Nov/12 3:29 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90435
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      73864
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12526527" rel="12526527" data-issuekey="DBCP-368" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-368" href="https://issues.apache.org/jira/browse/DBCP-368">DBCP-368</a>
</td>
                                            <td class="summary"><p>
                determine which connections to hold in pool by relative value
    </p>
</td>
                                            <td class="issuetype"> New Feature</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Philip Williams
    </td>
                                            <td class="creator">            Philip Williams
    </td>
                                            <td class="created"> 10/Oct/11 23:46 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:11 </td>
                                            <td class="resolutiondate"> 04/Feb/14 19:26 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-210                        </td>
                                            <td class="environment"></td>
                                            <td class="description">      Situation: a Firebird-Classic database (each connection has independent metadata cache), in a metadata-heavy environment; many &quot;quick&quot; actions will never force the database server to load full metadata, but a few will, in our case resulting in 200MB of metadata cache in memory (takes about 3 seconds to load, visible latency to the user); any connection that has done this is &quot;more valuable&quot; to us, and we&#39;d prefer to keep those connections in the pool, and remove idle connections which haven&#39;t incurred this cost yet and are relatively cheap to recreate later if our load increases. Doing this is preferable to forcing ALL connections to load metadata at start, as this means the pool will always have a startup cost (in time), and the server will likely use more memory than really necessary.<br/>
Proposal: add new configuration parameter; if set, run the SQL string and get back a single-column, single-row result-set containing an arbitrary &quot;value&quot; as determined by the connection; prefer to close the lowest(?)-value connections first, to get down to the configured minIdle. Would require querying each open connection, when the pool is over-full, to determine which ones are most valuable. If not set, use current algorithm (based on age?).
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ofb:
  </td>
                                            <td class="customfield_12310220">            <span title="04/Feb/14 19:26"><time class="livestamp allow-future" datetime="2014-02-04T19:26:29+0000">04/Feb/14 7:26 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90436
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      56993
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12525283" rel="12525283" data-issuekey="DBCP-367" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-367" href="https://issues.apache.org/jira/browse/DBCP-367">DBCP-367</a>
</td>
                                            <td class="summary"><p>
                minIdle&#39;s document is not correct
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Trivial
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Ken Tatsushita
    </td>
                                            <td class="creator">            Ken Tatsushita
    </td>
                                            <td class="created"> 30/Sep/11 10:11 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 21/Dec/11 23:03 </td>
                                            <td class="versions">                        2.0            </td>
                                            <td class="fixVersions">                        1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Hi experts! <br/>
<br/>
minIdle does not work when not running evictor thread.<br/>
However, there is no description about it in the document.<br/>
I think that need to add a note in document.<br/>
I made a patch.<br/>
<br/>
Best regards.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyndw7:
  </td>
                                            <td class="customfield_12310220">            <span title="21/Dec/11 23:03"><time class="livestamp allow-future" datetime="2011-12-21T23:03:56+0000">21/Dec/11 11:03 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170438
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      40986
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12524515" rel="12524515" data-issuekey="DBCP-366" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-366" href="https://issues.apache.org/jira/browse/DBCP-366">DBCP-366</a>
</td>
                                            <td class="summary"><p>
                Getting Exception when trying to get the PrepareStatement from Connection From DBCP Pool
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            saroj kumar balusu
    </td>
                                            <td class="creator">            saroj kumar balusu
    </td>
                                            <td class="created"> 24/Sep/11 17:33 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:11 </td>
                                            <td class="resolutiondate"> 03/Dec/13 10:48 </td>
                                            <td class="versions">                        1.2.2            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate">86400</td>
                                            <td class="timeestimate">86400</td>
                                            <td class="timespent"></td>
                                            <td class="workratio">            0%
    </td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Linux machine
  </td>
                                            <td class="description">      Using commons-dbcp-1.2.2.jar version with Tomcat version 6.0.29.<br/>
<br/>
Getting the following exception when trying to get the java.sql.PrepareStatement using a Connection from DBCP Pool:<br/>
{noformat}<br/>
java.sql.SQLException: Connection is closed.<br/>
        at org.apache.commons.dbcp.PoolingDriver$PoolGuardConnectionWrapper.checkOpen(PoolingDriver.java:263)<br/>
        at org.apache.commons.dbcp.PoolingDriver$PoolGuardConnectionWrapper.prepareStatement(PoolingDriver.java:366)<br/>
{noformat}<br/>
<br/>
This is the configuration we are using for creating Connection Pool from DBCP:<br/>
{code:java}<br/>
public static void setupDriver(String connectURI, String userName,<br/>
			String dbPassword, String maxActive, String minIdle,<br/>
			String maxWait, String poolName) throws Exception {<br/>
		GenericObjectPool.Config config = new GenericObjectPool.Config();<br/>
		config.maxActive = Integer.parseInt(maxActive);<br/>
		config.minIdle = Integer.parseInt(minIdle);<br/>
		config.maxWait = Integer.parseInt(maxWait);<br/>
		config.whenExhaustedAction = 2;<br/>
		config.minEvictableIdleTimeMillis = 1800000;<br/>
		config.timeBetweenEvictionRunsMillis = 1800000;<br/>
		config.numTestsPerEvictionRun = 3;<br/>
		config.testOnBorrow = true;<br/>
		config.testOnReturn = true;<br/>
		config.testWhileIdle = true;<br/>
		ObjectPool connectionPool = new GenericObjectPool(null, config);<br/>
		ConnectionFactory connectionFactory = new DriverManagerConnectionFactory(<br/>
				connectURI, userName, dbPassword);<br/>
		PoolableConnectionFactory poolableConnectionFactory = new PoolableConnectionFactory(<br/>
				connectionFactory, connectionPool, null, null, false, true);<br/>
		poolableConnectionFactory.setValidationQuery(&quot;select 1 from dual&quot;);<br/>
		driver = new PoolingDriver();<br/>
		driver.registerPool(poolName, connectionPool);<br/>
<br/>
		driver.setAccessToUnderlyingConnectionAllowed(true);<br/>
		// PoolingDataSource dataSource = new PoolingDataSource(connectionPool);<br/>
		// return dataSource;<br/>
}<br/>
{code}<br/>
<br/>
The following code is used to get the Connection:<br/>
{code:java}<br/>
public java.sql.Connection getConnection(poolName) {<br/>
        Connection con = DriverManager.getConnection(&quot;jdbc:apache:commons:dbcp:&quot;+poolName);<br/>
        return con;				<br/>
}<br/>
{code}<br/>
<br/>
The following code is used to release the connection:<br/>
{code:java}<br/>
public void release(Connection conn) throws DBException {<br/>
	try {<br/>
		conn.close();<br/>
	} catch (Exception e) {<br/>
		throw new Exception(e.getMessage(), e);<br/>
	}<br/>
}<br/>
{code}<br/>
<br/>
Can you let us know what might be the exact reason for the following exception?
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     0%
</td>
                                            <td class="aggregateprogress">     0%
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate">86400</td>
                                            <td class="aggregatetimeoriginalestimate">86400</td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ofj:
  </td>
                                            <td class="customfield_12310220">            <span title="03/Dec/13 10:48"><time class="livestamp allow-future" datetime="2013-12-03T10:48:21+0000">03/Dec/13 10:48 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90437
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      59430
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12523354" rel="12523354" data-issuekey="DBCP-365" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-365" href="https://issues.apache.org/jira/browse/DBCP-365">DBCP-365</a>
</td>
                                            <td class="summary"><p>
                StackOverflowError SharedPoolDataSource.getPooledConnectionAndInfo() Postgresql
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Won&#39;t Fix
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Axl
    </td>
                                            <td class="creator">            Axl
    </td>
                                            <td class="created"> 16/Sep/11 17:24 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:11 </td>
                                            <td class="resolutiondate"> 30/Jan/14 16:49 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Windows XP 64-bit multi-threaded
  </td>
                                            <td class="description">      <br/>
This might be a problem with the JDBC driver for PostgreSQL 9.1 but it also shows up here. Since this is a StackOverflowError there isn&#39;t much information about what specifically is causing this. I&#39;m guessing it&#39;s a Class.forName() for one of the org.postgresql.* classes but not sure which one. The Class.forName() goes into a loop which throws the StackOverflowError.<br/>
<br/>
<br/>
SharedPoolDataSource.getPooledConnectionAndInfo(String, String) line: 174	<br/>
SharedPoolDataSource(InstanceKeyDataSource).getConnection(String, String) line: 701	<br/>
SharedPoolDataSource(InstanceKeyDataSource).getConnection() line: 676	<br/>
<br/>
<br/>
<br/>
			spds = new org.apache.commons.dbcp.datasources.SharedPoolDataSource();<br/>
			cpds = new org.apache.commons.dbcp.cpdsadapter.DriverAdapterCPDS();<br/>
			cpds.setDriver(&quot;org.postgresql.Driver&quot;);<br/>
			cpds.setUrl(&quot;jdbc:postgresql://localhost:1234/mydatabasename&quot;);<br/>
			cpds.setUser(&quot;myuser&quot;);<br/>
			cpds.setPassword(&quot;mypass&quot;);<br/>
			spds.setConnectionPoolDataSource(cpds);<br/>
			spds.setMaxActive(30);<br/>
			spds.setMaxWait(50);<br/>
				<br/>
			conn = spds.getConnection();<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    JDBC, postgresql</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ofr:
  </td>
                                            <td class="customfield_12310220">            <span title="17/Sep/11 23:33"><time class="livestamp allow-future" datetime="2011-09-17T23:33:25+0100">17/Sep/11 11:33 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90438
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      59668
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12520023" rel="12520023" data-issuekey="DBCP-364" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-364" href="https://issues.apache.org/jira/browse/DBCP-364">DBCP-364</a>
</td>
                                            <td class="summary"><p>
                BasicDataSourceFactory#createDataSource return signature should be BasicDataSourceFactory so that caller can invoke methods not declared in DataSource (e.g., close())
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Trivial
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            ori
    </td>
                                            <td class="creator">            ori
    </td>
                                            <td class="created"> 24/Aug/11 22:21 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 03/Feb/14 14:41 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      BasicDataSourceFactory#createDataSource currently returns a DataSource instance.<br/>
<br/>
It should a return type of BasicDataSourceFactory. Otherwise the caller has to cast it to invoke close (and other methods specific to the implementation).
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ofz:
  </td>
                                            <td class="customfield_12310220">            <span title="03/Feb/14 14:41"><time class="livestamp allow-future" datetime="2014-02-03T14:41:55+0000">03/Feb/14 2:41 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90439
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      63845
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12509747" rel="12509747" data-issuekey="DBCP-363" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-363" href="https://issues.apache.org/jira/browse/DBCP-363">DBCP-363</a>
</td>
                                            <td class="summary"><p>
                dbcp bundle should use DynamicImport
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Won&#39;t Fix
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Felix Mayerhuber
    </td>
                                            <td class="creator">            Felix Mayerhuber
    </td>
                                            <td class="created"> 09/Jun/11 19:41 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:10 </td>
                                            <td class="resolutiondate"> 04/Feb/14 14:30 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-386                        </td>
                                            <td class="environment"></td>
                                            <td class="description">      The bundle provided in the maven central of the commons.dbcp doesn&#39;t have a DynamicImport defined. This resolves in following error:<br/>
If you want to use a BasicDataSource class as dataSource and the class is provided by the osgi environment (equinox, ...) the dataSource is not able to be created due to a ClassNotFoundException. If the bundle would have set DynamicImport it works. (I had to change from your bundle to the commons.dbcp bundle provided by servicemix, because there the DynamicImport is set)
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9og7:
  </td>
                                            <td class="customfield_12310220">            <span title="11/Jun/11 09:52"><time class="livestamp allow-future" datetime="2011-06-11T09:52:53+0100">11/Jun/11 9:52 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90440
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      71410
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12507854" rel="12507854" data-issuekey="DBCP-362" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-362" href="https://issues.apache.org/jira/browse/DBCP-362">DBCP-362</a>
</td>
                                            <td class="summary"><p>
                Cannot create PoolableConnectionFactory when system proxy is defined.
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Not a Problem
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Karol Krzyzak
    </td>
                                            <td class="creator">            Karol Krzyzak
    </td>
                                            <td class="created"> 20/May/11 10:12 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 30/May/11 11:37 </td>
                                            <td class="resolutiondate"> 30/May/11 11:37 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      w7(64b), hibernate 3.5.5, spring 2.5.6, dbcp  1.4, pool 1.5.6
  </td>
                                            <td class="description">      19 maj 2011 09:03:57,458 INFO [JCLLoggerAdapter.info(265)] - Initializing connection provider: org.springframework.orm.hibernate3.LocalDataSource ConnectionProvider<br/>
After that line my application hangs, but only if i set poxy server* in internet connection.<br/>
<br/>
I have a database in local network.<br/>
Only I meant here is that if I set the internet connection proxy application hangs on a line that I mentioned above. <br/>
<br/>
*Set proxy server:<br/>
On the Tools menu in Internet Explorer, click Internet Options, click the Connections tab, and then click LAN Settings.<br/>
Under Proxy server, click to select the Use a proxy server for your LAN check box.<br/>
In the Address box, type the IP address of the proxy server.<br/>
In the Port box, type the port number that is used by the proxy server for client connections (by default, 8080).<br/>
Click OK to close the LAN Settings dialog box.<br/>
Click OK again to close the Internet Options dialog box.<br/>
<br/>
I even try select and unselect the Bypass proxy server for local addresses check box but it doesn&#39;t metter. <br/>
<br/>
When i turn of proxy in IE eveything works ok.<br/>
<br/>
I started debugin....<br/>
First of all after 5minutes i have got exception...<br/>
    org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (JZ006: Caught IOException: java.net.SocketException: Malformed reply from SOCKS server)<br/>
    	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1225)<br/>
    	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:880)<br/>
    	at info.kkrzyzak.sunfire.dao.utils.DecryptingDataSource.getConnection(DecryptingDataSource.java:36)<br/>
    	at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:82)<br/>
    	at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:114)<br/>
    	at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2163)<br/>
    	at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2159)<br/>
    	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1383)<br/>
    	at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)<br/>
    	at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:814)<br/>
    	at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:732)<br/>
    	at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)<br/>
    	at java.security.AccessController.doPrivileged(Native Method)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)<br/>
    	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)<br/>
    	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:269)<br/>
    	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1245)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)<br/>
    	at java.security.AccessController.doPrivileged(Native Method)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)<br/>
    	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)<br/>
    	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:671)<br/>
    	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:610)<br/>
    	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:412)<br/>
    	at org.springframework.beans.factory.annotation.InjectionMetadata.injectFields(InjectionMetadata.java:105)<br/>
    	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessAfterInstantiation(AutowiredAnnotationBeanPostProcessor.java:240)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:959)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)<br/>
    	at java.security.AccessController.doPrivileged(Native Method)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)<br/>
    	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)<br/>
    	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:671)<br/>
    	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:610)<br/>
    	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:412)<br/>
    	at org.springframework.beans.factory.annotation.InjectionMetadata.injectFields(InjectionMetadata.java:105)<br/>
    	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessAfterInstantiation(AutowiredAnnotationBeanPostProcessor.java:240)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:959)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)<br/>
    	at java.security.AccessController.doPrivileged(Native Method)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)<br/>
    	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)<br/>
    	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)<br/>
    	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:671)<br/>
    	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:610)<br/>
    	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:412)<br/>
    	at org.springframework.beans.factory.annotation.InjectionMetadata.injectFields(InjectionMetadata.java:105)<br/>
    	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessAfterInstantiation(AutowiredAnnotationBeanPostProcessor.java:240)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:959)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)<br/>
    	at java.security.AccessController.doPrivileged(Native Method)<br/>
    	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)<br/>
....<br/>
<br/>
I was based on the information contained in article &quot;Java Networking and Proxies&quot; (javase/6/docs/technotes/guides/net)<br/>
I turn off using proxy.<br/>
<br/>
I think for some reason the JRE tries to talk SOCKS protocol to a host, which is not a SOCKS proxy.<br/>
For clearly, I haven&#39;t SOCKS proxy server.<br/>
<br/>
Still debuging....<br/>
<br/>
(BasicDataSource.java)<br/>
It hangs in method protected static void validateConnectionFactory(PoolableConnectionFactor y connectionFactory) when try to call conn = (Connection) connectionFactory.makeObject();<br/>
<br/>
and as I mentioned after 5minutes throw above exception.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    PoolableConnectionFactory, proxy</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyovdz:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      179104
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114636
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12507423" rel="12507423" data-issuekey="DBCP-361" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-361" href="https://issues.apache.org/jira/browse/DBCP-361">DBCP-361</a>
</td>
                                            <td class="summary"><p>
                BasicManagedDataSource optional transaction enlistment
    </p>
</td>
                                            <td class="issuetype"> New Feature</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Won&#39;t Fix
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Aaron Hamid
    </td>
                                            <td class="creator">            Aaron Hamid
    </td>
                                            <td class="created"> 16/May/11 23:02 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:10 </td>
                                            <td class="resolutiondate"> 05/Mar/14 11:46 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      It would be nice to not automatically enlist connections in a transaction.  I have found automatic enlistment can be problematic when using another transaction API such as Spring&#39;s declarative transactions (JtaTransactionManager).  It appears Spring may create a second, wrapping transaction.  With Oracle this leads to: ORA-02089: COMMIT is not allowed in a subordinate session.<br/>
<br/>
E.g. see Bitronix setAutomaticEnlistingEnabled http://btm.codehaus.org/api/1.3.3/bitronix/tm/resource/common/ResourceBean.html#setAutomaticEnlistingEnabled(boolean)
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ogf:
  </td>
                                            <td class="customfield_12310220">            <span title="14/Feb/14 15:32"><time class="livestamp allow-future" datetime="2014-02-14T15:32:58+0000">14/Feb/14 3:32 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90441
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114635
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12507417" rel="12507417" data-issuekey="DBCP-360" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-360" href="https://issues.apache.org/jira/browse/DBCP-360">DBCP-360</a>
</td>
                                            <td class="summary"><p>
                BasicManagedDataSource fails with OracleXADataSource
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Aaron Hamid
    </td>
                                            <td class="creator">            Aaron Hamid
    </td>
                                            <td class="created"> 16/May/11 22:39 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 16/May/11 22:55 </td>
                                            <td class="resolutiondate"> 16/May/11 22:55 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-279,                                                DBCP-289                        </td>
                                            <td class="environment"></td>
                                            <td class="description">      Using the same JDBC url and settings as in non-XA (driverClassName) mode, the BasicManagedDataSource will fail when it attempts to obtain an Oracle connection when using the Oracle oracle.jdbc.xa.client.OracleXADataSource datasource class.<br/>
<br/>
It appears that BasicManagedDataSource.createConnectionFactory is never actually setting the URL (I can&#39;t tell where if at all it is set, the exception must occur before then).<br/>
<br/>
&lt;bean id=&quot;riceDataSource&quot; class=&quot;org.apache.commons.dbcp.managed.BasicManagedDataSource&quot; destroy-method=&quot;close&quot;&gt;<br/>
    &lt;property name=&quot;transactionManager&quot; ref=&quot;jotm&quot; /&gt;<br/>
    &lt;property name=&quot;url&quot; value=&quot;${datasource.url}&quot;/&gt;<br/>
    &lt;property name=&quot;XADataSource&quot; value=&quot;${xadatasource.class}&quot;/&gt;<br/>
    &lt;property name=&quot;maxActive&quot; value=&quot;${datasource.pool.maxActive}&quot;/&gt;<br/>
    &lt;property name=&quot;minIdle&quot; value=&quot;${datasource.minIdle}&quot; /&gt;<br/>
    &lt;property name=&quot;initialSize&quot; value=&quot;${datasource.initialSize}&quot;/&gt;<br/>
    &lt;property name=&quot;validationQuery&quot; value=&quot;${datasource.pool.validationQuery}&quot;/&gt;<br/>
    &lt;property name=&quot;username&quot; value=&quot;${datasource.username}&quot; /&gt;<br/>
    &lt;property name=&quot;password&quot; value=&quot;${datasource.password}&quot; /&gt;<br/>
    &lt;property name=&quot;accessToUnderlyingConnectionAllowed&quot; value=&quot;${datasource.accessToUnderlyingConnectionAllowed}&quot;/&gt;<br/>
    &lt;property name=&quot;connectionProperties&quot;&gt;&lt;value&gt;driverType=thin;portNumber=1521&lt;/value&gt;&lt;/property&gt; &lt;!-- as rumored on the internets --&gt;<br/>
&lt;/bean&gt;<br/>
<br/>
org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is java.sql.SQLException: Cannot create PoolableConnectionFactory (Invalid Oracle URL specified: OracleDataSource.makeURL)<br/>
Caused by: java.sql.SQLException: Cannot create PoolableConnectionFactory (Invalid Oracle URL specified: OracleDataSource.makeURL)<br/>
	at org.apache.commons.dbcp.managed.BasicManagedDataSource.createPoolableConnectionFactory(BasicManagedDataSource.java:200)<br/>
	at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)<br/>
	at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)<br/>
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:113)<br/>
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:79)<br/>
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:276)<br/>
	at ConnectionTest$1.doInTransaction(ConnectionTest.java:79)<br/>
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:127)<br/>
	at ConnectionTest.testConnectionRecovery(ConnectionTest.java:76)<br/>
	at ConnectionTest.testOracleBMDSXARecovery(ConnectionTest.java:58)<br/>
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)<br/>
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br/>
	at java.lang.reflect.Method.invoke(Method.java:616)<br/>
	at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:59)<br/>
	at org.junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java:98)<br/>
	at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:79)<br/>
	at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:87)<br/>
	at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:77)<br/>
	at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:42)<br/>
	at org.junit.internal.runners.JUnit4ClassRunner.invokeTestMethod(JUnit4ClassRunner.java:88)<br/>
	at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)<br/>
	at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)<br/>
	at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)<br/>
	at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)<br/>
	at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)<br/>
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)<br/>
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)<br/>
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)<br/>
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)<br/>
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)<br/>
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)<br/>
Caused by: java.sql.SQLException: Invalid Oracle URL specified: OracleDataSource.makeURL<br/>
	at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)<br/>
	at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)<br/>
	at oracle.jdbc.pool.OracleDataSource.makeURL(OracleDataSource.java:1353)<br/>
	at oracle.jdbc.pool.OracleDataSource.getURL(OracleDataSource.java:1064)<br/>
	at oracle.jdbc.xa.client.OracleXADataSource.getPooledConnection(OracleXADataSource.java:204)<br/>
	at oracle.jdbc.xa.client.OracleXADataSource.getXAConnection(OracleXADataSource.java:159)<br/>
	at oracle.jdbc.xa.client.OracleXADataSource.getXAConnection(OracleXADataSource.java:133)<br/>
	at org.apache.commons.dbcp.managed.DataSourceXAConnectionFactory.createConnection(DataSourceXAConnectionFactory.java:103)<br/>
	at org.apache.commons.dbcp.managed.PoolableManagedConnectionFactory.makeObject(PoolableManagedConnectionFactory.java:103)<br/>
	at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)<br/>
	at org.apache.commons.dbcp.managed.BasicManagedDataSource.createPoolableConnectionFactory(BasicManagedDataSource.java:196)<br/>
	... 31 more<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyouu7:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      179015
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114634
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12505998" rel="12505998" data-issuekey="DBCP-359" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-359" href="https://issues.apache.org/jira/browse/DBCP-359">DBCP-359</a>
</td>
                                            <td class="summary"><p>
                DelegatingConnection.equals fails if both delegates are null
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">            Joerg Schaible
    </td>
                                            <td class="reporter">            Joerg Schaible
    </td>
                                            <td class="creator">            Joerg Schaible
    </td>
                                            <td class="created"> 03/May/11 01:38 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 03/May/11 01:41 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      {code:java}<br/>
DelegatingConnection conn3 = new DelegatingConnection(null);<br/>
assertTrue(conn3.equals(new DelegatingConnection(null)));<br/>
{code}<br/>
<br/>
Test fails.<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyndp3:
  </td>
                                            <td class="customfield_12310220"></td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170406
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114633
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12505732" rel="12505732" data-issuekey="DBCP-358" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-358" href="https://issues.apache.org/jira/browse/DBCP-358">DBCP-358</a>
</td>
                                            <td class="summary"><p>
                Equals implementations in DelegatingXxx classes are not symmetric
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Phil Steitz
    </td>
                                            <td class="creator">            Phil Steitz
    </td>
                                            <td class="created"> 28/Apr/11 23:14 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:13 </td>
                                            <td class="resolutiondate"> 04/Feb/14 13:45 </td>
                                            <td class="versions">                        1.2,                     1.2.2,                     1.3,                     1.4            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-356,                                                DBCP-317                        </td>
                                            <td class="environment"></td>
                                            <td class="description">      For reasons unclear to me, DelegatingConnection, DelegatingStatement, PoolGuardConnectionWrappers and other DBCP classes implement equals so that the wrapping class is considered equal to its innermost delegate JDBC object.  This makes equals asymmetric when applied to a wrapper and its wrapped JDBC object - wrapper.equals(delegate) returns true, but delegate.equals(wrapper) will in general return false.<br/>
<br/>
I am pretty sure that DBCP itself does not rely on this bugged behavior, so I am inclined to fix it, making equals an equivalence relation on wrapper instances, with two considered equal iff their innermost delegates are equal.  I can&#39;t imagine use cases where the bugged behavior is required.  Can anyone else?
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ogn:
  </td>
                                            <td class="customfield_12310220">            <span title="03/May/11 01:32"><time class="livestamp allow-future" datetime="2011-05-03T01:32:08+0100">03/May/11 1:32 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90442
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114632
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12505412" rel="12505412" data-issuekey="DBCP-357" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-357" href="https://issues.apache.org/jira/browse/DBCP-357">DBCP-357</a>
</td>
                                            <td class="summary"><p>
                Connection validationQuery mechanism should be replaced by new method connection#isValid()
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Philippe Mouawad
    </td>
                                            <td class="creator">            Philippe Mouawad
    </td>
                                            <td class="created"> 28/Apr/11 13:08 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:12 </td>
                                            <td class="resolutiondate"> 17/Feb/14 13:22 </td>
                                            <td class="versions">                        1.4,                     1.4.1            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">3</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-401                        </td>
                                            <td class="environment"></td>
                                            <td class="description">      Hello,<br/>
Current method of connection validation relies on validationQuery.<br/>
This method has a rather big performance impact on the DB (CPU, for example 3% with SELECT 1 FROM DUAL even with Oracle 10G FAST DUAL) and make an additional query for each borrow (when testOnBorrow is true).<br/>
Wouldn&#39;t it be better to use new JDBC 4 method isValid which relies on Driver check ? (Oracle would for example use its internal method ping)<br/>
<br/>
Thank you<br/>
Philippe<br/>
http://www.ubik-ingenierie.com
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    PERFORMANCE</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ogv:
  </td>
                                            <td class="customfield_12310220">            <span title="30/Apr/11 18:33"><time class="livestamp allow-future" datetime="2011-04-30T18:33:07+0100">30/Apr/11 6:33 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90443
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114631
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12502264" rel="12502264" data-issuekey="DBCP-356" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-356" href="https://issues.apache.org/jira/browse/DBCP-356">DBCP-356</a>
</td>
                                            <td class="summary"><p>
                ManagedDataSource doesn&#39;t work with an active transaction in progress on IBM JDK 6+
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Cannot Reproduce
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            an envy guest
    </td>
                                            <td class="creator">            an envy guest
    </td>
                                            <td class="created"> 24/Mar/11 08:36 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:12 </td>
                                            <td class="resolutiondate"> 03/Feb/14 14:33 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-358                        </td>
                                            <td class="environment">      IBM JDK 6<br/>
java version &quot;1.6.0&quot;<br/>
Java(TM) SE Runtime Environment (build pwa6460sr9fp1-20110208_03(SR9 FP1))<br/>
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows 7 amd64-64 jvmwa6460sr9-20110203_74623 (JIT enabled, AOT enabled)<br/>
J9VM - 20110203_074623<br/>
JIT  - r9_20101028_17488ifx3<br/>
GC   - 20101027_AA)<br/>
JCL  - 20110203_01<br/>
<br/>
commons-dbcp of version 1.3 / 1.4
  </td>
                                            <td class="description">      When using IBM JDK 6+ and trying to build commons-dbcp, these tests fail:<br/>
<br/>
org.apache.commons.dbcp.managed.TestBasicManagedDataSource<br/>
org.apache.commons.dbcp.managed.TestManagedDataSourceInTx<br/>
<br/>
with error:<br/>
<br/>
java.sql.SQLException: Connection does not have a registered XAResource null, UserName=null, null<br/>
	at org.apache.commons.dbcp.managed.TransactionRegistry.getXAResource(TransactionRegistry.java:81)<br/>
	at org.apache.commons.dbcp.managed.TransactionContext.setSharedConnection(TransactionContext.java:88)<br/>
	at org.apache.commons.dbcp.managed.ManagedConnection.updateTransactionStatus(ManagedConnection.java:131)<br/>
	at org.apache.commons.dbcp.managed.ManagedConnection.&lt;init&gt;(ManagedConnection.java:55)<br/>
	at org.apache.commons.dbcp.managed.ManagedDataSource.getConnection(ManagedDataSource.java:76)<br/>
	at org.apache.commons.dbcp.managed.TestManagedDataSource.getConnection(TestManagedDataSource.java:53)<br/>
	at org.apache.commons.dbcp.TestConnectionPool.newConnection(TestConnectionPool.java:81)<br/>
	at org.apache.commons.dbcp.managed.TestManagedDataSourceInTx.testMaxActive(TestManagedDataSourceInTx.java:102)<br/>
<br/>
When used in conjunction with OpenEJB 3.1.4 examples, the error is the same.<br/>
<br/>
The problem disappears when switched to Oracle JDK 1.6.24 (so, all tests are passed and OpenEJB examples are working).<br/>
<br/>
I beleive this has something to do with differences in java.lang.ref.WeakReference implementations between IBM and Oracle JDKs, which was already discussed here:<br/>
http://www.mail-archive.com/dev@commons.apache.org/msg13107.html
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    ibm, xaresource</td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oh3:
  </td>
                                            <td class="customfield_12310220">            <span title="30/Apr/11 18:40"><time class="livestamp allow-future" datetime="2011-04-30T18:40:14+0100">30/Apr/11 6:40 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90444
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114630
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    3
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12502250" rel="12502250" data-issuekey="DBCP-355" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-355" href="https://issues.apache.org/jira/browse/DBCP-355">DBCP-355</a>
</td>
                                            <td class="summary"><p>
                DataSourceXAConnectionFactory does not store the XAConnection
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Clement Pang
    </td>
                                            <td class="creator">            Clement Pang
    </td>
                                            <td class="created"> 24/Mar/11 03:03 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:12 </td>
                                            <td class="resolutiondate"> 03/Feb/14 13:52 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">4</td>
                                            <td class="watches">3</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-327                        </td>
                                            <td class="environment">      MysqlXADataSource passed to BasicManagedDataSource
  </td>
                                            <td class="description">      We have been diagnosing a leak with DBCP and XA mySQL and discovered that the mySQL driver expects close() to be invoked on the XAConnection obtained from xaDataSource.getXAConnection() instead of the java.sql.Connection returned by xaConnection.getConnection();<br/>
<br/>
The following code snippet in DataSourceXAConnectionFactory illustrates how the XAConnection is lost:<br/>
<br/>
    public Connection createConnection() throws SQLException {<br/>
        // create a new XAConection<br/>
        XAConnection xaConnection;<br/>
        if (username == null) {<br/>
            xaConnection = xaDataSource.getXAConnection();<br/>
        } else {<br/>
            xaConnection = xaDataSource.getXAConnection(username, password);<br/>
        }<br/>
<br/>
        // get the real connection and XAResource from the connection<br/>
        Connection connection = xaConnection.getConnection();<br/>
        XAResource xaResource = xaConnection.getXAResource();<br/>
<br/>
        // register the xa resource for the connection<br/>
        transactionRegistry.registerConnection(connection, xaResource);<br/>
<br/>
        return connection;<br/>
    }<br/>
<br/>
In the code snippet above, the XAConnection is basically discarded after using it to obtain the java.sql.Connection and XAResource. It would be ideal if it actually associates the XAConnection in the transactionRegistry as well so that when PooledManagedConnection handles reallyClose(), it can also invoke close() on the XAConnection by interrogating the TransactionRegistry for the actual XAConnection to close.<br/>
<br/>
This may be something that&#39;s mySQL specific.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ohb:
  </td>
                                            <td class="customfield_12310220">            <span title="17/Apr/13 22:57"><time class="livestamp allow-future" datetime="2013-04-17T22:57:00+0100">17/Apr/13 10:57 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90445
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114629
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12500943" rel="12500943" data-issuekey="DBCP-354" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-354" href="https://issues.apache.org/jira/browse/DBCP-354">DBCP-354</a>
</td>
                                            <td class="summary"><p>
                released dbcp 1.0 pom is broken
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Jeff Hodges
    </td>
                                            <td class="creator">            Jeff Hodges
    </td>
                                            <td class="created"> 09/Mar/11 21:00 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:12 </td>
                                            <td class="resolutiondate"> 09/Mar/11 23:51 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      The pom file for dbcp 1.0 contains the version &quot;1.0-dev&quot;, breaking dependency resolution for jars (like naming-config 0.8) that depend on it.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyndnz:
  </td>
                                            <td class="customfield_12310220">            <span title="09/Mar/11 23:49"><time class="livestamp allow-future" datetime="2011-03-09T23:49:00+0000">09/Mar/11 11:49 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170401
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114628
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12498194" rel="12498194" data-issuekey="DBCP-353" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-353" href="https://issues.apache.org/jira/browse/DBCP-353">DBCP-353</a>
</td>
                                            <td class="summary"><p>
                When DB Restarts(Bounce) the number ESTABLISHED DB connections exceeds its maximum configured limit.
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Cannot Reproduce
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Radhika Zawar
    </td>
                                            <td class="creator">            Radhika Zawar
    </td>
                                            <td class="created"> 10/Feb/11 05:58 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:12 </td>
                                            <td class="resolutiondate"> 11/Dec/13 20:42 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-342                        </td>
                                            <td class="environment"></td>
                                            <td class="description">      We have set Max connections configuration to 100. There was heavy load on application. When we restarted DB in between, number of connections exceeds from 100 to 200,250...
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ohj:
  </td>
                                            <td class="customfield_12310220">            <span title="10/Feb/11 15:15"><time class="livestamp allow-future" datetime="2011-02-10T15:15:21+0000">10/Feb/11 3:15 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90446
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114627
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12497342" rel="12497342" data-issuekey="DBCP-352" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-352" href="https://issues.apache.org/jira/browse/DBCP-352">DBCP-352</a>
</td>
                                            <td class="summary"><p>
                Repeated calls to getMetadata in a transaction leads to performance degredation
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Critical
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Derek Hulley
    </td>
                                            <td class="creator">            Derek Hulley
    </td>
                                            <td class="created"> 01/Feb/11 14:45 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 24/Apr/11 00:57 </td>
                                            <td class="versions">                        1.2.2,                     1.3.1,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-330                        </td>
                                            <td class="environment">      PostgreSQL, MySQL, JDK 1.6
  </td>
                                            <td class="description">      During long-running transactions that utilize conditional logic based on the database metadata, it is possible to get thousands of calls to Connection.getMetaData.  An ArrayList is built up containing objects which are never removed (this is the cause of DBCP-330).  However, the array is shared with all other PreparedStatements, so the array scan and modification time keeps rising as the transaction progresses.<br/>
<br/>
I will attempt to attach an Eclipse project; profiling (or even a few JStacks) will show that most of the time is spent scanning the cluttered and growing array for objects to remove.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyndlz:
  </td>
                                            <td class="customfield_12310220">            <span title="01/Feb/11 14:52"><time class="livestamp allow-future" datetime="2011-02-01T14:52:31+0000">01/Feb/11 2:52 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170392
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114626
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    2
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12497329" rel="12497329" data-issuekey="DBCP-351" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-351" href="https://issues.apache.org/jira/browse/DBCP-351">DBCP-351</a>
</td>
                                            <td class="summary"><p>
                setAutoCommit called too many times
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            OD
    </td>
                                            <td class="creator">            OD
    </td>
                                            <td class="created"> 01/Feb/11 12:47 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:11 </td>
                                            <td class="resolutiondate"> 14/Feb/14 11:47 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      passivateObject in PoolableConnectionFactory sets autoCommit to true, even if defaultAutoCommit is set to false. This results in two extra db queries for every use of the connection (set false, do work, set true). This creates a significant amount of overhead, even if the connection is never even used.<br/>
<br/>
I propose it be changed to:<br/>
<br/>
if(conn.getAutoCommit() != _defaultAutoCommit)<br/>
{<br/>
  conn.setAutoCommit(_defaultAutoCommit);<br/>
}<br/>
<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ohr:
  </td>
                                            <td class="customfield_12310220">            <span title="01/Feb/11 15:34"><time class="livestamp allow-future" datetime="2011-02-01T15:34:25+0000">01/Feb/11 3:34 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90447
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      67452
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12492162" rel="12492162" data-issuekey="DBCP-350" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-350" href="https://issues.apache.org/jira/browse/DBCP-350">DBCP-350</a>
</td>
                                            <td class="summary"><p>
                Problem with DBCP 1.3 /jdk 6 and oracle spatial
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Not a Problem
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Nils Hildebrand
    </td>
                                            <td class="creator">            Nils Hildebrand
    </td>
                                            <td class="created"> 06/Dec/10 14:47 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:11 </td>
                                            <td class="resolutiondate"> 11/Aug/11 10:58 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      CentOS 5.5 x86_64, Oracle JDK 1.6u22 32bit, Tomcat 5.5.31, ojdbc6.jar
  </td>
                                            <td class="description">      We have a GIS-application running on Tomcat 5.5. As webserver we are using<br/>
Apache httpd 2.2 connected to tomcat via ajp (mod_proxy_ajp).<br/>
<br/>
The application worked fine with Tomcat 5.5.28 until we tried to upgrade to Tomcat 5.5.31.<br/>
<br/>
After the upgrade we get - in certain situations a:<br/>
java.io.IOException: org.hibernatespatial.helper.FinderException: Couldn&#39;t get<br/>
at the OracleSpatial Connection object from the PreparedStatement.<br/>
<br/>
After looking through the Tomcat 5.5 changelogs we stumbled across a change<br/>
made in 5.5.30: Upgrade to DBCP 1.3.<br/>
<br/>
I can affirm now that the problem is gone when downgrading to DBCP 1.2.2.<br/>
The same problem occurs when using DBCP 1.4.<br/>
<br/>
It seems something has changed from 1.2.2 to 1.3 that has partially broken Oracle-Locator operations in dbcp 1.3<br/>
I&#39;ve seen some bug-reports for dbcp 1.3.1 which point in the same direction (oracle-db-error lead to java error) - perhaps these are the same problems...
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyne1r:
  </td>
                                            <td class="customfield_12310220">            <span title="06/Dec/10 15:09"><time class="livestamp allow-future" datetime="2010-12-06T15:09:52+0000">06/Dec/10 3:09 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170463
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      65474
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12491993" rel="12491993" data-issuekey="DBCP-349" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-349" href="https://issues.apache.org/jira/browse/DBCP-349">DBCP-349</a>
</td>
                                            <td class="summary"><p>
                Insert clob or blob with oracle connection crashes software 
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Critical
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            alina joshi
    </td>
                                            <td class="creator">            alina joshi
    </td>
                                            <td class="created"> 03/Dec/10 15:41 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:03 </td>
                                            <td class="resolutiondate"> 02/Dec/13 21:47 </td>
                                            <td class="versions">                        1.3            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">2</td>
                                            <td class="watches">4</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      windows XP , JDK 1.6, oracle 10g, oracle driver 10.2.0.2
  </td>
                                            <td class="description">       1&gt; tomcat 6.0.26 has tomcat-dbcp.jar that works completely fine. <br/>
<br/>
 2&gt; tomcat 6.0.28, tomcat 6.0.29, tomcat 5.0.30, tomcat 5.0.31 has tomcat-dbcp.jar file that doesn&#39;t work and throws following error :<br/>
<br/>
java.lang.ClassCastException: org.apache.tomcat.dbcp.dbcp.PoolableConnection cannot be cast to oracle.jdbc.OracleConnection<br/>
        at oracle.sql.CLOB.createTemporary(CLOB.java:754)<br/>
        at oracle.sql.CLOB.createTemporary(CLOB.java:716)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br/>
<br/>
Would like to know if there was any changes to the commons dbcp package for tomcat version 6.0.29?
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ohz:
  </td>
                                            <td class="customfield_12310220">            <span title="07/Apr/11 15:18"><time class="livestamp allow-future" datetime="2011-04-07T15:18:08+0100">07/Apr/11 3:18 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90448
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114625
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12480892" rel="12480892" data-issuekey="DBCP-348" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-348" href="https://issues.apache.org/jira/browse/DBCP-348">DBCP-348</a>
</td>
                                            <td class="summary"><p>
                connectionInitSqls doesn&#39;t work correctly. 
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Eiji Takahashi
    </td>
                                            <td class="creator">            Eiji Takahashi
    </td>
                                            <td class="created"> 25/Nov/10 07:35 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 31/Jan/14 09:47 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      CentOS 5.4<br/>
JDK 6u21
  </td>
                                            <td class="description">      The parameter name is different between the source code and the online document.<br/>
Souce code(BasicDataSourceFactory.java):<br/>
   private final static String PROP_INITCONNECTIONSQLS = &quot;initConnectionSqls&quot;;<br/>
<br/>
Online document(http://commons.apache.org/dbcp/configuration.html):<br/>
   Parameter name: connectionInitSqls<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oi7:
  </td>
                                            <td class="customfield_12310220">            <span title="25/Nov/10 19:57"><time class="livestamp allow-future" datetime="2010-11-25T19:57:53+0000">25/Nov/10 7:57 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90449
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114624
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12478441" rel="12478441" data-issuekey="DBCP-347" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-347" href="https://issues.apache.org/jira/browse/DBCP-347">DBCP-347</a>
</td>
                                            <td class="summary"><p>
                DelegatingStatement class has incomplete isWrapperFor method
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Robert Poskrobek
    </td>
                                            <td class="creator">            Robert Poskrobek
    </td>
                                            <td class="created"> 27/Oct/10 12:33 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 31/May/14 05:15 </td>
                                            <td class="resolutiondate"> 09/Dec/13 21:20 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1,                     1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate">3600</td>
                                            <td class="timeestimate">3600</td>
                                            <td class="timespent"></td>
                                            <td class="workratio">            0%
    </td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Windows 7. java version &quot;1.6.0_21&quot;. Dell Latitude E6410.
  </td>
                                            <td class="description">      Currently org.apache.commons.dbcp.DelegatingStatement#isWrapperFor checks only if:<br/>
<br/>
1. Requested class is assignable from the DelegatingStatement instance:        iface.isAssignableFrom(getClass())<br/>
2. Wrapped object is a wrapper for the requested class:            _stmt.isWrapperFor(iface)<br/>
<br/>
I think there should be another option checked i.e. requested class is assignable from the wrapped object&#39;s class. For example:   iface.isAssignableFrom(_stmt.getClass())<br/>
This is especially that in fact unwrap method properly assumes this possiblity i.e.:     return iface.cast(_stmt);<br/>
<br/>
The whole method should be:<br/>
<br/>
    public boolean isWrapperFor(Class&lt;?&gt; iface) throws SQLException {<br/>
        return iface.isAssignableFrom(getClass()) || iface.isAssignableFrom(_stmt.getClass()) || _stmt.isWrapperFor(iface);<br/>
    }
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     0%
</td>
                                            <td class="aggregateprogress">     0%
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate">3600</td>
                                            <td class="aggregatetimeoriginalestimate">3600</td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oif:
  </td>
                                            <td class="customfield_12310220">            <span title="27/Oct/10 12:58"><time class="livestamp allow-future" datetime="2010-10-27T12:58:09+0100">27/Oct/10 12:58 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90450
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114623
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12478213" rel="12478213" data-issuekey="DBCP-346" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-346" href="https://issues.apache.org/jira/browse/DBCP-346">DBCP-346</a>
</td>
                                            <td class="summary"><p>
                DBCP cannot set GenericObjectPool.lifo
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Ken Tatsushita
    </td>
                                            <td class="creator">            Ken Tatsushita
    </td>
                                            <td class="created"> 25/Oct/10 09:48 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 09/Jan/11 02:31 </td>
                                            <td class="versions">                        1.2.2,                     1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      All.
  </td>
                                            <td class="description">      Hi experts! <br/>
<br/>
I want to change the order of return connection.<br/>
change the GenericObjectPool.lifo setting false.(default is true). <br/>
<br/>
However GenericObjectPool.lifo cannot be changed. <br/>
Because the setter method is not implement in DBCP<br/>
<br/>
IMHO DBCP have to implement setter method of GenericObjectPool.lifo<br/>
<br/>
I made the patch that can change GenericObjectPool.lifo. <br/>
<br/>
Best regards.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyndsf:
  </td>
                                            <td class="customfield_12310220">            <span title="28/Oct/10 02:10"><time class="livestamp allow-future" datetime="2010-10-28T02:10:52+0100">28/Oct/10 2:10 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170421
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114622
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12475852" rel="12475852" data-issuekey="DBCP-345" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-345" href="https://issues.apache.org/jira/browse/DBCP-345">DBCP-345</a>
</td>
                                            <td class="summary"><p>
                NumActive is off-by-one at instantiation and causes premature exhaustion
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Cannot Reproduce
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Kevin Ross
    </td>
                                            <td class="creator">            Kevin Ross
    </td>
                                            <td class="created"> 05/Oct/10 15:19 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 30/Jan/14 16:30 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate">3600</td>
                                            <td class="timeestimate">3600</td>
                                            <td class="timespent"></td>
                                            <td class="workratio">            0%
    </td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      Scenario: we have some code that we had thought was potentially leaking connections.  In our unitTest/integrationTest environment, we know we can *lock down connections to a total of 2* and a full run should pass.  We had no such luck with a {{maxActive}} of 2.    <br/>
<br/>
We created/attached a {{DebugBasicDataSource}} which initializes a  {{DebugConnectionPool}} for logging purposes and delegates into the DBCP hierarchy.  BTW - consistent use of accessors would have made this a cleaner affair ;) <br/>
<br/>
{code}        // num active starts at one! Here is the original unmodified log message:<br/>
        //          BORROWING:  from AbandonedObjectPool@10f0f6ac (1 of 2) 0 idle: threadStats[ ]: all-time uniques{ (empty)  }<br/>
        // SEE! no borrows ever, and the first pre-borrow already has a count of 1!{code}<br/>
<br/>
Before borrowing the first connection - {{numActive}} is 1!  <br/>
<br/>
<br/>
The gorier details below, I hope they help someone else!<br/>
<br/>
Constraining the pool was the best way to uncover the leakage.  <br/>
<br/>
Thinking it was our error, we went after our code to find the problem.  We had such a hard time understanding who was using connections, in which Spring context.  The confusion stemmed from the fact that our unitTests run against REST resources deployed as Jersey components in a Grizzly container.  Where they using the same connection pool or not?  Was the unitTest setup side exhausting more connections, or was it leaking on the REST service side.<br/>
<br/>
Answers: <br/>
1.  Our unitTests executing Jersey with in-VM Grizzly container do indeed utilize the same pool (and same Spring context).<br/>
2.  Our unitTest (side) was not using more than one connection for data setup, and it returned the connection for reuse.<br/>
3.  Our REST service side was only using one connection, but was a Grizzly threaded container and we have AcitveMQ running as well.  Practically, one server connection could handle everything, but the REST service and ActiveMQ listener could potentially claim 2.<br/>
<br/>
<br/>
Note, the attached DebugBasicDataSource was quite useful to determine which threads were claiming which connections in a leak situation.  Certainly do not configure it on the production side, but it might be nice to see something like this offered up on the DBCP site somewhere to help developers find or confirm their misconfiguration or bad code.<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     0%
</td>
                                            <td class="aggregateprogress">     0%
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate">3600</td>
                                            <td class="aggregatetimeoriginalestimate">3600</td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oin:
  </td>
                                            <td class="customfield_12310220">            <span title="06/Oct/10 02:27"><time class="livestamp allow-future" datetime="2010-10-06T02:27:04+0100">06/Oct/10 2:27 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90451
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114621
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    4
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12475624" rel="12475624" data-issuekey="DBCP-344" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-344" href="https://issues.apache.org/jira/browse/DBCP-344">DBCP-344</a>
</td>
                                            <td class="summary"><p>
                Maven configuration updated with configuration for transitive dependency conflict.
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Trivial
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Jeremy Whiting
    </td>
                                            <td class="creator">            Jeremy Whiting
    </td>
                                            <td class="created"> 01/Oct/10 15:37 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 05/Jan/11 04:53 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Any
  </td>
                                            <td class="description">      Added configuration to fix transitive dependencies.<br/>
<br/>
there are two conflicts.<br/>
<br/>
junit<br/>
commons-logging<br/>
<br/>
Attached to this JIRA ticket is a svn diff of the Maven2 POM configuration.<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyndxj:
  </td>
                                            <td class="customfield_12310220">            <span title="31/Oct/10 15:10"><time class="livestamp allow-future" datetime="2010-10-31T15:10:46+0000">31/Oct/10 3:10 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170444
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114620
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12473766" rel="12473766" data-issuekey="DBCP-343" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-343" href="https://issues.apache.org/jira/browse/DBCP-343">DBCP-343</a>
</td>
                                            <td class="summary"><p>
                RemoveAbandoned setting closes the active connection.
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Reopened
    </td>
                                            <td class="priority">   Blocker
</td>
                                            <td class="resolution">    <em>Unresolved</em>
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Singaravelu Suburayan
    </td>
                                            <td class="creator">            Singaravelu Suburayan
    </td>
                                            <td class="created"> 10/Sep/10 06:43 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 25/Feb/15 00:25 </td>
                                            <td class="resolutiondate"> &nbsp; </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">2</td>
                                            <td class="watches">3</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Linux 64 bit, Ubuntu 5.*
  </td>
                                            <td class="description">      The documentation says, RemoveAbandoned connection setting will remove only the connections that are idle for the configured timeout. But I see it is closing the connections that are active.<br/>
<br/>
The logic in DBCP implementatoin shows that it calculate the idle time from the time of the connection is created, irrespective of the connection is used. So it just close the connection in removeAbandonedTimeout.<br/>
<br/>
In my code, I&#39;m reusing the connection for more DB statements to do intensive db operations, which hold the connection for more than 5 minutes . The connection will never be idle for more than a few seconds.<br/>
<br/>
My setting of removeabandonedTimeout = 300 brutally closes the connection in 5 minutes, without checking if the connection is in use or not.<br/>
<br/>
I assume it should involve the activity of the statement object also to do the idle time calculation.<br/>
<br/>
thanks,<br/>
Sing<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyndl3:
  </td>
                                            <td class="customfield_12310220">            <span title="10/Sep/10 11:19"><time class="livestamp allow-future" datetime="2010-09-10T11:19:00+0100">10/Sep/10 11:19 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170388
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114619
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12473220" rel="12473220" data-issuekey="DBCP-342" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-342" href="https://issues.apache.org/jira/browse/DBCP-342">DBCP-342</a>
</td>
                                            <td class="summary"><p>
                Not cleaned up commons pool&#39;s evictor task when SQLException occurs after the GenericObjectPool is initialized in createDataSource.
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Resolved
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            byungchol.kim
    </td>
                                            <td class="creator">            byungchol.kim
    </td>
                                            <td class="created"> 03/Sep/10 09:48 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 25/Feb/15 00:21 </td>
                                            <td class="resolutiondate"> 25/Feb/15 00:21 </td>
                                            <td class="versions">                        1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">2</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-339,                                                DBCP-353,                                                DBCP-379                        </td>
                                            <td class="environment">      * commons-pool : 1.4<br/>
* commons-dbcp : 1.4, 1.3 both<br/>
* dbms : MSSQL 2007
  </td>
                                            <td class="description">      JIRA DBCP-93 bts is not fixed correctly<br/>
(JIRA DBCP-93 : If SQLException occurs after the GenericObjectPool is initialized in createDataSource, the evictor task is not cleaned up)<br/>
<br/>
Only one evictor timer thread leaves but evictor timer task queued as many as createDataSource() method called.<br/>
queued evictor will keep tries to make connection to meet min idle connection.<br/>
if suddenly dbms become stable and can accept connection again,<br/>
then every queued evictor will try to make connection simultaneously.<br/>
<br/>
In my case there were more then 100000 user requests while I set wrong password to database,<br/>
when I change my password to correct in database <br/>
more then 100000 evictor tries to make connection<br/>
and finally mssql makes connections as many as integer limit and dbms dies.<br/>
<br/>
here is my test.<br/>
<br/>
{code:title=TestBasicDataSource.java}<br/>
    public void testCreateDataSourceCleanupEvictor() throws Exception {<br/>
    	ds.close();<br/>
    	ds = null;<br/>
    	ds = createDataSource();<br/>
    	ds.setDriverClassName(&quot;org.apache.commons.dbcp.TesterConnRequestCountDriver&quot;);<br/>
    	ds.setUrl(&quot;jdbc:apache:commons:testerConnRequestCountDriver&quot;);<br/>
    	ds.setValidationQuery(&quot;SELECT DUMMY FROM DUAL&quot;);<br/>
    	ds.setUsername(&quot;username&quot;);<br/>
    	<br/>
    	// Make password incorrect, so createDataSource will throw<br/>
    	ds.setPassword(&quot;wrong&quot;);<br/>
    	// Set timeBetweenEvictionRuns &gt; 0, so evictor will be created<br/>
    	ds.setTimeBetweenEvictionRunsMillis(100);<br/>
    	// Set min idle &gt; 0, so evictor will try to make connection as many as idle count<br/>
    	ds.setMinIdle(2);<br/>
    	<br/>
    	Class.forName(&quot;org.apache.commons.dbcp.TesterConnRequestCountDriver&quot;);<br/>
    	TesterConnRequestCountDriver testerDriver = (TesterConnRequestCountDriver) DriverManager.getDriver(&quot;jdbc:apache:commons:testerConnRequestCountDriver&quot;);<br/>
    	testerDriver.initConnRequestCount();<br/>
    	<br/>
    	// user request 10 times<br/>
    	for (int i=0; i&lt;10; i++) {<br/>
    		try {<br/>
    			@SuppressWarnings(&quot;unused&quot;)<br/>
				DataSource ds2 = ds.createDataSource();<br/>
    		} catch (SQLException e) {<br/>
    			// Ignore<br/>
    		}<br/>
    	}<br/>
<br/>
    	// sleep 1000ms. evictory will invoked 10 times.<br/>
    	Thread.sleep(1000);<br/>
    	<br/>
    	// if orphan evictor is alive, connection request count will be 100 which is denoted from (ds.createDataSource() count * evictor invoke count)<br/>
    	// if DBMS connection is back to stable in 10 minutes then this test case will make 120000 connections simultaneously<br/>
    	// 		120000 connections = ds.createDataSource() count (10) * evictor invoke count (6000) * min idle (2)<br/>
    	// but if evictor is cleaned up, connection request count will be only 10 (ds.createDataSource() count )<br/>
    	assertEquals(10, testerDriver.getConnectionRequestCount());<br/>
    	<br/>
    	// fail to create datasource then clean up orphan connection pool and evictor in connnection pool<br/>
    	assertNull(ds.connectionPool);<br/>
    }<br/>
}<br/>
{code}
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyndrb:
  </td>
                                            <td class="customfield_12310220">            <span title="25/Apr/11 19:38"><time class="livestamp allow-future" datetime="2011-04-25T19:38:52+0100">25/Apr/11 7:38 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170416
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114618
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12473149" rel="12473149" data-issuekey="DBCP-341" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-341" href="https://issues.apache.org/jira/browse/DBCP-341">DBCP-341</a>
</td>
                                            <td class="summary"><p>
                LocalXAConnectionFactory does not properly check if Xid is equal to currentXid when resuming
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Ioannis Canellos
    </td>
                                            <td class="creator">            Ioannis Canellos
    </td>
                                            <td class="created"> 02/Sep/10 16:29 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 02/Feb/14 20:46 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">                        1.5.1,                     2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">1</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      The current implementation checks if Xid is not equal to currentXid using the != . That doesn&#39;t work in all cases resulting in XAException.<br/>
I think that this check should be left to the Xid implementation.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oiv:
  </td>
                                            <td class="customfield_12310220">            <span title="04/Jan/11 19:57"><time class="livestamp allow-future" datetime="2011-01-04T19:57:54+0000">04/Jan/11 7:57 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90452
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114617
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12470059" rel="12470059" data-issuekey="DBCP-340" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-340" href="https://issues.apache.org/jira/browse/DBCP-340">DBCP-340</a>
</td>
                                            <td class="summary"><p>
                setQueryTimeout(int)  should be set through property.
    </p>
</td>
                                            <td class="issuetype"> Improvement</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Minhaj Mehmood
    </td>
                                            <td class="creator">            Minhaj Mehmood
    </td>
                                            <td class="created"> 24/Jul/10 00:14 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 14/Feb/14 12:55 </td>
                                            <td class="versions">                        1.3.1            </td>
                                            <td class="fixVersions">                        2.0            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      We should have the option to set the Query Timeout for each query through some property.
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9oj3:
  </td>
                                            <td class="customfield_12310220">            <span title="31/Oct/10 15:08"><time class="livestamp allow-future" datetime="2010-10-31T15:08:17+0000">31/Oct/10 3:08 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90453
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114616
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12468832" rel="12468832" data-issuekey="DBCP-339" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-339" href="https://issues.apache.org/jira/browse/DBCP-339">DBCP-339</a>
</td>
                                            <td class="summary"><p>
                orphaned connectionPools created on Exception within createDataSource method
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Duplicate
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Mike Bartlett
    </td>
                                            <td class="creator">            Mike Bartlett
    </td>
                                            <td class="created"> 08/Jul/10 17:42 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 25/Apr/11 17:27 </td>
                                            <td class="resolutiondate"> 24/Apr/11 01:26 </td>
                                            <td class="versions">                        1.2.2,                     1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">1</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                                        DBCP-342                        </td>
                                            <td class="environment">      Linux<br/>
MySQL 5.1.47<br/>
JDK 1.6<br/>
commonsPool 1.5.4
  </td>
                                            <td class="description">      When an Exception is thrown in the BasicDataSource.createDataSource after the connectionPool instance variable has been set the connectionPool is not closed.<br/>
<br/>
If the timeBetweenEvictionRunsMillis is greater than zero a TaskTimer evictor is created in the GenericObjectPool. This TaskTimer keeps running even though the DataSource was not successfully created. The evictor when it runs will attempt to create connections for this orphaned connectionPool up to the min connections (minIdle).<br/>
<br/>
If the database is down when the createDataSource is called an Exception will be thrown and an orphaned connectionPool will be created. If serveral retries are attempted while the database is down several orphaned connectionPools are created. Once the database is back up, all these orphaned connectionPool&#39;s evitor threads will attempt to created minIdle connections to the database. This exhausts the max num connections on the database.<br/>
<br/>
One solution to to close the connectionPool when an Exception is thrown within the createDataSource method.<br/>
<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyoukv:
  </td>
                                            <td class="customfield_12310220">            <span title="11/Jul/10 14:12"><time class="livestamp allow-future" datetime="2010-07-11T14:12:05+0100">11/Jul/10 2:12 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      178973
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114615
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12466851" rel="12466851" data-issuekey="DBCP-338" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-338" href="https://issues.apache.org/jira/browse/DBCP-338">DBCP-338</a>
</td>
                                            <td class="summary"><p>
                ORA-01453 on connections with previous errors
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Cannot Reproduce
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Phil Steitz
    </td>
                                            <td class="creator">            Phil Steitz
    </td>
                                            <td class="created"> 13/Jun/10 19:06 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 14/Feb/14 15:00 </td>
                                            <td class="versions">                        1.0,                     1.1,                     1.2,                     1.2.1,                     1.2.2,                     1.3,                     1.4            </td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      Oracle driver 11.1.0.7.0. 
  </td>
                                            <td class="description">      Adapted from a post to commons-user by Tim Dudgeon:<br/>
<br/>
When an Oracle connection with autocommit=true encounters an error executing a DDL statement,  the connection is left in a transactional state that can lead to ORA-01453 when the connection is subsequently retrieved from the pool.  The following code illustrates the problem:<br/>
<br/>
{code}<br/>
<br/>
package foo;<br/>
<br/>
import java.sql.Connection;<br/>
import java.sql.SQLException;<br/>
import java.sql.Statement;<br/>
import org.apache.commons.dbcp.ConnectionFactory;<br/>
import org.apache.commons.dbcp.DriverManagerConnectionFactory;<br/>
import org.apache.commons.dbcp.PoolableConnectionFactory;<br/>
import org.apache.commons.dbcp.PoolingDataSource;<br/>
import org.apache.commons.pool.impl.GenericObjectPool;<br/>
<br/>
public class Ora01453Example {<br/>
<br/>
    private static final String URL = &quot;jdbc:oracle:thin:@192.168.56.101:1521:orcl&quot;;<br/>
    private static final String USERNAME = &quot;ijc&quot;;<br/>
    private static final String PASSWORD = &quot;ijc&quot;;<br/>
    private PoolingDataSource dataSource;<br/>
<br/>
    public static void main(String[] args) throws SQLException {<br/>
        Ora01453Example instance = new Ora01453Example();<br/>
        instance.run();<br/>
    }<br/>
<br/>
    Ora01453Example() {<br/>
        GenericObjectPool connectionPool = new GenericObjectPool(null);<br/>
        connectionPool.setMaxActive(5);<br/>
        connectionPool.setMaxIdle(2);<br/>
        connectionPool.setMaxWait(10000);<br/>
        ConnectionFactory connectionFactory = new DriverManagerConnectionFactory(URL, USERNAME, PASSWORD);<br/>
        PoolableConnectionFactory poolableConnectionFactory = new PoolableConnectionFactory(<br/>
                connectionFactory, connectionPool, null, null, false, true);<br/>
        dataSource = new PoolingDataSource(connectionPool);<br/>
        dataSource.setAccessToUnderlyingConnectionAllowed(true);<br/>
    }<br/>
<br/>
    void run() throws SQLException {<br/>
        System.out.println(&quot;Running...&quot;);<br/>
        // get the connection<br/>
        Connection con = getConnection();<br/>
        try {<br/>
            // this will fail, either first time or second<br/>
            executeSql(con, &quot;create table qwerty (id varchar2(100))&quot;);<br/>
            executeSql(con, &quot;create table qwerty (id varchar2(100))&quot;);<br/>
        } catch (SQLException e) {<br/>
            System.out.println(&quot;Failed as expected&quot;);<br/>
        } finally {<br/>
            // close connection so it goes back to pool<br/>
            con.close();<br/>
        }<br/>
<br/>
        // get a connection from pool again.<br/>
        con = getConnection();<br/>
        System.out.println(&quot;Setting transaction level&quot;);<br/>
        // try to set isolation level - will fail (assuming same connection is retrieved)<br/>
        try {<br/>
            con.setAutoCommit(false);<br/>
            con.setTransactionIsolation(Connection.TRANSACTION_SERIALIZABLE);<br/>
        } finally {<br/>
            con.close();<br/>
        }<br/>
    }<br/>
<br/>
    Connection getConnection() throws SQLException {<br/>
        Connection con = dataSource.getConnection();<br/>
        System.out.println(<br/>
                &quot;Got Connection: &quot; + con.hashCode()<br/>
                + &quot; autoCommit=&quot; + con.getAutoCommit()<br/>
                + &quot; isolation=&quot; + con.getTransactionIsolation());<br/>
        return con;<br/>
    }<br/>
<br/>
    void executeSql(Connection con, String sql) throws SQLException {<br/>
        Statement stmt = con.createStatement();<br/>
        try {<br/>
            stmt.execute(sql);<br/>
        } finally {<br/>
            stmt.close();<br/>
        }<br/>
    }<br/>
}<br/>
<br/>
{code}<br/>
<br/>
Assuming the problem is that the driver creates, but does not commit a transaction on the failed DDL statement (despite autocommit=true), the simplest DBCP workaround would be to remove the autocommit test that guards the rollback in PooloableConnectionFactory#passivate.  That would have performance impacts, so it may be better to take an approach similar to DBCP-116, where we add a configuration parameter to either force rollback on each passivate or extend the rollbackAfterValidation config parameter defined there to PoolableConnectionFactory.<br/>
<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hy9ojb:
  </td>
                                            <td class="customfield_12310220">            <span title="14/Feb/14 15:00"><time class="livestamp allow-future" datetime="2014-02-14T15:00:15+0000">14/Feb/14 3:00 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      90454
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114614
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12466690" rel="12466690" data-issuekey="DBCP-337" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-337" href="https://issues.apache.org/jira/browse/DBCP-337">DBCP-337</a>
</td>
                                            <td class="summary"><p>
                equals in DelegatingXXX is not reflexive and could be faster
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Minor
</td>
                                            <td class="resolution">    Fixed
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Rob Gansevles
    </td>
                                            <td class="creator">            Rob Gansevles
    </td>
                                            <td class="created"> 10/Jun/10 21:49 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 24/Feb/15 03:23 </td>
                                            <td class="resolutiondate"> 28/Apr/11 22:58 </td>
                                            <td class="versions">    &nbsp;
</td>
                                            <td class="fixVersions">                        1.3.1,                     1.4.1            </td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment"></td>
                                            <td class="description">      The equals() methods in the different DelegatingXXX classes do not start with a simple object equality check for this.<br/>
The equals methods do not implement the contract for equals because x.equals(x) where getInnermostDelegate() for x returns null will return false.<br/>
Performance-wise the check would help since you don&#39;t need to walk the delegate tree.<br/>
<br/>
I will attach a patch.<br/>
<br/>
Rob<br/>

  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyndtb:
  </td>
                                            <td class="customfield_12310220">            <span title="28/Apr/11 22:58"><time class="livestamp allow-future" datetime="2011-04-28T22:58:26+0100">28/Apr/11 10:58 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      170425
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114613
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    1
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12466350" rel="12466350" data-issuekey="DBCP-336" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-336" href="https://issues.apache.org/jira/browse/DBCP-336">DBCP-336</a>
</td>
                                            <td class="summary"><p>
                Incorect data from data base if connection pool size is minimum (say 1 to 3 )
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Invalid
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Rony M Sunny
    </td>
                                            <td class="creator">            Rony M Sunny
    </td>
                                            <td class="created"> 07/Jun/10 14:53 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 21/Oct/10 01:33 </td>
                                            <td class="resolutiondate"> 08/Jun/10 14:23 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">       java on linux and sql server 2005  db on windows 
  </td>
                                            <td class="description">      <br/>
   Environment:<br/>
   I have a sp which return data from data base according to a criteria and i put a sleep of 700 millisecond on sp . <br/>
   The connection pool configuration is very minimum compared to data accessing thread, then from multiple java thread i tried to access data for a time period of 30- 60 minute, also i put a query execution time out of 1 second, <br/>
<br/>
    The result is that<br/>
       Some thread have not get any data from db as there is not much available connection to db in pool and can see it from the exception log , it is OK.<br/>
     But the problem  is that after some period time (take 30 - 60 min)  data retrieved by  threads are incorrect, means data retrieved is, query result of some other thread.<br/>
     <br/>
My connection pool configuration is here<br/>
-----------------------------------------------------------<br/>
  &lt;property name=&quot;maxIdle&quot; value=&quot;3&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;poolInitialSize&quot; value=&quot;1&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;testOnBorrow&quot; value=&quot;true&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;maxStmts&quot; value=&quot;10&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;validationQuery&quot; value=&quot;SELECT 1&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;password&quot; value=&quot;*****&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;url&quot; value=&quot;jdbc:microsoft:sqlserver://192.168.29.222:1433;           DatabaseName=marketsummary&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;testOnReturn&quot; value=&quot;true&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;maxActive&quot; value=&quot;3&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;userId&quot; value=&quot;***&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;minIdle&quot; value=&quot;3&quot; description=&quot;String&quot;/&gt;<br/>
                    &lt;property name=&quot;maxWait&quot; value=&quot;1000&quot; description=&quot;&quot;/&gt;<br/>
                    &lt;property name=&quot;driver&quot; value=&quot;com.microsoft.jdbc.sqlserver.SQLServerDriver&quot; description=&quot;&quot;/&gt;<br/>
<br/>
----------------------------------------------------------<br/>
<br/>
Please look in to this<br/>
   
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyouzj:
  </td>
                                            <td class="customfield_12310220">            <span title="08/Jun/10 14:23"><time class="livestamp allow-future" datetime="2010-06-08T14:23:06+0100">08/Jun/10 2:23 PM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      179039
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114612
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    2
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>


                <tr id="issuerow12465331" rel="12465331" data-issuekey="DBCP-335" class="issuerow">
                                            <td class="project">    Commons Dbcp
</td>
                                            <td class="issuekey">

    <a class="issue-link" data-issue-key="DBCP-335" href="https://issues.apache.org/jira/browse/DBCP-335">DBCP-335</a>
</td>
                                            <td class="summary"><p>
                NPE with MySQL PreparedStatement
    </p>
</td>
                                            <td class="issuetype"> Bug</td>
                                            <td class="status">
                Closed
    </td>
                                            <td class="priority">   Major
</td>
                                            <td class="resolution">    Cannot Reproduce
</td>
                                            <td class="assignee">    <em>Unassigned</em>
</td>
                                            <td class="reporter">            Marcus Better
    </td>
                                            <td class="creator">            Marcus Better
    </td>
                                            <td class="created"> 25/May/10 05:06 </td>
                                            <td class="lastViewed"> &nbsp; </td>
                                            <td class="updated"> 30/Apr/11 18:49 </td>
                                            <td class="resolutiondate"> 30/Apr/11 18:49 </td>
                                            <td class="versions">                        1.4            </td>
                                            <td class="fixVersions">    &nbsp;
</td>
                                            <td class="components">    &nbsp;
</td>
                                            <td class="duedate">    &nbsp;
</td>
                                            <td class="votes">0</td>
                                            <td class="watches">0</td>
                                            <td class="thumbnail"></td>
                                            <td class="timeoriginalestimate"></td>
                                            <td class="timeestimate"></td>
                                            <td class="timespent"></td>
                                            <td class="workratio">&nbsp;
</td>
                                            <td class="subtasks">                </td>
                                            <td class="issuelinks">                </td>
                                            <td class="environment">      CloudFoundry, Linux, Sun Java 1.6.0_04, Grails 1.2.2, MySQL Connector 5.1.12
  </td>
                                            <td class="description">      My Grails application using MySQL and DBCP often throws an exception as below. I can trigger it by making a simultaneous requests (three at a time) on differend threads in a ThreadPoolExecutor. The requests would all use the same query. This triggers the exception with a few percent probability.<br/>
<br/>
I have tried with DBCP 1.2.2 and 1.4.<br/>
<br/>
There is a similar-looking [MySQL bug|http://bugs.mysql.com/bug.php?id=41628] but they blame the pool...<br/>
<br/>
{code}<br/>
Exception in thread &quot;pool-1-thread-12&quot; java.lang.NullPointerException<br/>
        at com.mysql.jdbc.PreparedStatement.fillSendPacket(PreparedStatement.java:2475)<br/>
        at com.mysql.jdbc.PreparedStatement.fillSendPacket(PreparedStatement.java:2451)<br/>
        at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2205)<br/>
        at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)<br/>
        at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)<br/>
        at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)<br/>
        at org.hibernate.loader.Loader.getResultSet(Loader.java:1808)<br/>
        at org.hibernate.loader.Loader.doQuery(Loader.java:697)<br/>
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)<br/>
        at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)<br/>
        at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)<br/>
        at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)<br/>
        at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)<br/>
        at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)<br/>
        at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)<br/>
        at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)<br/>
        at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:121)<br/>
        at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)<br/>
        at org.hibernate.impl.SessionImpl.immediateLoad(SessionImpl.java:863)<br/>
        at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:95)<br/>
        at org.codehaus.groovy.grails.orm.hibernate.proxy.HibernateProxyHandler.unwrapProxy(HibernateProxyHandler.java:80)<br/>
        at org.codehaus.groovy.grails.orm.hibernate.cfg.GrailsHibernateUtil.unwrapProxy(GrailsHibernateUtil.java:322)<br/>
        at org.codehaus.groovy.grails.orm.hibernate.cfg.GrailsHibernateUtil$unwrapProxy.call(Unknown Source)<br/>
        at org.codehaus.groovy.grails.plugins.orm.hibernate.HibernatePluginSupport$__clinit__closure88.doCall(HibernatePluginSupport.groovy:401)<br/>
        at sun.reflect.GeneratedMethodAccessor381.invoke(Unknown Source)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br/>
        at java.lang.reflect.Method.invoke(Method.java:597)<br/>
        at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:266)<br/>
        at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:51)<br/>
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:151)<br/>
        at org.codehaus.groovy.grails.plugins.orm.hibernate.HibernatePluginSupport$__clinit__closure88.call(HibernatePluginSupport.groovy)<br/>
        at sun.reflect.GeneratedMethodAccessor380.invoke(Unknown Source)<br/>
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br/>
        at java.lang.reflect.Method.invoke(Method.java:597)<br/>
        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:86)<br/>
        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:234)<br/>
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1049)<br/>
        at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:923)<br/>
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:880)<br/>
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:924)<br/>
        at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:923)<br/>
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:880)<br/>
        at org.codehaus.groovy.runtime.InvokerHelper.invokePogoMethod(InvokerHelper.java:739)<br/>
        at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:722)<br/>
        at org.codehaus.groovy.runtime.metaclass.ClosureMetaMethod$1.invoke(ClosureMetaMethod.java:135)<br/>
        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:234)<br/>
        at groovy.lang.MetaClassImpl.getProperty(MetaClassImpl.java:1594)<br/>
        at groovy.lang.ExpandoMetaClass.getProperty(ExpandoMetaClass.java:951)<br/>
        at groovy.lang.MetaClassImpl.getProperty(MetaClassImpl.java:3287)<br/>
        at groovy.lang.ExpandoMetaClass.getProperty(ExpandoMetaClass.java:964)<br/>
        at org.codehaus.groovy.runtime.callsite.PogoMetaClassGetPropertySite.getProperty(PogoMetaClassGetPropertySite.java:48)<br/>
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGroovyObjectGetProperty(AbstractCallSite.java:241)<br/>
        at org.example.MyService.onApplicationEvent(MyService.groovy:52)<br/>
        at org.example.MyService.onApplicationEvent(MyService.groovy)<br/>
        at org.springframework.context.event.SimpleApplicationEventMulticaster$1.run(SimpleApplicationEventMulticaster.java:92)<br/>
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)<br/>
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)<br/>
        at java.lang.Thread.run(Thread.java:619)<br/>
{code}
  </td>
                                            <td class="security"></td>
                                            <td class="progress">     
</td>
                                            <td class="aggregateprogress">     
</td>
                                            <td class="aggregatetimespent"></td>
                                            <td class="aggregatetimeestimate"></td>
                                            <td class="aggregatetimeoriginalestimate"></td>
                                            <td class="labels">    </td>
                                            <td class="customfield_12310294"></td>
                                            <td class="customfield_12311820">      2|hyovbj:
  </td>
                                            <td class="customfield_12310220">            <span title="01/Jun/10 09:29"><time class="livestamp allow-future" datetime="2010-06-01T09:29:06+0100">01/Jun/10 9:29 AM</time></span>
    </td>
                                            <td class="customfield_12311122"></td>
                                            <td class="customfield_12311121"></td>
                                            <td class="customfield_12310920">      179093
  </td>
                                            <td class="customfield_12310921"></td>
                                            <td class="customfield_12311123"></td>
                                            <td class="customfield_12311120"></td>
                                            <td class="customfield_12310420">      114611
  </td>
                                            <td class="customfield_12311720"></td>
                                            <td class="customfield_12310310">    0
</td>
                                            <td class="customfield_10010"></td>
                                            <td class="customfield_12310010"></td>
                                            <td class="customfield_12310291">    </td>
                                            <td class="customfield_12310290">


</td>
                    </tr>
                </tbody>
    </table>
    <div class="end-of-stable-message"></div>
            <table border="1" >
<tr>
    <td bgcolor="#dddddd" colspan="52"><font size="1">
        Generated at Fri Mar 20 15:40:50 UTC 2015 using JIRA 6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16.
    </font></td>
</tr>
</table>

</body>
</html>